console.log("JS 실행:","msgbox.js");const Gr={};function no({message:e,buttons:n}){return new Promise(l=>{const r=document.createElement("div");r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.5)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.zIndex="9999";const o=document.createElement("div");o.style.backgroundColor="#fff",o.style.padding="20px",o.style.borderRadius="8px",o.style.width="300px",o.style.textAlign="center",o.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)";const s=document.createElement("p");s.textContent=e,o.appendChild(s),n.forEach(a=>{const f=document.createElement("button");f.textContent=a.label,f.style.margin="5px",f.onclick=()=>{l(a.value),document.body.removeChild(r)},o.appendChild(f),a.default&&(f.style.fontWeight="bold")}),r.appendChild(o),document.body.appendChild(r)})}Gr.showMessageBox=window.showMessageBox||no;const{showMessageBox:mn}=Gr,me={};me.toRGBA8=function(e){var n=e.width,l=e.height;if(e.tabs.acTL==null)return[me.toRGBA8.decodeImage(e.data,n,l,e).buffer];var r=[];e.frames[0].data==null&&(e.frames[0].data=e.data);for(var o=n*l*4,s=new Uint8Array(o),a=new Uint8Array(o),f=new Uint8Array(o),d=0;d<e.frames.length;d++){var u=e.frames[d],w=u.rect.x,_=u.rect.y,A=u.rect.width,b=u.rect.height,C=me.toRGBA8.decodeImage(u.data,A,b,e);if(d!=0)for(var R=0;R<o;R++)f[R]=s[R];if(u.blend==0?me._copyTile(C,A,b,s,n,l,w,_,0):u.blend==1&&me._copyTile(C,A,b,s,n,l,w,_,1),r.push(s.buffer.slice(0)),u.dispose!=0){if(u.dispose==1)me._copyTile(a,A,b,s,n,l,w,_,0);else if(u.dispose==2)for(var R=0;R<o;R++)s[R]=f[R]}}return r};me.toRGBA8.decodeImage=function(e,n,l,r){var o=n*l,s=me.decode._getBPP(r),a=Math.ceil(n*s/8),f=new Uint8Array(o*4),d=new Uint32Array(f.buffer),u=r.ctype,w=r.depth,_=me._bin.readUshort;if(u==6){var A=o<<2;if(w==8)for(var b=0;b<A;b+=4)f[b]=e[b],f[b+1]=e[b+1],f[b+2]=e[b+2],f[b+3]=e[b+3];if(w==16)for(var b=0;b<A;b++)f[b]=e[b<<1]}else if(u==2){var C=r.tabs.tRNS;if(C==null){if(w==8)for(var b=0;b<o;b++){var R=b*3;d[b]=255<<24|e[R+2]<<16|e[R+1]<<8|e[R]}if(w==16)for(var b=0;b<o;b++){var R=b*6;d[b]=255<<24|e[R+4]<<16|e[R+2]<<8|e[R]}}else{var L=C[0],N=C[1],j=C[2];if(w==8)for(var b=0;b<o;b++){var P=b<<2,R=b*3;d[b]=255<<24|e[R+2]<<16|e[R+1]<<8|e[R],e[R]==L&&e[R+1]==N&&e[R+2]==j&&(f[P+3]=0)}if(w==16)for(var b=0;b<o;b++){var P=b<<2,R=b*6;d[b]=255<<24|e[R+4]<<16|e[R+2]<<8|e[R],_(e,R)==L&&_(e,R+2)==N&&_(e,R+4)==j&&(f[P+3]=0)}}}else if(u==3){var S=r.tabs.PLTE,h=r.tabs.tRNS,p=h?h.length:0;if(w==1)for(var i=0;i<l;i++)for(var x=i*a,U=i*n,b=0;b<n;b++){var P=U+b<<2,G=e[x+(b>>3)]>>7-((b&7)<<0)&1,Z=3*G;f[P]=S[Z],f[P+1]=S[Z+1],f[P+2]=S[Z+2],f[P+3]=G<p?h[G]:255}if(w==2)for(var i=0;i<l;i++)for(var x=i*a,U=i*n,b=0;b<n;b++){var P=U+b<<2,G=e[x+(b>>2)]>>6-((b&3)<<1)&3,Z=3*G;f[P]=S[Z],f[P+1]=S[Z+1],f[P+2]=S[Z+2],f[P+3]=G<p?h[G]:255}if(w==4)for(var i=0;i<l;i++)for(var x=i*a,U=i*n,b=0;b<n;b++){var P=U+b<<2,G=e[x+(b>>1)]>>4-((b&1)<<2)&15,Z=3*G;f[P]=S[Z],f[P+1]=S[Z+1],f[P+2]=S[Z+2],f[P+3]=G<p?h[G]:255}if(w==8)for(var b=0;b<o;b++){var P=b<<2,G=e[b],Z=3*G;f[P]=S[Z],f[P+1]=S[Z+1],f[P+2]=S[Z+2],f[P+3]=G<p?h[G]:255}}else if(u==4){if(w==8)for(var b=0;b<o;b++){var P=b<<2,q=b<<1,re=e[q];f[P]=re,f[P+1]=re,f[P+2]=re,f[P+3]=e[q+1]}if(w==16)for(var b=0;b<o;b++){var P=b<<2,q=b<<2,re=e[q];f[P]=re,f[P+1]=re,f[P+2]=re,f[P+3]=e[q+2]}}else if(u==0)for(var L=r.tabs.tRNS?r.tabs.tRNS:-1,i=0;i<l;i++){var pe=i*a,de=i*n;if(w==1)for(var ve=0;ve<n;ve++){var re=255*(e[pe+(ve>>>3)]>>>7-(ve&7)&1),Ie=re==L*255?0:255;d[de+ve]=Ie<<24|re<<16|re<<8|re}else if(w==2)for(var ve=0;ve<n;ve++){var re=85*(e[pe+(ve>>>2)]>>>6-((ve&3)<<1)&3),Ie=re==L*85?0:255;d[de+ve]=Ie<<24|re<<16|re<<8|re}else if(w==4)for(var ve=0;ve<n;ve++){var re=17*(e[pe+(ve>>>1)]>>>4-((ve&1)<<2)&15),Ie=re==L*17?0:255;d[de+ve]=Ie<<24|re<<16|re<<8|re}else if(w==8)for(var ve=0;ve<n;ve++){var re=e[pe+ve],Ie=re==L?0:255;d[de+ve]=Ie<<24|re<<16|re<<8|re}else if(w==16)for(var ve=0;ve<n;ve++){var re=e[pe+(ve<<1)],Ie=_(e,pe+(ve<<b))==L?0:255;d[de+ve]=Ie<<24|re<<16|re<<8|re}}return f};me.decode=function(e){for(var n=new Uint8Array(e),l=8,r=me._bin,o=r.readUshort,s=r.readUint,a={tabs:{},frames:[]},f=new Uint8Array(n.length),d=0,u,w=0,_=[137,80,78,71,13,10,26,10],A=0;A<8;A++)if(n[A]!=_[A])throw"The input is not a PNG file!";for(;l<n.length;){var b=r.readUint(n,l);l+=4;var C=r.readASCII(n,l,4);if(l+=4,C=="IHDR")me.decode._IHDR(n,l,a);else if(C=="CgBI")a.tabs[C]=n.slice(l,l+4);else if(C=="IDAT"){for(var A=0;A<b;A++)f[d+A]=n[l+A];d+=b}else if(C=="acTL")a.tabs[C]={num_frames:s(n,l),num_plays:s(n,l+4)},u=new Uint8Array(n.length);else if(C=="fcTL"){if(w!=0){var R=a.frames[a.frames.length-1];R.data=me.decode._decompress(a,u.slice(0,w),R.rect.width,R.rect.height),w=0}var L={x:s(n,l+12),y:s(n,l+16),width:s(n,l+4),height:s(n,l+8)},N=o(n,l+22);N=o(n,l+20)/(N==0?100:N);var j={rect:L,delay:Math.round(N*1e3),dispose:n[l+24],blend:n[l+25]};a.frames.push(j)}else if(C=="fdAT"){for(var A=0;A<b-4;A++)u[w+A]=n[l+A+4];w+=b-4}else if(C=="pHYs")a.tabs[C]=[r.readUint(n,l),r.readUint(n,l+4),n[l+8]];else if(C=="cHRM"){a.tabs[C]=[];for(var A=0;A<8;A++)a.tabs[C].push(r.readUint(n,l+A*4))}else if(C=="tEXt"||C=="zTXt"){a.tabs[C]==null&&(a.tabs[C]={});var P=r.nextZero(n,l),S=r.readASCII(n,l,P-l),h,p=l+b-P-1;if(C=="tEXt")h=r.readASCII(n,P+1,p);else{var i=me.decode._inflate(n.slice(P+2,P+2+p));h=r.readUTF8(i,0,i.length)}a.tabs[C][S]=h}else if(C=="iTXt"){a.tabs[C]==null&&(a.tabs[C]={});var P=0,x=l;P=r.nextZero(n,x);var S=r.readASCII(n,x,P-x);x=P+1;var U=n[x];n[x+1],x+=2,P=r.nextZero(n,x),r.readASCII(n,x,P-x),x=P+1,P=r.nextZero(n,x),r.readUTF8(n,x,P-x),x=P+1;var h,p=b-(x-l);if(U==0)h=r.readUTF8(n,x,p);else{var i=me.decode._inflate(n.slice(x,x+p));h=r.readUTF8(i,0,i.length)}a.tabs[C][S]=h}else if(C=="PLTE")a.tabs[C]=r.readBytes(n,l,b);else if(C=="hIST"){var G=a.tabs.PLTE.length/3;a.tabs[C]=[];for(var A=0;A<G;A++)a.tabs[C].push(o(n,l+A*2))}else if(C=="tRNS")a.ctype==3?a.tabs[C]=r.readBytes(n,l,b):a.ctype==0?a.tabs[C]=o(n,l):a.ctype==2&&(a.tabs[C]=[o(n,l),o(n,l+2),o(n,l+4)]);else if(C=="gAMA")a.tabs[C]=r.readUint(n,l)/1e5;else if(C=="sRGB")a.tabs[C]=n[l];else if(C=="bKGD")a.ctype==0||a.ctype==4?a.tabs[C]=[o(n,l)]:a.ctype==2||a.ctype==6?a.tabs[C]=[o(n,l),o(n,l+2),o(n,l+4)]:a.ctype==3&&(a.tabs[C]=n[l]);else if(C=="IEND")break;l+=b,r.readUint(n,l),l+=4}if(w!=0){var R=a.frames[a.frames.length-1];R.data=me.decode._decompress(a,u.slice(0,w),R.rect.width,R.rect.height),w=0}return a.data=me.decode._decompress(a,f,a.width,a.height),delete a.compress,delete a.interlace,delete a.filter,a};me.decode._decompress=function(e,n,l,r){var o=me.decode._getBPP(e),s=Math.ceil(l*o/8),a=new Uint8Array((s+1+e.interlace)*r);return e.tabs.CgBI?n=me.inflateRaw(n,a):n=me.decode._inflate(n,a),e.interlace==0?n=me.decode._filterZero(n,e,0,l,r):e.interlace==1&&(n=me.decode._readInterlace(n,e)),n};me.decode._inflate=function(e,n){var l=me.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),n);return l};me.inflateRaw=function(){var e={};return e.H={},e.H.N=function(n,l){var r=Uint8Array,o=0,s=0,a=0,f=0,d=0,u=0,w=0,_=0,A=0,b,C;if(n[0]==3&&n[1]==0)return l||new r(0);var R=e.H,L=R.b,N=R.e,j=R.R,P=R.n,S=R.A,h=R.Z,p=R.m,i=l==null;for(i&&(l=new r(n.length>>>2<<5));o==0;){if(o=L(n,A,1),s=L(n,A+1,2),A+=3,s==0){A&7&&(A+=8-(A&7));var x=(A>>>3)+4,U=n[x-4]|n[x-3]<<8;i&&(l=e.H.W(l,_+U)),l.set(new r(n.buffer,n.byteOffset+x,U),_),A=x+U<<3,_+=U;continue}if(i&&(l=e.H.W(l,_+(1<<17))),s==1&&(b=p.J,C=p.h,u=511,w=31),s==2){a=N(n,A,5)+257,f=N(n,A+5,5)+1,d=N(n,A+10,4)+4,A+=14;for(var G=1,Z=0;Z<38;Z+=2)p.Q[Z]=0,p.Q[Z+1]=0;for(var Z=0;Z<d;Z++){var q=N(n,A+Z*3,3);p.Q[(p.X[Z]<<1)+1]=q,q>G&&(G=q)}A+=3*d,P(p.Q,G),S(p.Q,G,p.u),b=p.w,C=p.d,A=j(p.u,(1<<G)-1,a+f,n,A,p.v);var re=R.V(p.v,0,a,p.C);u=(1<<re)-1;var pe=R.V(p.v,a,f,p.D);w=(1<<pe)-1,P(p.C,re),S(p.C,re,b),P(p.D,pe),S(p.D,pe,C)}for(;;){var de=b[h(n,A)&u];A+=de&15;var ve=de>>>4;if(!(ve>>>8))l[_++]=ve;else{if(ve==256)break;var Ie=_+ve-254;if(ve>264){var De=p.q[ve-257];Ie=_+(De>>>3)+N(n,A,De&7),A+=De&7}var Ye=C[h(n,A)&w];A+=Ye&15;var Re=Ye>>>4,Ue=p.c[Re],Ge=(Ue>>>4)+L(n,A,Ue&15);for(A+=Ue&15;_<Ie;)l[_]=l[_++-Ge],l[_]=l[_++-Ge],l[_]=l[_++-Ge],l[_]=l[_++-Ge];_=Ie}}}return l.length==_?l:l.slice(0,_)},e.H.W=function(n,l){var r=n.length;if(l<=r)return n;var o=new Uint8Array(r<<1);return o.set(n,0),o},e.H.R=function(n,l,r,o,s,a){for(var f=e.H.e,d=e.H.Z,u=0;u<r;){var w=n[d(o,s)&l];s+=w&15;var _=w>>>4;if(_<=15)a[u]=_,u++;else{var A=0,b=0;_==16?(b=3+f(o,s,2),s+=2,A=a[u-1]):_==17?(b=3+f(o,s,3),s+=3):_==18&&(b=11+f(o,s,7),s+=7);for(var C=u+b;u<C;)a[u]=A,u++}}return s},e.H.V=function(n,l,r,o){for(var s=0,a=0,f=o.length>>>1;a<r;){var d=n[a+l];o[a<<1]=0,o[(a<<1)+1]=d,d>s&&(s=d),a++}for(;a<f;)o[a<<1]=0,o[(a<<1)+1]=0,a++;return s},e.H.n=function(n,l){for(var r=e.H.m,o=n.length,s,a,f,d,u,w=r.j,d=0;d<=l;d++)w[d]=0;for(d=1;d<o;d+=2)w[n[d]]++;var _=r.K;for(s=0,w[0]=0,a=1;a<=l;a++)s=s+w[a-1]<<1,_[a]=s;for(f=0;f<o;f+=2)u=n[f+1],u!=0&&(n[f]=_[u],_[u]++)},e.H.A=function(n,l,r){for(var o=n.length,s=e.H.m,a=s.r,f=0;f<o;f+=2)if(n[f+1]!=0)for(var d=f>>1,u=n[f+1],w=d<<4|u,_=l-u,A=n[f]<<_,b=A+(1<<_);A!=b;){var C=a[A]>>>15-l;r[C]=w,A++}},e.H.l=function(n,l){for(var r=e.H.m.r,o=15-l,s=0;s<n.length;s+=2){var a=n[s]<<l-n[s+1];n[s]=r[a]>>>o}},e.H.M=function(n,l,r){r=r<<(l&7);var o=l>>>3;n[o]|=r,n[o+1]|=r>>>8},e.H.I=function(n,l,r){r=r<<(l&7);var o=l>>>3;n[o]|=r,n[o+1]|=r>>>8,n[o+2]|=r>>>16},e.H.e=function(n,l,r){return(n[l>>>3]|n[(l>>>3)+1]<<8)>>>(l&7)&(1<<r)-1},e.H.b=function(n,l,r){return(n[l>>>3]|n[(l>>>3)+1]<<8|n[(l>>>3)+2]<<16)>>>(l&7)&(1<<r)-1},e.H.Z=function(n,l){return(n[l>>>3]|n[(l>>>3)+1]<<8|n[(l>>>3)+2]<<16)>>>(l&7)},e.H.i=function(n,l){return(n[l>>>3]|n[(l>>>3)+1]<<8|n[(l>>>3)+2]<<16|n[(l>>>3)+3]<<24)>>>(l&7)},e.H.m=function(){var n=Uint16Array,l=Uint32Array;return{K:new n(16),j:new n(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new n(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new l(32),J:new n(512),_:[],h:new n(32),$:[],w:new n(32768),C:[],v:[],d:new n(32768),D:[],u:new n(512),Q:[],r:new n(32768),s:new l(286),Y:new l(30),a:new l(19),t:new l(15e3),k:new n(65536),g:new n(32768)}}(),function(){for(var n=e.H.m,l=32768,r=0;r<l;r++){var o=r;o=(o&2863311530)>>>1|(o&1431655765)<<1,o=(o&3435973836)>>>2|(o&858993459)<<2,o=(o&4042322160)>>>4|(o&252645135)<<4,o=(o&4278255360)>>>8|(o&16711935)<<8,n.r[r]=(o>>>16|o<<16)>>>17}function s(a,f,d){for(;f--!=0;)a.push(0,d)}for(var r=0;r<32;r++)n.q[r]=n.S[r]<<3|n.T[r],n.c[r]=n.p[r]<<4|n.z[r];s(n._,144,8),s(n._,112,9),s(n._,24,7),s(n._,8,8),e.H.n(n._,9),e.H.A(n._,9,n.J),e.H.l(n._,9),s(n.$,32,5),e.H.n(n.$,5),e.H.A(n.$,5,n.h),e.H.l(n.$,5),s(n.Q,19,0),s(n.C,286,0),s(n.D,30,0),s(n.v,320,0)}(),e.H.N}();me.decode._readInterlace=function(e,n){for(var l=n.width,r=n.height,o=me.decode._getBPP(n),s=o>>3,a=Math.ceil(l*o/8),f=new Uint8Array(r*a),d=0,u=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],_=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1],b=0;b<7;){for(var C=_[b],R=A[b],L=0,N=0,j=u[b];j<r;)j+=C,N++;for(var P=w[b];P<l;)P+=R,L++;var S=Math.ceil(L*o/8);me.decode._filterZero(e,n,d,L,N);for(var h=0,p=u[b];p<r;){for(var i=w[b],x=d+h*S<<3;i<l;){if(o==1){var U=e[x>>3];U=U>>7-(x&7)&1,f[p*a+(i>>3)]|=U<<7-((i&7)<<0)}if(o==2){var U=e[x>>3];U=U>>6-(x&7)&3,f[p*a+(i>>2)]|=U<<6-((i&3)<<1)}if(o==4){var U=e[x>>3];U=U>>4-(x&7)&15,f[p*a+(i>>1)]|=U<<4-((i&1)<<2)}if(o>=8)for(var G=p*a+i*s,Z=0;Z<s;Z++)f[G+Z]=e[(x>>3)+Z];x+=o,i+=R}h++,p+=C}L*N!=0&&(d+=N*(1+S)),b=b+1}return f};me.decode._getBPP=function(e){var n=[1,null,3,1,2,null,4][e.ctype];return n*e.depth};me.decode._filterZero=function(e,n,l,r,o){var s=me.decode._getBPP(n),a=Math.ceil(r*s/8),f=me.decode._paeth;s=Math.ceil(s/8);var d=0,u=1,w=e[l],_=0;if(w>1&&(e[l]=[0,0,1][w-2]),w==3)for(_=s;_<a;_++)e[_+1]=e[_+1]+(e[_+1-s]>>>1)&255;for(var A=0;A<o;A++)if(d=l+A*a,u=d+A+1,w=e[u-1],_=0,w==0)for(;_<a;_++)e[d+_]=e[u+_];else if(w==1){for(;_<s;_++)e[d+_]=e[u+_];for(;_<a;_++)e[d+_]=e[u+_]+e[d+_-s]}else if(w==2)for(;_<a;_++)e[d+_]=e[u+_]+e[d+_-a];else if(w==3){for(;_<s;_++)e[d+_]=e[u+_]+(e[d+_-a]>>>1);for(;_<a;_++)e[d+_]=e[u+_]+(e[d+_-a]+e[d+_-s]>>>1)}else{for(;_<s;_++)e[d+_]=e[u+_]+f(0,e[d+_-a],0);for(;_<a;_++)e[d+_]=e[u+_]+f(e[d+_-s],e[d+_-a],e[d+_-s-a])}return e};me.decode._paeth=function(e,n,l){var r=e+n-l,o=r-e,s=r-n,a=r-l;return o*o<=s*s&&o*o<=a*a?e:s*s<=a*a?n:l};me.decode._IHDR=function(e,n,l){var r=me._bin;l.width=r.readUint(e,n),n+=4,l.height=r.readUint(e,n),n+=4,l.depth=e[n],n++,l.ctype=e[n],n++,l.compress=e[n],n++,l.filter=e[n],n++,l.interlace=e[n],n++};me._bin={nextZero:function(e,n){for(;e[n]!=0;)n++;return n},readUshort:function(e,n){return e[n]<<8|e[n+1]},writeUshort:function(e,n,l){e[n]=l>>8&255,e[n+1]=l&255},readUint:function(e,n){return e[n]*(256*256*256)+(e[n+1]<<16|e[n+2]<<8|e[n+3])},writeUint:function(e,n,l){e[n]=l>>24&255,e[n+1]=l>>16&255,e[n+2]=l>>8&255,e[n+3]=l&255},readASCII:function(e,n,l){for(var r="",o=0;o<l;o++)r+=String.fromCharCode(e[n+o]);return r},writeASCII:function(e,n,l){for(var r=0;r<l.length;r++)e[n+r]=l.charCodeAt(r)},readBytes:function(e,n,l){for(var r=[],o=0;o<l;o++)r.push(e[n+o]);return r},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,l){for(var r="",o,s=0;s<l;s++)r+="%"+me._bin.pad(e[n+s].toString(16));try{o=decodeURIComponent(r)}catch{return me._bin.readASCII(e,n,l)}return o}};me._copyTile=function(e,n,l,r,o,s,a,f,d){for(var u=Math.min(n,o),w=Math.min(l,s),_=0,A=0,b=0;b<w;b++)for(var C=0;C<u;C++)if(a>=0&&f>=0?(_=b*n+C<<2,A=(f+b)*o+a+C<<2):(_=(-f+b)*n-a+C<<2,A=b*o+C<<2),d==0)r[A]=e[_],r[A+1]=e[_+1],r[A+2]=e[_+2],r[A+3]=e[_+3];else if(d==1){var R=e[_+3]*.00392156862745098,L=e[_]*R,N=e[_+1]*R,j=e[_+2]*R,P=r[A+3]*(1/255),S=r[A]*P,h=r[A+1]*P,p=r[A+2]*P,i=1-R,x=R+P*i,U=x==0?0:1/x;r[A+3]=255*x,r[A+0]=(L+S*i)*U,r[A+1]=(N+h*i)*U,r[A+2]=(j+p*i)*U}else if(d==2){var R=e[_+3],L=e[_],N=e[_+1],j=e[_+2],P=r[A+3],S=r[A],h=r[A+1],p=r[A+2];R==P&&L==S&&N==h&&j==p?(r[A]=0,r[A+1]=0,r[A+2]=0,r[A+3]=0):(r[A]=L,r[A+1]=N,r[A+2]=j,r[A+3]=R)}else if(d==3){var R=e[_+3],L=e[_],N=e[_+1],j=e[_+2],P=r[A+3],S=r[A],h=r[A+1],p=r[A+2];if(R==P&&L==S&&N==h&&j==p)continue;if(R<220&&P>20)return!1}return!0};me.encode=function(e,n,l,r,o,s,a){r==null&&(r=0),a==null&&(a=!1);var f=me.encode.compress(e,n,l,r,[!1,!1,!1,0,a]);return me.encode.compressPNG(f,-1),me.encode._main(f,n,l,o,s)};me.encodeLL=function(e,n,l,r,o,s,a,f){for(var d={ctype:0+(r==1?0:2)+(o==0?0:4),depth:s,frames:[]},u=(r+o)*s,w=u*n,_=0;_<e.length;_++)d.frames.push({rect:{x:0,y:0,width:n,height:l},img:new Uint8Array(e[_]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(w/8)});me.encode.compressPNG(d,0,!0);var A=me.encode._main(d,n,l,a,f);return A};me.encode._main=function(e,n,l,r,o){o==null&&(o={});var s=me.crc.crc,a=me._bin.writeUint,f=me._bin.writeUshort,d=me._bin.writeASCII,u=8,w=e.frames.length>1,_=!1,A=33+(w?20:0);if(o.sRGB!=null&&(A+=13),o.pHYs!=null&&(A+=21),e.ctype==3){for(var b=e.plte.length,C=0;C<b;C++)e.plte[C]>>>24!=255&&(_=!0);A+=8+b*3+4+(_?8+b*1+4:0)}for(var R=0;R<e.frames.length;R++){var L=e.frames[R];w&&(A+=38),A+=L.cimg.length+12,R!=0&&(A+=4)}A+=12;for(var N=new Uint8Array(A),j=[137,80,78,71,13,10,26,10],C=0;C<8;C++)N[C]=j[C];if(a(N,u,13),u+=4,d(N,u,"IHDR"),u+=4,a(N,u,n),u+=4,a(N,u,l),u+=4,N[u]=e.depth,u++,N[u]=e.ctype,u++,N[u]=0,u++,N[u]=0,u++,N[u]=0,u++,a(N,u,s(N,u-17,17)),u+=4,o.sRGB!=null&&(a(N,u,1),u+=4,d(N,u,"sRGB"),u+=4,N[u]=o.sRGB,u++,a(N,u,s(N,u-5,5)),u+=4),o.pHYs!=null&&(a(N,u,9),u+=4,d(N,u,"pHYs"),u+=4,a(N,u,o.pHYs[0]),u+=4,a(N,u,o.pHYs[1]),u+=4,N[u]=o.pHYs[2],u++,a(N,u,s(N,u-13,13)),u+=4),w&&(a(N,u,8),u+=4,d(N,u,"acTL"),u+=4,a(N,u,e.frames.length),u+=4,a(N,u,o.loop!=null?o.loop:0),u+=4,a(N,u,s(N,u-12,12)),u+=4),e.ctype==3){var b=e.plte.length;a(N,u,b*3),u+=4,d(N,u,"PLTE"),u+=4;for(var C=0;C<b;C++){var P=C*3,S=e.plte[C],h=S&255,p=S>>>8&255,i=S>>>16&255;N[u+P+0]=h,N[u+P+1]=p,N[u+P+2]=i}if(u+=b*3,a(N,u,s(N,u-b*3-4,b*3+4)),u+=4,_){a(N,u,b),u+=4,d(N,u,"tRNS"),u+=4;for(var C=0;C<b;C++)N[u+C]=e.plte[C]>>>24&255;u+=b,a(N,u,s(N,u-b-4,b+4)),u+=4}}for(var x=0,R=0;R<e.frames.length;R++){var L=e.frames[R];w&&(a(N,u,26),u+=4,d(N,u,"fcTL"),u+=4,a(N,u,x++),u+=4,a(N,u,L.rect.width),u+=4,a(N,u,L.rect.height),u+=4,a(N,u,L.rect.x),u+=4,a(N,u,L.rect.y),u+=4,f(N,u,r[R]),u+=2,f(N,u,1e3),u+=2,N[u]=L.dispose,u++,N[u]=L.blend,u++,a(N,u,s(N,u-30,30)),u+=4);var U=L.cimg,b=U.length;a(N,u,b+(R==0?0:4)),u+=4;var G=u;d(N,u,R==0?"IDAT":"fdAT"),u+=4,R!=0&&(a(N,u,x++),u+=4),N.set(U,u),u+=b,a(N,u,s(N,G,u-G)),u+=4}return a(N,u,0),u+=4,d(N,u,"IEND"),u+=4,a(N,u,s(N,u-4,4)),u+=4,N.buffer};me.encode.compressPNG=function(e,n,l){for(var r=0;r<e.frames.length;r++){var o=e.frames[r];o.rect.width;var s=o.rect.height,a=new Uint8Array(s*o.bpl+s);o.cimg=me.encode._filterZero(o.img,s,o.bpp,o.bpl,a,n,l)}};me.encode.compress=function(e,n,l,r,o){for(var s=o[0],a=o[1],f=o[2],d=o[3],u=o[4],w=6,_=8,A=255,b=0;b<e.length;b++)for(var C=new Uint8Array(e[b]),R=C.length,L=0;L<R;L+=4)A&=C[L+3];var N=A!=255,j=me.encode.framize(e,n,l,s,a,f),P={},S=[],h=[];if(r!=0){for(var p=[],L=0;L<j.length;L++)p.push(j[L].img.buffer);var i=me.encode.concatRGBA(p),x=me.quantize(i,r);console.log(x);for(var U=0,G=new Uint8Array(x.abuf),L=0;L<j.length;L++){var Z=j[L].img,q=Z.length;h.push(new Uint8Array(x.inds.buffer,U>>2,q>>2));for(var b=0;b<q;b+=4)Z[b]=G[U+b],Z[b+1]=G[U+b+1],Z[b+2]=G[U+b+2],Z[b+3]=G[U+b+3];U+=q}for(var L=0;L<x.plte.length;L++)S.push(x.plte[L].est.rgba)}else for(var b=0;b<j.length;b++){var re=j[b],pe=new Uint32Array(re.img.buffer),de=re.rect.width,R=pe.length,ve=new Uint8Array(R);h.push(ve);for(var L=0;L<R;L++){var Ie=pe[L];if(L!=0&&Ie==pe[L-1])ve[L]=ve[L-1];else if(L>de&&Ie==pe[L-de])ve[L]=ve[L-de];else{var De=P[Ie];if(De==null&&(P[Ie]=De=S.length,S.push(Ie),S.length>=300))break;ve[L]=De}}}var Ye=S.length;Ye<=256&&u==!1&&(Ye<=2?_=1:Ye<=4?_=2:Ye<=16?_=4:_=8,_=Math.max(_,d));for(var b=0;b<j.length;b++){var re=j[b];re.rect.x,re.rect.y;var de=re.rect.width,Re=re.rect.height,Ue=re.img;new Uint32Array(Ue.buffer);var Ge=4*de,Me=4;if(Ye<=256&&u==!1){Ge=Math.ceil(_*de/8);for(var Ne=new Uint8Array(Ge*Re),rt=h[b],pt=0;pt<Re;pt++){var L=pt*Ge,ut=pt*de;if(_==8)for(var je=0;je<de;je++)Ne[L+je]=rt[ut+je];else if(_==4)for(var je=0;je<de;je++)Ne[L+(je>>1)]|=rt[ut+je]<<4-(je&1)*4;else if(_==2)for(var je=0;je<de;je++)Ne[L+(je>>2)]|=rt[ut+je]<<6-(je&3)*2;else if(_==1)for(var je=0;je<de;je++)Ne[L+(je>>3)]|=rt[ut+je]<<7-(je&7)*1}Ue=Ne,w=3,Me=1}else if(N==!1&&j.length==1){for(var Ne=new Uint8Array(de*Re*3),yt=de*Re,L=0;L<yt;L++){var Z=L*3,F=L*4;Ne[Z]=Ue[F],Ne[Z+1]=Ue[F+1],Ne[Z+2]=Ue[F+2]}Ue=Ne,w=2,Me=3,Ge=3*de}re.img=Ue,re.bpl=Ge,re.bpp=Me}return{ctype:w,depth:_,plte:S,frames:j}};me.encode.framize=function(e,n,l,r,o,s){for(var a=[],f=0;f<e.length;f++){var d=new Uint8Array(e[f]),u=new Uint32Array(d.buffer),w,_=0,A=0,b=n,C=l,R=r?1:0;if(f!=0){for(var L=s||r||f==1||a[f-2].dispose!=0?1:2,N=0,j=1e9,P=0;P<L;P++){for(var re=new Uint8Array(e[f-1-P]),S=new Uint32Array(e[f-1-P]),h=n,p=l,i=-1,x=-1,U=0;U<l;U++)for(var G=0;G<n;G++){var Z=U*n+G;u[Z]!=S[Z]&&(G<h&&(h=G),G>i&&(i=G),U<p&&(p=U),U>x&&(x=U))}i==-1&&(h=p=i=x=0),o&&((h&1)==1&&h--,(p&1)==1&&p--);var q=(i-h+1)*(x-p+1);q<j&&(j=q,N=P,_=h,A=p,b=i-h+1,C=x-p+1)}var re=new Uint8Array(e[f-1-N]);N==1&&(a[f-1].dispose=2),w=new Uint8Array(b*C*4),me._copyTile(re,n,l,w,b,C,-_,-A,0),R=me._copyTile(d,n,l,w,b,C,-_,-A,3)?1:0,R==1?me.encode._prepareDiff(d,n,l,w,{x:_,y:A,width:b,height:C}):me._copyTile(d,n,l,w,b,C,-_,-A,0)}else w=d.slice(0);a.push({rect:{x:_,y:A,width:b,height:C},img:w,blend:R,dispose:0})}if(r)for(var f=0;f<a.length;f++){var pe=a[f];if(pe.blend!=1){var de=pe.rect,ve=a[f-1].rect,Ie=Math.min(de.x,ve.x),De=Math.min(de.y,ve.y),Ye=Math.max(de.x+de.width,ve.x+ve.width),Re=Math.max(de.y+de.height,ve.y+ve.height),Ue={x:Ie,y:De,width:Ye-Ie,height:Re-De};a[f-1].dispose=1,f-1!=0&&me.encode._updateFrame(e,n,l,a,f-1,Ue,o),me.encode._updateFrame(e,n,l,a,f,Ue,o)}}var Ge=0;if(e.length!=1)for(var Z=0;Z<a.length;Z++){var pe=a[Z];Ge+=pe.rect.width*pe.rect.height}return a};me.encode._updateFrame=function(e,n,l,r,o,s,a){for(var f=Uint8Array,d=Uint32Array,u=new f(e[o-1]),w=new d(e[o-1]),_=o+1<e.length?new f(e[o+1]):null,A=new f(e[o]),b=new d(A.buffer),C=n,R=l,L=-1,N=-1,j=0;j<s.height;j++)for(var P=0;P<s.width;P++){var S=s.x+P,h=s.y+j,p=h*n+S,i=b[p];i==0||r[o-1].dispose==0&&w[p]==i&&(_==null||_[p*4+3]!=0)||(S<C&&(C=S),S>L&&(L=S),h<R&&(R=h),h>N&&(N=h))}L==-1&&(C=R=L=N=0),a&&((C&1)==1&&C--,(R&1)==1&&R--),s={x:C,y:R,width:L-C+1,height:N-R+1};var x=r[o];x.rect=s,x.blend=1,x.img=new Uint8Array(s.width*s.height*4),r[o-1].dispose==0?(me._copyTile(u,n,l,x.img,s.width,s.height,-s.x,-s.y,0),me.encode._prepareDiff(A,n,l,x.img,s)):me._copyTile(A,n,l,x.img,s.width,s.height,-s.x,-s.y,0)};me.encode._prepareDiff=function(e,n,l,r,o){me._copyTile(e,n,l,r,o.width,o.height,-o.x,-o.y,2)};me.encode._filterZero=function(e,n,l,r,o,s,a){var f=[],d=[0,1,2,3,4];s!=-1?d=[s]:(n*r>5e5||l==1)&&(d=[0]);var u;a&&(u={level:0});for(var w=o.length>1e7&&typeof UZIP<"u"&&UZIP!=null?UZIP:pako,_=0;_<d.length;_++){for(var A=0;A<n;A++)me.encode._filterLine(o,e,A,r,l,d[_]);f.push(w.deflate(o,u))}for(var b,C=1e9,_=0;_<f.length;_++)f[_].length<C&&(b=_,C=f[_].length);return f[b]};me.encode._filterLine=function(e,n,l,r,o,s){var a=l*r,f=a+l,d=me.decode._paeth;if(e[f]=s,f++,s==0)if(r<500)for(var u=0;u<r;u++)e[f+u]=n[a+u];else e.set(new Uint8Array(n.buffer,a,r),f);else if(s==1){for(var u=0;u<o;u++)e[f+u]=n[a+u];for(var u=o;u<r;u++)e[f+u]=n[a+u]-n[a+u-o]+256&255}else if(l==0){for(var u=0;u<o;u++)e[f+u]=n[a+u];if(s==2)for(var u=o;u<r;u++)e[f+u]=n[a+u];if(s==3)for(var u=o;u<r;u++)e[f+u]=n[a+u]-(n[a+u-o]>>1)+256&255;if(s==4)for(var u=o;u<r;u++)e[f+u]=n[a+u]-d(n[a+u-o],0,0)+256&255}else{if(s==2)for(var u=0;u<r;u++)e[f+u]=n[a+u]+256-n[a+u-r]&255;if(s==3){for(var u=0;u<o;u++)e[f+u]=n[a+u]+256-(n[a+u-r]>>1)&255;for(var u=o;u<r;u++)e[f+u]=n[a+u]+256-(n[a+u-r]+n[a+u-o]>>1)&255}if(s==4){for(var u=0;u<o;u++)e[f+u]=n[a+u]+256-d(0,n[a+u-r],0)&255;for(var u=o;u<r;u++)e[f+u]=n[a+u]+256-d(n[a+u-o],n[a+u-r],n[a+u-o-r])&255}}};me.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var l=n,r=0;r<8;r++)l&1?l=3988292384^l>>>1:l=l>>>1;e[n]=l}return e}(),update:function(e,n,l,r){for(var o=0;o<r;o++)e=me.crc.table[(e^n[l+o])&255]^e>>>8;return e},crc:function(e,n,l){return me.crc.update(4294967295,e,n,l)^4294967295}};me.quantize=function(e,n){var l=new Uint8Array(e),r=l.slice(0),o=new Uint32Array(r.buffer),s=me.quantize.getKDtree(r,n),a=s[0],f=s[1],d=me.quantize.planeDst,u=l,w=o,_=u.length,A=new Uint8Array(l.length>>2),b;if(l.length<2e7)for(var C=0;C<_;C+=4){var R=u[C]*.00392156862745098,L=u[C+1]*(1/255),N=u[C+2]*(1/255),j=u[C+3]*(1/255);b=me.quantize.getNearest(a,R,L,N,j),A[C>>2]=b.ind,w[C>>2]=b.est.rgba}else for(var C=0;C<_;C+=4){var R=u[C]*.00392156862745098,L=u[C+1]*(1/255),N=u[C+2]*(1/255),j=u[C+3]*(1/255);for(b=a;b.left;)b=d(b.est,R,L,N,j)<=0?b.left:b.right;A[C>>2]=b.ind,w[C>>2]=b.est.rgba}return{abuf:r.buffer,inds:A,plte:f}};me.quantize.getKDtree=function(e,n,l){l==null&&(l=1e-4);var r=new Uint32Array(e.buffer),o={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};o.bst=me.quantize.stats(e,o.i0,o.i1),o.est=me.quantize.estats(o.bst);for(var s=[o];s.length<n;){for(var a=0,f=0,d=0;d<s.length;d++)s[d].est.L>a&&(a=s[d].est.L,f=d);if(a<l)break;var u=s[f],w=me.quantize.splitPixels(e,r,u.i0,u.i1,u.est.e,u.est.eMq255),_=u.i0>=w||u.i1<=w;if(_){u.est.L=0;continue}var A={i0:u.i0,i1:w,bst:null,est:null,tdst:0,left:null,right:null};A.bst=me.quantize.stats(e,A.i0,A.i1),A.est=me.quantize.estats(A.bst);var b={i0:w,i1:u.i1,bst:null,est:null,tdst:0,left:null,right:null};b.bst={R:[],m:[],N:u.bst.N-A.bst.N};for(var d=0;d<16;d++)b.bst.R[d]=u.bst.R[d]-A.bst.R[d];for(var d=0;d<4;d++)b.bst.m[d]=u.bst.m[d]-A.bst.m[d];b.est=me.quantize.estats(b.bst),u.left=A,u.right=b,s[f]=A,s.push(b)}s.sort(function(C,R){return R.bst.N-C.bst.N});for(var d=0;d<s.length;d++)s[d].ind=d;return[o,s]};me.quantize.getNearest=function(e,n,l,r,o){if(e.left==null)return e.tdst=me.quantize.dist(e.est.q,n,l,r,o),e;var s=me.quantize.planeDst(e.est,n,l,r,o),a=e.left,f=e.right;s>0&&(a=e.right,f=e.left);var d=me.quantize.getNearest(a,n,l,r,o);if(d.tdst<=s*s)return d;var u=me.quantize.getNearest(f,n,l,r,o);return u.tdst<d.tdst?u:d};me.quantize.planeDst=function(e,n,l,r,o){var s=e.e;return s[0]*n+s[1]*l+s[2]*r+s[3]*o-e.eMq};me.quantize.dist=function(e,n,l,r,o){var s=n-e[0],a=l-e[1],f=r-e[2],d=o-e[3];return s*s+a*a+f*f+d*d};me.quantize.splitPixels=function(e,n,l,r,o,s){var a=me.quantize.vecDot;for(r-=4;l<r;){for(;a(e,l,o)<=s;)l+=4;for(;a(e,r,o)>s;)r-=4;if(l>=r)break;var f=n[l>>2];n[l>>2]=n[r>>2],n[r>>2]=f,l+=4,r-=4}for(;a(e,l,o)>s;)l-=4;return l+4};me.quantize.vecDot=function(e,n,l){return e[n]*l[0]+e[n+1]*l[1]+e[n+2]*l[2]+e[n+3]*l[3]};me.quantize.stats=function(e,n,l){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[0,0,0,0],s=l-n>>2,a=n;a<l;a+=4){var f=e[a]*.00392156862745098,d=e[a+1]*(1/255),u=e[a+2]*(1/255),w=e[a+3]*(1/255);o[0]+=f,o[1]+=d,o[2]+=u,o[3]+=w,r[0]+=f*f,r[1]+=f*d,r[2]+=f*u,r[3]+=f*w,r[5]+=d*d,r[6]+=d*u,r[7]+=d*w,r[10]+=u*u,r[11]+=u*w,r[15]+=w*w}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:o,N:s}};me.quantize.estats=function(e){var n=e.R,l=e.m,r=e.N,o=l[0],s=l[1],a=l[2],f=l[3],d=r==0?0:1/r,u=[n[0]-o*o*d,n[1]-o*s*d,n[2]-o*a*d,n[3]-o*f*d,n[4]-s*o*d,n[5]-s*s*d,n[6]-s*a*d,n[7]-s*f*d,n[8]-a*o*d,n[9]-a*s*d,n[10]-a*a*d,n[11]-a*f*d,n[12]-f*o*d,n[13]-f*s*d,n[14]-f*a*d,n[15]-f*f*d],w=u,_=me.M4,A=[Math.random(),Math.random(),Math.random(),Math.random()],b=0,C=0;if(r!=0)for(var R=0;R<16&&(A=_.multVec(w,A),C=Math.sqrt(_.dot(A,A)),A=_.sml(1/C,A),!(R!=0&&Math.abs(C-b)<1e-9));R++)b=C;var L=[o*d,s*d,a*d,f*d],N=_.dot(_.sml(255,L),A);return{Cov:u,q:L,e:A,L:b,eMq255:N,eMq:_.dot(A,L),rgba:(Math.round(255*L[3])<<24|Math.round(255*L[2])<<16|Math.round(255*L[1])<<8|Math.round(255*L[0])<<0)>>>0}};me.M4={multVec:function(e,n){return[e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3],e[4]*n[0]+e[5]*n[1]+e[6]*n[2]+e[7]*n[3],e[8]*n[0]+e[9]*n[1]+e[10]*n[2]+e[11]*n[3],e[12]*n[0]+e[13]*n[1]+e[14]*n[2]+e[15]*n[3]]},dot:function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]},sml:function(e,n){return[e*n[0],e*n[1],e*n[2],e*n[3]]}};me.encode.concatRGBA=function(e){for(var n=0,l=0;l<e.length;l++)n+=e[l].byteLength;for(var r=new Uint8Array(n),o=0,l=0;l<e.length;l++){for(var s=new Uint8Array(e[l]),a=s.length,f=0;f<a;f+=4){var d=s[f],u=s[f+1],w=s[f+2],_=s[f+3];_==0&&(d=u=w=0),r[o+f]=d,r[o+f+1]=u,r[o+f+2]=w,r[o+f+3]=_}o+=a}return r.buffer};let qr;/**
 * Modules in this bundle
 * @license
 *
 * anypalette:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Isaiah Odhner <isaiahodhner@gmail.com>
 *   homepage: https://1j01.github.io/anypalette.js/
 *   version: 0.6.0
 *
 * base64-js:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: T. Jameson Little <t.jameson.little@gmail.com>
 *   homepage: https://github.com/beatgammit/base64-js
 *   version: 1.5.1
 *
 * browser-resolve:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Shtylman <shtylman@gmail.com>
 *   homepage: https://github.com/browserify/browser-resolve#readme
 *   version: 2.0.0
 *
 * buffer:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Feross Aboukhadijeh <feross@feross.org>
 *   contributors: Romain Beauxis <toots@rastageeks.org>, James Halliday <mail@substack.net>
 *   homepage: https://github.com/feross/buffer
 *   version: 5.2.1
 *
 * css.escape:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Mathias Bynens
 *   homepage: https://mths.be/cssescape
 *   version: 1.5.1
 *
 * events:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Irakli Gozalishvili <rfobic@gmail.com>
 *   homepage: https://github.com/Gozala/events#readme
 *   version: 3.2.0
 *
 * ieee754:
 *   license: BSD-3-Clause (http://opensource.org/licenses/BSD-3-Clause)
 *   author: Feross Aboukhadijeh <feross@feross.org>
 *   contributors: Romain Beauxis <toots@rastageeks.org>
 *   homepage: https://github.com/feross/ieee754#readme
 *   version: 1.2.1
 *
 * inherits:
 *   license: ISC (http://opensource.org/licenses/ISC)
 *   homepage: https://github.com/isaacs/inherits#readme
 *   version: 2.0.4
 *
 * jdataview:
 *   licenses: WTFPL (http://www.wtfpl.net/about/)
 *   author: Vjeux <vjeuxx@gmail.com>
 *   contributors: Vjeux <vjeuxx@gmail.com>, RReverser <me@rreverser.com>
 *   homepage: http://jDataView.github.io/
 *   version: 2.5.0
 *
 * process:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Shtylman <shtylman@gmail.com>
 *   homepage: https://github.com/shtylman/node-process#readme
 *   version: 0.11.10
 *
 * readable-stream:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   homepage: https://github.com/nodejs/readable-stream#readme
 *   version: 3.6.0
 *
 * safe-buffer:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Feross Aboukhadijeh <feross@feross.org>
 *   homepage: https://github.com/feross/safe-buffer
 *   version: 5.1.2
 *
 * sax:
 *   license: ISC (http://opensource.org/licenses/ISC)
 *   author: Isaac Z. Schlueter <i@izs.me>
 *   homepage: https://github.com/isaacs/sax-js#readme
 *   version: 1.2.4
 *
 * stream-browserify:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: James Halliday <mail@substack.net>
 *   homepage: https://github.com/browserify/stream-browserify
 *   version: 3.0.0
 *
 * string_decoder:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   homepage: https://github.com/nodejs/string_decoder
 *   version: 1.1.1
 *
 * util-deprecate:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Nathan Rajlich <nathan@tootallnate.net>
 *   homepage: https://github.com/TooTallNate/util-deprecate
 *   version: 1.0.2
 *
 * xml-js:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Yousuf Almarzooqi <ysf953@gmail.com>
 *   homepage: https://github.com/nashwaan/xml-js#readme
 *   version: 1.6.11
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */(function(e){if(typeof exports=="object"&&typeof module<"u")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var n;typeof window<"u"?n=window:typeof global<"u"?n=global:typeof self<"u"?n=self:n=this,n.AnyPalette=e()}})(function(){return function(){function e(n,l,r){function o(f,d){if(!l[f]){if(!n[f]){var u=typeof require=="function"&&require;if(!d&&u)return u(f,!0);if(s)return s(f,!0);var w=new Error("Cannot find module '"+f+"'");throw w.code="MODULE_NOT_FOUND",w}var _=l[f]={exports:{}};n[f][0].call(_.exports,function(A){var b=n[f][1][A];return o(b||A)},_,_.exports,e,n,l,r)}return l[f].exports}for(var s=typeof require=="function"&&require,a=0;a<r.length;a++)o(r[a]);return o}return e}()({1:[function(e,n,l){l.byteLength=w,l.toByteArray=A,l.fromByteArray=R;for(var r=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,d=a.length;f<d;++f)r[f]=a[f],o[a.charCodeAt(f)]=f;o[45]=62,o[95]=63;function u(L){var N=L.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=L.indexOf("=");j===-1&&(j=N);var P=j===N?0:4-j%4;return[j,P]}function w(L){var N=u(L),j=N[0],P=N[1];return(j+P)*3/4-P}function _(L,N,j){return(N+j)*3/4-j}function A(L){var N,j=u(L),P=j[0],S=j[1],h=new s(_(L,P,S)),p=0,i=S>0?P-4:P,x;for(x=0;x<i;x+=4)N=o[L.charCodeAt(x)]<<18|o[L.charCodeAt(x+1)]<<12|o[L.charCodeAt(x+2)]<<6|o[L.charCodeAt(x+3)],h[p++]=N>>16&255,h[p++]=N>>8&255,h[p++]=N&255;return S===2&&(N=o[L.charCodeAt(x)]<<2|o[L.charCodeAt(x+1)]>>4,h[p++]=N&255),S===1&&(N=o[L.charCodeAt(x)]<<10|o[L.charCodeAt(x+1)]<<4|o[L.charCodeAt(x+2)]>>2,h[p++]=N>>8&255,h[p++]=N&255),h}function b(L){return r[L>>18&63]+r[L>>12&63]+r[L>>6&63]+r[L&63]}function C(L,N,j){for(var P,S=[],h=N;h<j;h+=3)P=(L[h]<<16&16711680)+(L[h+1]<<8&65280)+(L[h+2]&255),S.push(b(P));return S.join("")}function R(L){for(var N,j=L.length,P=j%3,S=[],h=16383,p=0,i=j-P;p<i;p+=h)S.push(C(L,p,p+h>i?i:p+h));return P===1?(N=L[j-1],S.push(r[N>>2]+r[N<<4&63]+"==")):P===2&&(N=(L[j-2]<<8)+L[j-1],S.push(r[N>>10]+r[N>>4&63]+r[N<<2&63]+"=")),S.join("")}},{}],2:[function(e,n,l){},{}],3:[function(e,n,l){(function(r){(function(){var o=e("base64-js"),s=e("ieee754");l.Buffer=u,l.SlowBuffer=P,l.INSPECT_MAX_BYTES=50;var a=2147483647;l.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=f(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{var M=new Uint8Array(1);return M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},M.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function d(M){if(M>a)throw new RangeError('The value "'+M+'" is invalid for option "size"');var v=new Uint8Array(M);return v.__proto__=u.prototype,v}function u(M,v,E){if(typeof M=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(M)}return w(M,v,E)}typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function w(M,v,E){if(typeof M=="string")return C(M,v);if(ArrayBuffer.isView(M))return R(M);if(M==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(z(M,ArrayBuffer)||M&&z(M.buffer,ArrayBuffer))return L(M,v,E);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var H=M.valueOf&&M.valueOf();if(H!=null&&H!==M)return u.from(H,v,E);var ne=N(M);if(ne)return ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return u.from(M[Symbol.toPrimitive]("string"),v,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}u.from=function(M,v,E){return w(M,v,E)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function _(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function A(M,v,E){return _(M),M<=0?d(M):v!==void 0?typeof E=="string"?d(M).fill(v,E):d(M).fill(v):d(M)}u.alloc=function(M,v,E){return A(M,v,E)};function b(M){return _(M),d(M<0?0:j(M)|0)}u.allocUnsafe=function(M){return b(M)},u.allocUnsafeSlow=function(M){return b(M)};function C(M,v){if((typeof v!="string"||v==="")&&(v="utf8"),!u.isEncoding(v))throw new TypeError("Unknown encoding: "+v);var E=S(M,v)|0,H=d(E),ne=H.write(M,v);return ne!==E&&(H=H.slice(0,ne)),H}function R(M){for(var v=M.length<0?0:j(M.length)|0,E=d(v),H=0;H<v;H+=1)E[H]=M[H]&255;return E}function L(M,v,E){if(v<0||M.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<v+(E||0))throw new RangeError('"length" is outside of buffer bounds');var H;return v===void 0&&E===void 0?H=new Uint8Array(M):E===void 0?H=new Uint8Array(M,v):H=new Uint8Array(M,v,E),H.__proto__=u.prototype,H}function N(M){if(u.isBuffer(M)){var v=j(M.length)|0,E=d(v);return E.length===0||M.copy(E,0,0,v),E}if(M.length!==void 0)return typeof M.length!="number"||K(M.length)?d(0):R(M);if(M.type==="Buffer"&&Array.isArray(M.data))return R(M.data)}function j(M){if(M>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return M|0}function P(M){return+M!=M&&(M=0),u.alloc(+M)}u.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==u.prototype},u.compare=function(v,E){if(z(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),z(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(v)||!u.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===E)return 0;for(var H=v.length,ne=E.length,he=0,we=Math.min(H,ne);he<we;++he)if(v[he]!==E[he]){H=v[he],ne=E[he];break}return H<ne?-1:ne<H?1:0},u.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(v,E){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return u.alloc(0);var H;if(E===void 0)for(E=0,H=0;H<v.length;++H)E+=v[H].length;var ne=u.allocUnsafe(E),he=0;for(H=0;H<v.length;++H){var we=v[H];if(z(we,Uint8Array)&&(we=u.from(we)),!u.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(ne,he),he+=we.length}return ne};function S(M,v){if(u.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||z(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var E=M.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&E===0)return 0;for(var ne=!1;;)switch(v){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return T(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return ye(M).length;default:if(ne)return H?-1:T(M).length;v=(""+v).toLowerCase(),ne=!0}}u.byteLength=S;function h(M,v,E){var H=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,v>>>=0,E<=v))return"";for(M||(M="utf8");;)switch(M){case"hex":return Ue(this,v,E);case"utf8":case"utf-8":return ve(this,v,E);case"ascii":return Ye(this,v,E);case"latin1":case"binary":return Re(this,v,E);case"base64":return de(this,v,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ge(this,v,E);default:if(H)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),H=!0}}u.prototype._isBuffer=!0;function p(M,v,E){var H=M[v];M[v]=M[E],M[E]=H}u.prototype.swap16=function(){var v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var E=0;E<v;E+=2)p(this,E,E+1);return this},u.prototype.swap32=function(){var v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var E=0;E<v;E+=4)p(this,E,E+3),p(this,E+1,E+2);return this},u.prototype.swap64=function(){var v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var E=0;E<v;E+=8)p(this,E,E+7),p(this,E+1,E+6),p(this,E+2,E+5),p(this,E+3,E+4);return this},u.prototype.toString=function(){var v=this.length;return v===0?"":arguments.length===0?ve(this,0,v):h.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(v){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:u.compare(this,v)===0},u.prototype.inspect=function(){var v="",E=l.INSPECT_MAX_BYTES;return v=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(v+=" ... "),"<Buffer "+v+">"},u.prototype.compare=function(v,E,H,ne,he){if(z(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(E===void 0&&(E=0),H===void 0&&(H=v?v.length:0),ne===void 0&&(ne=0),he===void 0&&(he=this.length),E<0||H>v.length||ne<0||he>this.length)throw new RangeError("out of range index");if(ne>=he&&E>=H)return 0;if(ne>=he)return-1;if(E>=H)return 1;if(E>>>=0,H>>>=0,ne>>>=0,he>>>=0,this===v)return 0;for(var we=he-ne,_e=H-E,Pe=Math.min(we,_e),it=this.slice(ne,he),ft=v.slice(E,H),at=0;at<Pe;++at)if(it[at]!==ft[at]){we=it[at],_e=ft[at];break}return we<_e?-1:_e<we?1:0};function i(M,v,E,H,ne){if(M.length===0)return-1;if(typeof E=="string"?(H=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,K(E)&&(E=ne?0:M.length-1),E<0&&(E=M.length+E),E>=M.length){if(ne)return-1;E=M.length-1}else if(E<0)if(ne)E=0;else return-1;if(typeof v=="string"&&(v=u.from(v,H)),u.isBuffer(v))return v.length===0?-1:x(M,v,E,H,ne);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(M,v,E):Uint8Array.prototype.lastIndexOf.call(M,v,E):x(M,[v],E,H,ne);throw new TypeError("val must be string, number or Buffer")}function x(M,v,E,H,ne){var he=1,we=M.length,_e=v.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(M.length<2||v.length<2)return-1;he=2,we/=2,_e/=2,E/=2}function Pe(st,dt){return he===1?st[dt]:st.readUInt16BE(dt*he)}var it;if(ne){var ft=-1;for(it=E;it<we;it++)if(Pe(M,it)===Pe(v,ft===-1?0:it-ft)){if(ft===-1&&(ft=it),it-ft+1===_e)return ft*he}else ft!==-1&&(it-=it-ft),ft=-1}else for(E+_e>we&&(E=we-_e),it=E;it>=0;it--){for(var at=!0,It=0;It<_e;It++)if(Pe(M,it+It)!==Pe(v,It)){at=!1;break}if(at)return it}return-1}u.prototype.includes=function(v,E,H){return this.indexOf(v,E,H)!==-1},u.prototype.indexOf=function(v,E,H){return i(this,v,E,H,!0)},u.prototype.lastIndexOf=function(v,E,H){return i(this,v,E,H,!1)};function U(M,v,E,H){E=Number(E)||0;var ne=M.length-E;H?(H=Number(H),H>ne&&(H=ne)):H=ne;var he=v.length;H>he/2&&(H=he/2);for(var we=0;we<H;++we){var _e=parseInt(v.substr(we*2,2),16);if(K(_e))return we;M[E+we]=_e}return we}function G(M,v,E,H){return Se(T(v,M.length-E),M,E,H)}function Z(M,v,E,H){return Se(Y(v),M,E,H)}function q(M,v,E,H){return Z(M,v,E,H)}function re(M,v,E,H){return Se(ye(v),M,E,H)}function pe(M,v,E,H){return Se(X(v,M.length-E),M,E,H)}u.prototype.write=function(v,E,H,ne){if(E===void 0)ne="utf8",H=this.length,E=0;else if(H===void 0&&typeof E=="string")ne=E,H=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(H)?(H=H>>>0,ne===void 0&&(ne="utf8")):(ne=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-E;if((H===void 0||H>he)&&(H=he),v.length>0&&(H<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");for(var we=!1;;)switch(ne){case"hex":return U(this,v,E,H);case"utf8":case"utf-8":return G(this,v,E,H);case"ascii":return Z(this,v,E,H);case"latin1":case"binary":return q(this,v,E,H);case"base64":return re(this,v,E,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,v,E,H);default:if(we)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),we=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(M,v,E){return v===0&&E===M.length?o.fromByteArray(M):o.fromByteArray(M.slice(v,E))}function ve(M,v,E){E=Math.min(M.length,E);for(var H=[],ne=v;ne<E;){var he=M[ne],we=null,_e=he>239?4:he>223?3:he>191?2:1;if(ne+_e<=E){var Pe,it,ft,at;switch(_e){case 1:he<128&&(we=he);break;case 2:Pe=M[ne+1],(Pe&192)===128&&(at=(he&31)<<6|Pe&63,at>127&&(we=at));break;case 3:Pe=M[ne+1],it=M[ne+2],(Pe&192)===128&&(it&192)===128&&(at=(he&15)<<12|(Pe&63)<<6|it&63,at>2047&&(at<55296||at>57343)&&(we=at));break;case 4:Pe=M[ne+1],it=M[ne+2],ft=M[ne+3],(Pe&192)===128&&(it&192)===128&&(ft&192)===128&&(at=(he&15)<<18|(Pe&63)<<12|(it&63)<<6|ft&63,at>65535&&at<1114112&&(we=at))}}we===null?(we=65533,_e=1):we>65535&&(we-=65536,H.push(we>>>10&1023|55296),we=56320|we&1023),H.push(we),ne+=_e}return De(H)}var Ie=4096;function De(M){var v=M.length;if(v<=Ie)return String.fromCharCode.apply(String,M);for(var E="",H=0;H<v;)E+=String.fromCharCode.apply(String,M.slice(H,H+=Ie));return E}function Ye(M,v,E){var H="";E=Math.min(M.length,E);for(var ne=v;ne<E;++ne)H+=String.fromCharCode(M[ne]&127);return H}function Re(M,v,E){var H="";E=Math.min(M.length,E);for(var ne=v;ne<E;++ne)H+=String.fromCharCode(M[ne]);return H}function Ue(M,v,E){var H=M.length;(!v||v<0)&&(v=0),(!E||E<0||E>H)&&(E=H);for(var ne="",he=v;he<E;++he)ne+=F(M[he]);return ne}function Ge(M,v,E){for(var H=M.slice(v,E),ne="",he=0;he<H.length;he+=2)ne+=String.fromCharCode(H[he]+H[he+1]*256);return ne}u.prototype.slice=function(v,E){var H=this.length;v=~~v,E=E===void 0?H:~~E,v<0?(v+=H,v<0&&(v=0)):v>H&&(v=H),E<0?(E+=H,E<0&&(E=0)):E>H&&(E=H),E<v&&(E=v);var ne=this.subarray(v,E);return ne.__proto__=u.prototype,ne};function Me(M,v,E){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+v>E)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(v,E,H){v=v>>>0,E=E>>>0,H||Me(v,E,this.length);for(var ne=this[v],he=1,we=0;++we<E&&(he*=256);)ne+=this[v+we]*he;return ne},u.prototype.readUIntBE=function(v,E,H){v=v>>>0,E=E>>>0,H||Me(v,E,this.length);for(var ne=this[v+--E],he=1;E>0&&(he*=256);)ne+=this[v+--E]*he;return ne},u.prototype.readUInt8=function(v,E){return v=v>>>0,E||Me(v,1,this.length),this[v]},u.prototype.readUInt16LE=function(v,E){return v=v>>>0,E||Me(v,2,this.length),this[v]|this[v+1]<<8},u.prototype.readUInt16BE=function(v,E){return v=v>>>0,E||Me(v,2,this.length),this[v]<<8|this[v+1]},u.prototype.readUInt32LE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},u.prototype.readUInt32BE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},u.prototype.readIntLE=function(v,E,H){v=v>>>0,E=E>>>0,H||Me(v,E,this.length);for(var ne=this[v],he=1,we=0;++we<E&&(he*=256);)ne+=this[v+we]*he;return he*=128,ne>=he&&(ne-=Math.pow(2,8*E)),ne},u.prototype.readIntBE=function(v,E,H){v=v>>>0,E=E>>>0,H||Me(v,E,this.length);for(var ne=E,he=1,we=this[v+--ne];ne>0&&(he*=256);)we+=this[v+--ne]*he;return he*=128,we>=he&&(we-=Math.pow(2,8*E)),we},u.prototype.readInt8=function(v,E){return v=v>>>0,E||Me(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},u.prototype.readInt16LE=function(v,E){v=v>>>0,E||Me(v,2,this.length);var H=this[v]|this[v+1]<<8;return H&32768?H|4294901760:H},u.prototype.readInt16BE=function(v,E){v=v>>>0,E||Me(v,2,this.length);var H=this[v+1]|this[v]<<8;return H&32768?H|4294901760:H},u.prototype.readInt32LE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},u.prototype.readInt32BE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},u.prototype.readFloatLE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),s.read(this,v,!0,23,4)},u.prototype.readFloatBE=function(v,E){return v=v>>>0,E||Me(v,4,this.length),s.read(this,v,!1,23,4)},u.prototype.readDoubleLE=function(v,E){return v=v>>>0,E||Me(v,8,this.length),s.read(this,v,!0,52,8)},u.prototype.readDoubleBE=function(v,E){return v=v>>>0,E||Me(v,8,this.length),s.read(this,v,!1,52,8)};function Ne(M,v,E,H,ne,he){if(!u.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>ne||v<he)throw new RangeError('"value" argument is out of bounds');if(E+H>M.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(v,E,H,ne){if(v=+v,E=E>>>0,H=H>>>0,!ne){var he=Math.pow(2,8*H)-1;Ne(this,v,E,H,he,0)}var we=1,_e=0;for(this[E]=v&255;++_e<H&&(we*=256);)this[E+_e]=v/we&255;return E+H},u.prototype.writeUIntBE=function(v,E,H,ne){if(v=+v,E=E>>>0,H=H>>>0,!ne){var he=Math.pow(2,8*H)-1;Ne(this,v,E,H,he,0)}var we=H-1,_e=1;for(this[E+we]=v&255;--we>=0&&(_e*=256);)this[E+we]=v/_e&255;return E+H},u.prototype.writeUInt8=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,1,255,0),this[E]=v&255,E+1},u.prototype.writeUInt16LE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,2,65535,0),this[E]=v&255,this[E+1]=v>>>8,E+2},u.prototype.writeUInt16BE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,2,65535,0),this[E]=v>>>8,this[E+1]=v&255,E+2},u.prototype.writeUInt32LE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,4,4294967295,0),this[E+3]=v>>>24,this[E+2]=v>>>16,this[E+1]=v>>>8,this[E]=v&255,E+4},u.prototype.writeUInt32BE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,4,4294967295,0),this[E]=v>>>24,this[E+1]=v>>>16,this[E+2]=v>>>8,this[E+3]=v&255,E+4},u.prototype.writeIntLE=function(v,E,H,ne){if(v=+v,E=E>>>0,!ne){var he=Math.pow(2,8*H-1);Ne(this,v,E,H,he-1,-he)}var we=0,_e=1,Pe=0;for(this[E]=v&255;++we<H&&(_e*=256);)v<0&&Pe===0&&this[E+we-1]!==0&&(Pe=1),this[E+we]=(v/_e>>0)-Pe&255;return E+H},u.prototype.writeIntBE=function(v,E,H,ne){if(v=+v,E=E>>>0,!ne){var he=Math.pow(2,8*H-1);Ne(this,v,E,H,he-1,-he)}var we=H-1,_e=1,Pe=0;for(this[E+we]=v&255;--we>=0&&(_e*=256);)v<0&&Pe===0&&this[E+we+1]!==0&&(Pe=1),this[E+we]=(v/_e>>0)-Pe&255;return E+H},u.prototype.writeInt8=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,1,127,-128),v<0&&(v=255+v+1),this[E]=v&255,E+1},u.prototype.writeInt16LE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,2,32767,-32768),this[E]=v&255,this[E+1]=v>>>8,E+2},u.prototype.writeInt16BE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,2,32767,-32768),this[E]=v>>>8,this[E+1]=v&255,E+2},u.prototype.writeInt32LE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,4,2147483647,-2147483648),this[E]=v&255,this[E+1]=v>>>8,this[E+2]=v>>>16,this[E+3]=v>>>24,E+4},u.prototype.writeInt32BE=function(v,E,H){return v=+v,E=E>>>0,H||Ne(this,v,E,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[E]=v>>>24,this[E+1]=v>>>16,this[E+2]=v>>>8,this[E+3]=v&255,E+4};function rt(M,v,E,H,ne,he){if(E+H>M.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function pt(M,v,E,H,ne){return v=+v,E=E>>>0,ne||rt(M,v,E,4),s.write(M,v,E,H,23,4),E+4}u.prototype.writeFloatLE=function(v,E,H){return pt(this,v,E,!0,H)},u.prototype.writeFloatBE=function(v,E,H){return pt(this,v,E,!1,H)};function ut(M,v,E,H,ne){return v=+v,E=E>>>0,ne||rt(M,v,E,8),s.write(M,v,E,H,52,8),E+8}u.prototype.writeDoubleLE=function(v,E,H){return ut(this,v,E,!0,H)},u.prototype.writeDoubleBE=function(v,E,H){return ut(this,v,E,!1,H)},u.prototype.copy=function(v,E,H,ne){if(!u.isBuffer(v))throw new TypeError("argument should be a Buffer");if(H||(H=0),!ne&&ne!==0&&(ne=this.length),E>=v.length&&(E=v.length),E||(E=0),ne>0&&ne<H&&(ne=H),ne===H||v.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),v.length-E<ne-H&&(ne=v.length-E+H);var he=ne-H;if(this===v&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(E,H,ne);else if(this===v&&H<E&&E<ne)for(var we=he-1;we>=0;--we)v[we+E]=this[we+H];else Uint8Array.prototype.set.call(v,this.subarray(H,ne),E);return he},u.prototype.fill=function(v,E,H,ne){if(typeof v=="string"){if(typeof E=="string"?(ne=E,E=0,H=this.length):typeof H=="string"&&(ne=H,H=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!u.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(v.length===1){var he=v.charCodeAt(0);(ne==="utf8"&&he<128||ne==="latin1")&&(v=he)}}else typeof v=="number"&&(v=v&255);if(E<0||this.length<E||this.length<H)throw new RangeError("Out of range index");if(H<=E)return this;E=E>>>0,H=H===void 0?this.length:H>>>0,v||(v=0);var we;if(typeof v=="number")for(we=E;we<H;++we)this[we]=v;else{var _e=u.isBuffer(v)?v:u.from(v,ne),Pe=_e.length;if(Pe===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(we=0;we<H-E;++we)this[we+E]=_e[we%Pe]}return this};var je=/[^+/0-9A-Za-z-_]/g;function yt(M){if(M=M.split("=")[0],M=M.trim().replace(je,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function F(M){return M<16?"0"+M.toString(16):M.toString(16)}function T(M,v){v=v||1/0;for(var E,H=M.length,ne=null,he=[],we=0;we<H;++we){if(E=M.charCodeAt(we),E>55295&&E<57344){if(!ne){if(E>56319){(v-=3)>-1&&he.push(239,191,189);continue}else if(we+1===H){(v-=3)>-1&&he.push(239,191,189);continue}ne=E;continue}if(E<56320){(v-=3)>-1&&he.push(239,191,189),ne=E;continue}E=(ne-55296<<10|E-56320)+65536}else ne&&(v-=3)>-1&&he.push(239,191,189);if(ne=null,E<128){if((v-=1)<0)break;he.push(E)}else if(E<2048){if((v-=2)<0)break;he.push(E>>6|192,E&63|128)}else if(E<65536){if((v-=3)<0)break;he.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((v-=4)<0)break;he.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return he}function Y(M){for(var v=[],E=0;E<M.length;++E)v.push(M.charCodeAt(E)&255);return v}function X(M,v){for(var E,H,ne,he=[],we=0;we<M.length&&!((v-=2)<0);++we)E=M.charCodeAt(we),H=E>>8,ne=E%256,he.push(ne),he.push(H);return he}function ye(M){return o.toByteArray(yt(M))}function Se(M,v,E,H){for(var ne=0;ne<H&&!(ne+E>=v.length||ne>=M.length);++ne)v[ne+E]=M[ne];return ne}function z(M,v){return M instanceof v||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===v.name}function K(M){return M!==M}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:6}],4:[function(e,n,l){(function(r){(function(){(function(o,s){typeof l=="object"?n.exports=s(o):s(o)})(typeof r<"u"?r:this,function(o){if(o.CSS&&o.CSS.escape)return o.CSS.escape;var s=function(a){if(arguments.length==0)throw new TypeError("`CSS.escape` requires an argument.");for(var f=String(a),d=f.length,u=-1,w,_="",A=f.charCodeAt(0);++u<d;){if(w=f.charCodeAt(u),w==0){_+="�";continue}if(w>=1&&w<=31||w==127||u==0&&w>=48&&w<=57||u==1&&w>=48&&w<=57&&A==45){_+="\\"+w.toString(16)+" ";continue}if(u==0&&d==1&&w==45){_+="\\"+f.charAt(u);continue}if(w>=128||w==45||w==95||w>=48&&w<=57||w>=65&&w<=90||w>=97&&w<=122){_+=f.charAt(u);continue}_+="\\"+f.charAt(u)}return _};return o.CSS||(o.CSS={}),o.CSS.escape=s,s})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],5:[function(e,n,l){var r=typeof Reflect=="object"?Reflect:null,o=r&&typeof r.apply=="function"?r.apply:function(p,i,x){return Function.prototype.apply.call(p,i,x)},s;r&&typeof r.ownKeys=="function"?s=r.ownKeys:Object.getOwnPropertySymbols?s=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:s=function(p){return Object.getOwnPropertyNames(p)};function a(h){console&&console.warn&&console.warn(h)}var f=Number.isNaN||function(p){return p!==p};function d(){d.init.call(this)}n.exports=d,n.exports.once=S,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var u=10;function w(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(h){if(typeof h!="number"||h<0||f(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");u=h}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||f(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function _(h){return h._maxListeners===void 0?d.defaultMaxListeners:h._maxListeners}d.prototype.getMaxListeners=function(){return _(this)},d.prototype.emit=function(p){for(var i=[],x=1;x<arguments.length;x++)i.push(arguments[x]);var U=p==="error",G=this._events;if(G!==void 0)U=U&&G.error===void 0;else if(!U)return!1;if(U){var Z;if(i.length>0&&(Z=i[0]),Z instanceof Error)throw Z;var q=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw q.context=Z,q}var re=G[p];if(re===void 0)return!1;if(typeof re=="function")o(re,this,i);else for(var pe=re.length,de=N(re,pe),x=0;x<pe;++x)o(de[x],this,i);return!0};function A(h,p,i,x){var U,G,Z;if(w(i),G=h._events,G===void 0?(G=h._events=Object.create(null),h._eventsCount=0):(G.newListener!==void 0&&(h.emit("newListener",p,i.listener?i.listener:i),G=h._events),Z=G[p]),Z===void 0)Z=G[p]=i,++h._eventsCount;else if(typeof Z=="function"?Z=G[p]=x?[i,Z]:[Z,i]:x?Z.unshift(i):Z.push(i),U=_(h),U>0&&Z.length>U&&!Z.warned){Z.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=h,q.type=p,q.count=Z.length,a(q)}return h}d.prototype.addListener=function(p,i){return A(this,p,i,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(p,i){return A(this,p,i,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(h,p,i){var x={fired:!1,wrapFn:void 0,target:h,type:p,listener:i},U=b.bind(x);return U.listener=i,x.wrapFn=U,U}d.prototype.once=function(p,i){return w(i),this.on(p,C(this,p,i)),this},d.prototype.prependOnceListener=function(p,i){return w(i),this.prependListener(p,C(this,p,i)),this},d.prototype.removeListener=function(p,i){var x,U,G,Z,q;if(w(i),U=this._events,U===void 0)return this;if(x=U[p],x===void 0)return this;if(x===i||x.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete U[p],U.removeListener&&this.emit("removeListener",p,x.listener||i));else if(typeof x!="function"){for(G=-1,Z=x.length-1;Z>=0;Z--)if(x[Z]===i||x[Z].listener===i){q=x[Z].listener,G=Z;break}if(G<0)return this;G===0?x.shift():j(x,G),x.length===1&&(U[p]=x[0]),U.removeListener!==void 0&&this.emit("removeListener",p,q||i)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(p){var i,x,U;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[p]),this;if(arguments.length===0){var G=Object.keys(x),Z;for(U=0;U<G.length;++U)Z=G[U],Z!=="removeListener"&&this.removeAllListeners(Z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=x[p],typeof i=="function")this.removeListener(p,i);else if(i!==void 0)for(U=i.length-1;U>=0;U--)this.removeListener(p,i[U]);return this};function R(h,p,i){var x=h._events;if(x===void 0)return[];var U=x[p];return U===void 0?[]:typeof U=="function"?i?[U.listener||U]:[U]:i?P(U):N(U,U.length)}d.prototype.listeners=function(p){return R(this,p,!0)},d.prototype.rawListeners=function(p){return R(this,p,!1)},d.listenerCount=function(h,p){return typeof h.listenerCount=="function"?h.listenerCount(p):L.call(h,p)},d.prototype.listenerCount=L;function L(h){var p=this._events;if(p!==void 0){var i=p[h];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function N(h,p){for(var i=new Array(p),x=0;x<p;++x)i[x]=h[x];return i}function j(h,p){for(;p+1<h.length;p++)h[p]=h[p+1];h.pop()}function P(h){for(var p=new Array(h.length),i=0;i<p.length;++i)p[i]=h[i].listener||h[i];return p}function S(h,p){return new Promise(function(i,x){function U(){G!==void 0&&h.removeListener("error",G),i([].slice.call(arguments))}var G;p!=="error"&&(G=function(q){h.removeListener(p,U),x(q)},h.once("error",G)),h.once(p,U)})}},{}],6:[function(e,n,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(r,o,s,a,f){var d,u,w=f*8-a-1,_=(1<<w)-1,A=_>>1,b=-7,C=s?f-1:0,R=s?-1:1,L=r[o+C];for(C+=R,d=L&(1<<-b)-1,L>>=-b,b+=w;b>0;d=d*256+r[o+C],C+=R,b-=8);for(u=d&(1<<-b)-1,d>>=-b,b+=a;b>0;u=u*256+r[o+C],C+=R,b-=8);if(d===0)d=1-A;else{if(d===_)return u?NaN:(L?-1:1)*(1/0);u=u+Math.pow(2,a),d=d-A}return(L?-1:1)*u*Math.pow(2,d-a)},l.write=function(r,o,s,a,f,d){var u,w,_,A=d*8-f-1,b=(1<<A)-1,C=b>>1,R=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=a?0:d-1,N=a?1:-1,j=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,u=b):(u=Math.floor(Math.log(o)/Math.LN2),o*(_=Math.pow(2,-u))<1&&(u--,_*=2),u+C>=1?o+=R/_:o+=R*Math.pow(2,1-C),o*_>=2&&(u++,_/=2),u+C>=b?(w=0,u=b):u+C>=1?(w=(o*_-1)*Math.pow(2,f),u=u+C):(w=o*Math.pow(2,C-1)*Math.pow(2,f),u=0));f>=8;r[s+L]=w&255,L+=N,w/=256,f-=8);for(u=u<<f|w,A+=f;A>0;r[s+L]=u&255,L+=N,u/=256,A-=8);r[s+L-N]|=j*128}},{}],7:[function(e,n,l){(function(r){(function(){(function(o){var s=this;n.exports=o(s)})(function(o){function s(h,p){return typeof h!="object"||h===null?!1:h.constructor===p||Object.prototype.toString.call(h)==="[object "+p.name+"]"}function a(h,p){return!p&&s(h,Array)?h:Array.prototype.slice.call(h)}function f(h,p){return h!==void 0?h:p}function d(h,p,i,x){if(d.is(h)){var U=h.slice(p,p+i);return U._littleEndian=f(x,U._littleEndian),U}if(!d.is(this))return new d(h,p,i,x);if(this.buffer=h=d.wrapBuffer(h),this._isArrayBuffer=b.ArrayBuffer&&s(h,ArrayBuffer),this._isPixelData=!1,this._isDataView=b.DataView&&this._isArrayBuffer,this._isNodeBuffer=b.NodeBuffer&&s(h,r),!this._isNodeBuffer&&!this._isArrayBuffer&&!s(h,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!x;var G="byteLength"in h?h.byteLength:h.length;this.byteOffset=p=f(p,0),this.byteLength=i=f(i,G-p),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(h,p,i):this._checkBounds(p,i,G),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function u(h){if(b.NodeBuffer)return new r(h,"binary");for(var p=b.ArrayBuffer?Uint8Array:Array,i=new p(h.length),x=0,U=h.length;U>x;x++)i[x]=255&h.charCodeAt(x);return i}function w(h){return h>=0&&31>h?1<<h:w[h]||(w[h]=Math.pow(2,h))}function _(h,p){this.lo=h,this.hi=p}function A(){_.apply(this,arguments)}var b={NodeBuffer:"Buffer"in window,DataView:"DataView"in window,ArrayBuffer:"ArrayBuffer"in window,PixelData:!1},C=window.TextEncoder,R=window.TextDecoder;b.NodeBuffer&&function(h){try{h.writeFloatLE(1/0,0)}catch{b.NodeBuffer=!1}}(new r(4));var L={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};d.wrapBuffer=function(h){switch(typeof h){case"number":if(b.NodeBuffer)h=new r(h),h.fill(0);else if(b.ArrayBuffer)h=new Uint8Array(h).buffer;else{h=new Array(h);for(var p=0;p<h.length;p++)h[p]=0}return h;case"string":h=u(h);default:return"length"in h&&!(b.NodeBuffer&&s(h,r)||b.ArrayBuffer&&s(h,ArrayBuffer))&&(b.NodeBuffer?h=new r(h):b.ArrayBuffer?s(h,ArrayBuffer)||(h=new Uint8Array(h).buffer,s(h,ArrayBuffer)||(h=new Uint8Array(a(h,!0)).buffer)):h=a(h)),h}},d.is=function(h){return h&&h.jDataView},d.from=function(){return new d(arguments)},d.Uint64=_,_.prototype={valueOf:function(){return this.lo+w(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},_.fromNumber=function(h){var p=Math.floor(h/w(32)),i=h-p*w(32);return new _(i,p)},d.Int64=A,A.prototype="create"in Object?Object.create(_.prototype):new _,A.prototype.valueOf=function(){return this.hi<w(31)?_.prototype.valueOf.apply(this,arguments):-(w(32)-this.lo+w(32)*(w(32)-1-this.hi))},A.fromNumber=function(h){var p,i;if(h>=0){var x=_.fromNumber(h);p=x.lo,i=x.hi}else i=Math.floor(h/w(32)),p=h-i*w(32),i+=w(32);return new A(p,i)};var N=d.prototype={compatibility:b,jDataView:!0,_checkBounds:function(h,p,i){if(typeof h!="number")throw new TypeError("Offset is not a number.");if(typeof p!="number")throw new TypeError("Size is not a number.");if(0>p)throw new RangeError("Length is negative.");if(0>h||h+p>f(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(h,p,i,x,U){return this._engineAction(h,p,f(i,this._offset),f(x,this._littleEndian),U)},_dataViewAction:function(h,p,i,x,U){return this._offset=i+L[h],p?this._view["get"+h](i,x):this._view["set"+h](i,U,x)},_arrayBufferAction:function(h,p,i,x,U){var G,Z=L[h],q=o[h+"Array"];if(x=f(x,this._littleEndian),Z===1||(this.byteOffset+i)%Z===0&&x)return G=new q(this.buffer,this.byteOffset+i,1),this._offset=i+Z,p?G[0]:G[0]=U;var re=new Uint8Array(p?this.getBytes(Z,i,x,!0):Z);return G=new q(re.buffer,0,1),p?G[0]:(G[0]=U,void this._setBytes(i,re,x))},_arrayAction:function(h,p,i,x,U){return p?this["_get"+h](i,x):this["_set"+h](i,U,x)},_getBytes:function(h,p,i){i=f(i,this._littleEndian),p=f(p,this._offset),h=f(h,this.byteLength-p),this._checkBounds(p,h),p+=this.byteOffset,this._offset=p-this.byteOffset+h;var x=this._isArrayBuffer?new Uint8Array(this.buffer,p,h):(this.buffer.slice||Array.prototype.slice).call(this.buffer,p,p+h);return i||1>=h?x:a(x).reverse()},getBytes:function(h,p,i,x){var U=this._getBytes(h,p,f(i,!0));return x?a(U):U},_setBytes:function(h,p,i){var x=p.length;if(x!==0){if(i=f(i,this._littleEndian),h=f(h,this._offset),this._checkBounds(h,x),!i&&x>1&&(p=a(p,!0).reverse()),h+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,h,x).set(p);else if(this._isNodeBuffer)new r(p).copy(this.buffer,h);else for(var U=0;x>U;U++)this.buffer[h+U]=p[U];this._offset=h-this.byteOffset+x}},setBytes:function(h,p,i){this._setBytes(h,p,f(i,!0))},getString:function(h,p,i){if(this._isNodeBuffer)return p=f(p,this._offset),h=f(h,this.byteLength-p),this._checkBounds(p,h),this._offset=p+h,this.buffer.toString(i||"binary",this.byteOffset+p,this.byteOffset+this._offset);var x=this._getBytes(h,p,!0);if(i=i==="utf8"?"utf-8":i||"binary",R&&i!=="binary")return new R(i).decode(this._isArrayBuffer?x:new Uint8Array(x));var U="";h=x.length;for(var G=0;h>G;G++)U+=String.fromCharCode(x[G]);return i==="utf-8"&&(U=decodeURIComponent(escape(U))),U},setString:function(h,p,i){if(this._isNodeBuffer)return h=f(h,this._offset),this._checkBounds(h,p.length),void(this._offset=h+this.buffer.write(p,this.byteOffset+h,i||"binary"));i=i==="utf8"?"utf-8":i||"binary";var x;C&&i!=="binary"?x=new C(i).encode(p):(i==="utf-8"&&(p=unescape(encodeURIComponent(p))),x=u(p)),this._setBytes(h,x,!0)},getChar:function(h){return this.getString(1,h)},setChar:function(h,p){this.setString(h,p)},tell:function(){return this._offset},seek:function(h){return this._checkBounds(h,0),this._offset=h},skip:function(h){return this.seek(this._offset+h)},slice:function(h,p,i){function x(U,G){return 0>U?U+G:U}return h=x(h,this.byteLength),p=x(f(p,this.byteLength),this.byteLength),i?new d(this.getBytes(p-h,h,!0,!0),void 0,void 0,this._littleEndian):new d(this.buffer,this.byteOffset+h,p-h,this._littleEndian)},alignBy:function(h){return this._bitOffset=0,f(h,1)!==1?this.skip(h-(this._offset%h||h)):this._offset},_getFloat64:function(h,p){var i=this._getBytes(8,h,p),x=1-2*(i[7]>>7),U=((i[7]<<1&255)<<3|i[6]>>4)-1023,G=(15&i[6])*w(48)+i[5]*w(40)+i[4]*w(32)+i[3]*w(24)+i[2]*w(16)+i[1]*w(8)+i[0];return U===1024?G!==0?NaN:1/0*x:U===-1023?x*G*w(-1074):x*(1+G*w(-52))*w(U)},_getFloat32:function(h,p){var i=this._getBytes(4,h,p),x=1-2*(i[3]>>7),U=(i[3]<<1&255|i[2]>>7)-127,G=(127&i[2])<<16|i[1]<<8|i[0];return U===128?G!==0?NaN:1/0*x:U===-127?x*G*w(-149):x*(1+G*w(-23))*w(U)},_get64:function(h,p,i){i=f(i,this._littleEndian),p=f(p,this._offset);for(var x=i?[0,4]:[4,0],U=0;2>U;U++)x[U]=this.getUint32(p+x[U],i);return this._offset=p+8,new h(x[0],x[1])},getInt64:function(h,p){return this._get64(A,h,p)},getUint64:function(h,p){return this._get64(_,h,p)},_getInt32:function(h,p){var i=this._getBytes(4,h,p);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(h,p){return this._getInt32(h,p)>>>0},_getInt16:function(h,p){return this._getUint16(h,p)<<16>>16},_getUint16:function(h,p){var i=this._getBytes(2,h,p);return i[1]<<8|i[0]},_getInt8:function(h){return this._getUint8(h)<<24>>24},_getUint8:function(h){return this._getBytes(1,h)[0]},_getBitRangeData:function(h,p){var i=(f(p,this._offset)<<3)+this._bitOffset,x=i+h,U=i>>>3,G=x+7>>>3,Z=this._getBytes(G-U,U,!0),q=0;(this._bitOffset=7&x)&&(this._bitOffset-=8);for(var re=0,pe=Z.length;pe>re;re++)q=q<<8|Z[re];return{start:U,bytes:Z,wideValue:q}},getSigned:function(h,p){var i=32-h;return this.getUnsigned(h,p)<<i>>i},getUnsigned:function(h,p){var i=this._getBitRangeData(h,p).wideValue>>>-this._bitOffset;return 32>h?i&~(-1<<h):i},_setBinaryFloat:function(h,p,i,x,U){var G,Z,q=0>p?1:0,re=~(-1<<x-1),pe=1-re;0>p&&(p=-p),p===0?(G=0,Z=0):isNaN(p)?(G=2*re+1,Z=1):p===1/0?(G=2*re+1,Z=0):(G=Math.floor(Math.log(p)/Math.LN2),G>=pe&&re>=G?(Z=Math.floor((p*w(-G)-1)*w(i)),G+=re):(Z=Math.floor(p/w(pe-i)),G=0));for(var de=[];i>=8;)de.push(Z%256),Z=Math.floor(Z/256),i-=8;for(G=G<<i|Z,x+=i;x>=8;)de.push(255&G),G>>>=8,x-=8;de.push(q<<x|G),this._setBytes(h,de,U)},_setFloat32:function(h,p,i){this._setBinaryFloat(h,p,23,8,i)},_setFloat64:function(h,p,i){this._setBinaryFloat(h,p,52,11,i)},_set64:function(h,p,i,x){typeof i!="object"&&(i=h.fromNumber(i)),x=f(x,this._littleEndian),p=f(p,this._offset);var U=x?{lo:0,hi:4}:{lo:4,hi:0};for(var G in U)this.setUint32(p+U[G],i[G],x);this._offset=p+8},setInt64:function(h,p,i){this._set64(A,h,p,i)},setUint64:function(h,p,i){this._set64(_,h,p,i)},_setUint32:function(h,p,i){this._setBytes(h,[255&p,p>>>8&255,p>>>16&255,p>>>24],i)},_setUint16:function(h,p,i){this._setBytes(h,[255&p,p>>>8&255],i)},_setUint8:function(h,p){this._setBytes(h,[255&p])},setUnsigned:function(h,p,i){var x=this._getBitRangeData(i,h),U=x.wideValue,G=x.bytes;U&=~(~(-1<<i)<<-this._bitOffset),U|=(32>i?p&~(-1<<i):p)<<-this._bitOffset;for(var Z=G.length-1;Z>=0;Z--)G[Z]=255&U,U>>>=8;this._setBytes(x.start,G,!0)}},j={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};N._nodeBufferAction=function(h,p,i,x,U){this._offset=i+L[h];var G=j[h]+(h==="Int8"||h==="Uint8"?"":x?"LE":"BE");return i+=this.byteOffset,p?this.buffer["read"+G](i):this.buffer["write"+G](U,i)};for(var P in L)(function(h){N["get"+h]=function(p,i){return this._action(h,!0,p,i)},N["set"+h]=function(p,i,x){this._action(h,!1,p,x,i)}})(P);N._setInt32=N._setUint32,N._setInt16=N._setUint16,N._setInt8=N._setUint8,N.setSigned=N.setUnsigned;for(var S in N)S.slice(0,3)==="set"&&function(h){N["write"+h]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+h].apply(this,arguments)}}(S.slice(3));return d})}).call(this)}).call(this,e("buffer").Buffer)},{buffer:3}],8:[function(e,n,l){var r=n.exports={},o,s;function a(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=a}catch{o=a}try{typeof clearTimeout=="function"?s=clearTimeout:s=f}catch{s=f}})();function d(j){if(o===setTimeout)return setTimeout(j,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(j,0);try{return o(j,0)}catch{try{return o.call(null,j,0)}catch{return o.call(this,j,0)}}}function u(j){if(s===clearTimeout)return clearTimeout(j);if((s===f||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(j);try{return s(j)}catch{try{return s.call(null,j)}catch{return s.call(this,j)}}}var w=[],_=!1,A,b=-1;function C(){!_||!A||(_=!1,A.length?w=A.concat(w):b=-1,w.length&&R())}function R(){if(!_){var j=d(C);_=!0;for(var P=w.length;P;){for(A=w,w=[];++b<P;)A&&A[b].run();b=-1,P=w.length}A=null,_=!1,u(j)}}r.nextTick=function(j){var P=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)P[S-1]=arguments[S];w.push(new L(j,P)),w.length===1&&!_&&d(R)};function L(j,P){this.fun=j,this.array=P}L.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function N(){}r.on=N,r.addListener=N,r.once=N,r.off=N,r.removeListener=N,r.removeAllListeners=N,r.emit=N,r.prependListener=N,r.prependOnceListener=N,r.listeners=function(j){return[]},r.binding=function(j){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(j){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],9:[function(e,n,l){var r=e("buffer"),o=r.Buffer;function s(f,d){for(var u in f)d[u]=f[u]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=r:(s(r,l),l.Buffer=a);function a(f,d,u){return o(f,d,u)}s(o,a),a.from=function(f,d,u){if(typeof f=="number")throw new TypeError("Argument must not be a number");return o(f,d,u)},a.alloc=function(f,d,u){if(typeof f!="number")throw new TypeError("Argument must be a number");var w=o(f);return d!==void 0?typeof u=="string"?w.fill(d,u):w.fill(d):w.fill(0),w},a.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return o(f)},a.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(f)}},{buffer:3}],10:[function(e,n,l){(function(r){(function(){(function(o){o.parser=function(F,T){return new a(F,T)},o.SAXParser=a,o.SAXStream=b,o.createStream=A,o.MAX_BUFFER_LENGTH=64*1024;var s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];o.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(F,T){if(!(this instanceof a))return new a(F,T);var Y=this;d(Y),Y.q=Y.c="",Y.bufferCheckPosition=o.MAX_BUFFER_LENGTH,Y.opt=T||{},Y.opt.lowercase=Y.opt.lowercase||Y.opt.lowercasetags,Y.looseCase=Y.opt.lowercase?"toLowerCase":"toUpperCase",Y.tags=[],Y.closed=Y.closedRoot=Y.sawRoot=!1,Y.tag=Y.error=null,Y.strict=!!F,Y.noscript=!!(F||Y.opt.noscript),Y.state=q.BEGIN,Y.strictEntities=Y.opt.strictEntities,Y.ENTITIES=Y.strictEntities?Object.create(o.XML_ENTITIES):Object.create(o.ENTITIES),Y.attribList=[],Y.opt.xmlns&&(Y.ns=Object.create(j)),Y.trackPosition=Y.opt.position!==!1,Y.trackPosition&&(Y.position=Y.line=Y.column=0),pe(Y,"onready")}Object.create||(Object.create=function(F){function T(){}T.prototype=F;var Y=new T;return Y}),Object.keys||(Object.keys=function(F){var T=[];for(var Y in F)F.hasOwnProperty(Y)&&T.push(Y);return T});function f(F){for(var T=Math.max(o.MAX_BUFFER_LENGTH,10),Y=0,X=0,ye=s.length;X<ye;X++){var Se=F[s[X]].length;if(Se>T)switch(s[X]){case"textNode":ve(F);break;case"cdata":de(F,"oncdata",F.cdata),F.cdata="";break;case"script":de(F,"onscript",F.script),F.script="";break;default:De(F,"Max buffer length exceeded: "+s[X])}Y=Math.max(Y,Se)}var z=o.MAX_BUFFER_LENGTH-Y;F.bufferCheckPosition=z+F.position}function d(F){for(var T=0,Y=s.length;T<Y;T++)F[s[T]]=""}function u(F){ve(F),F.cdata!==""&&(de(F,"oncdata",F.cdata),F.cdata=""),F.script!==""&&(de(F,"onscript",F.script),F.script="")}a.prototype={end:function(){Ye(this)},write:yt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};var w;try{w=e("stream").Stream}catch{w=function(){}}var _=o.EVENTS.filter(function(F){return F!=="error"&&F!=="end"});function A(F,T){return new b(F,T)}function b(F,T){if(!(this instanceof b))return new b(F,T);w.apply(this),this._parser=new a(F,T),this.writable=!0,this.readable=!0;var Y=this;this._parser.onend=function(){Y.emit("end")},this._parser.onerror=function(X){Y.emit("error",X),Y._parser.error=null},this._decoder=null,_.forEach(function(X){Object.defineProperty(Y,"on"+X,{get:function(){return Y._parser["on"+X]},set:function(ye){if(!ye)return Y.removeAllListeners(X),Y._parser["on"+X]=ye,ye;Y.on(X,ye)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(w.prototype,{constructor:{value:b}}),b.prototype.write=function(F){if(typeof r=="function"&&typeof r.isBuffer=="function"&&r.isBuffer(F)){if(!this._decoder){var T=e("string_decoder").StringDecoder;this._decoder=new T("utf8")}F=this._decoder.write(F)}return this._parser.write(F.toString()),this.emit("data",F),!0},b.prototype.end=function(F){return F&&F.length&&this.write(F),this._parser.end(),!0},b.prototype.on=function(F,T){var Y=this;return!Y._parser["on"+F]&&_.indexOf(F)!==-1&&(Y._parser["on"+F]=function(){var X=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);X.splice(0,0,F),Y.emit.apply(Y,X)}),w.prototype.on.call(Y,F,T)};var C="[CDATA[",R="DOCTYPE",L="http://www.w3.org/XML/1998/namespace",N="http://www.w3.org/2000/xmlns/",j={xml:L,xmlns:N},P=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function i(F){return F===" "||F===`
`||F==="\r"||F==="	"}function x(F){return F==='"'||F==="'"}function U(F){return F===">"||i(F)}function G(F,T){return F.test(T)}function Z(F,T){return!G(F,T)}var q=0;o.STATE={BEGIN:q++,BEGIN_WHITESPACE:q++,TEXT:q++,TEXT_ENTITY:q++,OPEN_WAKA:q++,SGML_DECL:q++,SGML_DECL_QUOTED:q++,DOCTYPE:q++,DOCTYPE_QUOTED:q++,DOCTYPE_DTD:q++,DOCTYPE_DTD_QUOTED:q++,COMMENT_STARTING:q++,COMMENT:q++,COMMENT_ENDING:q++,COMMENT_ENDED:q++,CDATA:q++,CDATA_ENDING:q++,CDATA_ENDING_2:q++,PROC_INST:q++,PROC_INST_BODY:q++,PROC_INST_ENDING:q++,OPEN_TAG:q++,OPEN_TAG_SLASH:q++,ATTRIB:q++,ATTRIB_NAME:q++,ATTRIB_NAME_SAW_WHITE:q++,ATTRIB_VALUE:q++,ATTRIB_VALUE_QUOTED:q++,ATTRIB_VALUE_CLOSED:q++,ATTRIB_VALUE_UNQUOTED:q++,ATTRIB_VALUE_ENTITY_Q:q++,ATTRIB_VALUE_ENTITY_U:q++,CLOSE_TAG:q++,CLOSE_TAG_SAW_WHITE:q++,SCRIPT:q++,SCRIPT_ENDING:q++},o.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},o.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(o.ENTITIES).forEach(function(F){var T=o.ENTITIES[F],Y=typeof T=="number"?String.fromCharCode(T):T;o.ENTITIES[F]=Y});for(var re in o.STATE)o.STATE[o.STATE[re]]=re;q=o.STATE;function pe(F,T,Y){F[T]&&F[T](Y)}function de(F,T,Y){F.textNode&&ve(F),pe(F,T,Y)}function ve(F){F.textNode=Ie(F.opt,F.textNode),F.textNode&&pe(F,"ontext",F.textNode),F.textNode=""}function Ie(F,T){return F.trim&&(T=T.trim()),F.normalize&&(T=T.replace(/\s+/g," ")),T}function De(F,T){return ve(F),F.trackPosition&&(T+=`
Line: `+F.line+`
Column: `+F.column+`
Char: `+F.c),T=new Error(T),F.error=T,pe(F,"onerror",T),F}function Ye(F){return F.sawRoot&&!F.closedRoot&&Re(F,"Unclosed root tag"),F.state!==q.BEGIN&&F.state!==q.BEGIN_WHITESPACE&&F.state!==q.TEXT&&De(F,"Unexpected end"),ve(F),F.c="",F.closed=!0,pe(F,"onend"),a.call(F,F.strict,F.opt),F}function Re(F,T){if(typeof F!="object"||!(F instanceof a))throw new Error("bad call to strictFail");F.strict&&De(F,T)}function Ue(F){F.strict||(F.tagName=F.tagName[F.looseCase]());var T=F.tags[F.tags.length-1]||F,Y=F.tag={name:F.tagName,attributes:{}};F.opt.xmlns&&(Y.ns=T.ns),F.attribList.length=0,de(F,"onopentagstart",Y)}function Ge(F,T){var Y=F.indexOf(":"),X=Y<0?["",F]:F.split(":"),ye=X[0],Se=X[1];return T&&F==="xmlns"&&(ye="xmlns",Se=""),{prefix:ye,local:Se}}function Me(F){if(F.strict||(F.attribName=F.attribName[F.looseCase]()),F.attribList.indexOf(F.attribName)!==-1||F.tag.attributes.hasOwnProperty(F.attribName)){F.attribName=F.attribValue="";return}if(F.opt.xmlns){var T=Ge(F.attribName,!0),Y=T.prefix,X=T.local;if(Y==="xmlns")if(X==="xml"&&F.attribValue!==L)Re(F,"xml: prefix must be bound to "+L+`
Actual: `+F.attribValue);else if(X==="xmlns"&&F.attribValue!==N)Re(F,"xmlns: prefix must be bound to "+N+`
Actual: `+F.attribValue);else{var ye=F.tag,Se=F.tags[F.tags.length-1]||F;ye.ns===Se.ns&&(ye.ns=Object.create(Se.ns)),ye.ns[X]=F.attribValue}F.attribList.push([F.attribName,F.attribValue])}else F.tag.attributes[F.attribName]=F.attribValue,de(F,"onattribute",{name:F.attribName,value:F.attribValue});F.attribName=F.attribValue=""}function Ne(F,T){if(F.opt.xmlns){var Y=F.tag,X=Ge(F.tagName);Y.prefix=X.prefix,Y.local=X.local,Y.uri=Y.ns[X.prefix]||"",Y.prefix&&!Y.uri&&(Re(F,"Unbound namespace prefix: "+JSON.stringify(F.tagName)),Y.uri=X.prefix);var ye=F.tags[F.tags.length-1]||F;Y.ns&&ye.ns!==Y.ns&&Object.keys(Y.ns).forEach(function(_e){de(F,"onopennamespace",{prefix:_e,uri:Y.ns[_e]})});for(var Se=0,z=F.attribList.length;Se<z;Se++){var K=F.attribList[Se],M=K[0],v=K[1],E=Ge(M,!0),H=E.prefix,ne=E.local,he=H===""?"":Y.ns[H]||"",we={name:M,value:v,prefix:H,local:ne,uri:he};H&&H!=="xmlns"&&!he&&(Re(F,"Unbound namespace prefix: "+JSON.stringify(H)),we.uri=H),F.tag.attributes[M]=we,de(F,"onattribute",we)}F.attribList.length=0}F.tag.isSelfClosing=!!T,F.sawRoot=!0,F.tags.push(F.tag),de(F,"onopentag",F.tag),T||(!F.noscript&&F.tagName.toLowerCase()==="script"?F.state=q.SCRIPT:F.state=q.TEXT,F.tag=null,F.tagName=""),F.attribName=F.attribValue="",F.attribList.length=0}function rt(F){if(!F.tagName){Re(F,"Weird empty close tag."),F.textNode+="</>",F.state=q.TEXT;return}if(F.script){if(F.tagName!=="script"){F.script+="</"+F.tagName+">",F.tagName="",F.state=q.SCRIPT;return}de(F,"onscript",F.script),F.script=""}var T=F.tags.length,Y=F.tagName;F.strict||(Y=Y[F.looseCase]());for(var X=Y;T--;){var ye=F.tags[T];if(ye.name!==X)Re(F,"Unexpected close tag");else break}if(T<0){Re(F,"Unmatched closing tag: "+F.tagName),F.textNode+="</"+F.tagName+">",F.state=q.TEXT;return}F.tagName=Y;for(var Se=F.tags.length;Se-- >T;){var z=F.tag=F.tags.pop();F.tagName=F.tag.name,de(F,"onclosetag",F.tagName);var K={};for(var M in z.ns)K[M]=z.ns[M];var v=F.tags[F.tags.length-1]||F;F.opt.xmlns&&z.ns!==v.ns&&Object.keys(z.ns).forEach(function(E){var H=z.ns[E];de(F,"onclosenamespace",{prefix:E,uri:H})})}T===0&&(F.closedRoot=!0),F.tagName=F.attribValue=F.attribName="",F.attribList.length=0,F.state=q.TEXT}function pt(F){var T=F.entity,Y=T.toLowerCase(),X,ye="";return F.ENTITIES[T]?F.ENTITIES[T]:F.ENTITIES[Y]?F.ENTITIES[Y]:(T=Y,T.charAt(0)==="#"&&(T.charAt(1)==="x"?(T=T.slice(2),X=parseInt(T,16),ye=X.toString(16)):(T=T.slice(1),X=parseInt(T,10),ye=X.toString(10))),T=T.replace(/^0+/,""),isNaN(X)||ye.toLowerCase()!==T?(Re(F,"Invalid character entity"),"&"+F.entity+";"):String.fromCodePoint(X))}function ut(F,T){T==="<"?(F.state=q.OPEN_WAKA,F.startTagPosition=F.position):i(T)||(Re(F,"Non-whitespace before first tag."),F.textNode=T,F.state=q.TEXT)}function je(F,T){var Y="";return T<F.length&&(Y=F.charAt(T)),Y}function yt(F){var T=this;if(this.error)throw this.error;if(T.closed)return De(T,"Cannot write after close. Assign an onready handler.");if(F===null)return Ye(T);typeof F=="object"&&(F=F.toString());for(var Y=0,X="";X=je(F,Y++),T.c=X,!!X;)switch(T.trackPosition&&(T.position++,X===`
`?(T.line++,T.column=0):T.column++),T.state){case q.BEGIN:if(T.state=q.BEGIN_WHITESPACE,X==="\uFEFF")continue;ut(T,X);continue;case q.BEGIN_WHITESPACE:ut(T,X);continue;case q.TEXT:if(T.sawRoot&&!T.closedRoot){for(var ye=Y-1;X&&X!=="<"&&X!=="&";)X=je(F,Y++),X&&T.trackPosition&&(T.position++,X===`
`?(T.line++,T.column=0):T.column++);T.textNode+=F.substring(ye,Y-1)}X==="<"&&!(T.sawRoot&&T.closedRoot&&!T.strict)?(T.state=q.OPEN_WAKA,T.startTagPosition=T.position):(!i(X)&&(!T.sawRoot||T.closedRoot)&&Re(T,"Text data outside of root node."),X==="&"?T.state=q.TEXT_ENTITY:T.textNode+=X);continue;case q.SCRIPT:X==="<"?T.state=q.SCRIPT_ENDING:T.script+=X;continue;case q.SCRIPT_ENDING:X==="/"?T.state=q.CLOSE_TAG:(T.script+="<"+X,T.state=q.SCRIPT);continue;case q.OPEN_WAKA:if(X==="!")T.state=q.SGML_DECL,T.sgmlDecl="";else if(!i(X))if(G(P,X))T.state=q.OPEN_TAG,T.tagName=X;else if(X==="/")T.state=q.CLOSE_TAG,T.tagName="";else if(X==="?")T.state=q.PROC_INST,T.procInstName=T.procInstBody="";else{if(Re(T,"Unencoded <"),T.startTagPosition+1<T.position){var Se=T.position-T.startTagPosition;X=new Array(Se).join(" ")+X}T.textNode+="<"+X,T.state=q.TEXT}continue;case q.SGML_DECL:(T.sgmlDecl+X).toUpperCase()===C?(de(T,"onopencdata"),T.state=q.CDATA,T.sgmlDecl="",T.cdata=""):T.sgmlDecl+X==="--"?(T.state=q.COMMENT,T.comment="",T.sgmlDecl=""):(T.sgmlDecl+X).toUpperCase()===R?(T.state=q.DOCTYPE,(T.doctype||T.sawRoot)&&Re(T,"Inappropriately located doctype declaration"),T.doctype="",T.sgmlDecl=""):X===">"?(de(T,"onsgmldeclaration",T.sgmlDecl),T.sgmlDecl="",T.state=q.TEXT):(x(X)&&(T.state=q.SGML_DECL_QUOTED),T.sgmlDecl+=X);continue;case q.SGML_DECL_QUOTED:X===T.q&&(T.state=q.SGML_DECL,T.q=""),T.sgmlDecl+=X;continue;case q.DOCTYPE:X===">"?(T.state=q.TEXT,de(T,"ondoctype",T.doctype),T.doctype=!0):(T.doctype+=X,X==="["?T.state=q.DOCTYPE_DTD:x(X)&&(T.state=q.DOCTYPE_QUOTED,T.q=X));continue;case q.DOCTYPE_QUOTED:T.doctype+=X,X===T.q&&(T.q="",T.state=q.DOCTYPE);continue;case q.DOCTYPE_DTD:T.doctype+=X,X==="]"?T.state=q.DOCTYPE:x(X)&&(T.state=q.DOCTYPE_DTD_QUOTED,T.q=X);continue;case q.DOCTYPE_DTD_QUOTED:T.doctype+=X,X===T.q&&(T.state=q.DOCTYPE_DTD,T.q="");continue;case q.COMMENT:X==="-"?T.state=q.COMMENT_ENDING:T.comment+=X;continue;case q.COMMENT_ENDING:X==="-"?(T.state=q.COMMENT_ENDED,T.comment=Ie(T.opt,T.comment),T.comment&&de(T,"oncomment",T.comment),T.comment=""):(T.comment+="-"+X,T.state=q.COMMENT);continue;case q.COMMENT_ENDED:X!==">"?(Re(T,"Malformed comment"),T.comment+="--"+X,T.state=q.COMMENT):T.state=q.TEXT;continue;case q.CDATA:X==="]"?T.state=q.CDATA_ENDING:T.cdata+=X;continue;case q.CDATA_ENDING:X==="]"?T.state=q.CDATA_ENDING_2:(T.cdata+="]"+X,T.state=q.CDATA);continue;case q.CDATA_ENDING_2:X===">"?(T.cdata&&de(T,"oncdata",T.cdata),de(T,"onclosecdata"),T.cdata="",T.state=q.TEXT):X==="]"?T.cdata+="]":(T.cdata+="]]"+X,T.state=q.CDATA);continue;case q.PROC_INST:X==="?"?T.state=q.PROC_INST_ENDING:i(X)?T.state=q.PROC_INST_BODY:T.procInstName+=X;continue;case q.PROC_INST_BODY:if(!T.procInstBody&&i(X))continue;X==="?"?T.state=q.PROC_INST_ENDING:T.procInstBody+=X;continue;case q.PROC_INST_ENDING:X===">"?(de(T,"onprocessinginstruction",{name:T.procInstName,body:T.procInstBody}),T.procInstName=T.procInstBody="",T.state=q.TEXT):(T.procInstBody+="?"+X,T.state=q.PROC_INST_BODY);continue;case q.OPEN_TAG:G(S,X)?T.tagName+=X:(Ue(T),X===">"?Ne(T):X==="/"?T.state=q.OPEN_TAG_SLASH:(i(X)||Re(T,"Invalid character in tag name"),T.state=q.ATTRIB));continue;case q.OPEN_TAG_SLASH:X===">"?(Ne(T,!0),rt(T)):(Re(T,"Forward-slash in opening tag not followed by >"),T.state=q.ATTRIB);continue;case q.ATTRIB:if(i(X))continue;X===">"?Ne(T):X==="/"?T.state=q.OPEN_TAG_SLASH:G(P,X)?(T.attribName=X,T.attribValue="",T.state=q.ATTRIB_NAME):Re(T,"Invalid attribute name");continue;case q.ATTRIB_NAME:X==="="?T.state=q.ATTRIB_VALUE:X===">"?(Re(T,"Attribute without value"),T.attribValue=T.attribName,Me(T),Ne(T)):i(X)?T.state=q.ATTRIB_NAME_SAW_WHITE:G(S,X)?T.attribName+=X:Re(T,"Invalid attribute name");continue;case q.ATTRIB_NAME_SAW_WHITE:if(X==="=")T.state=q.ATTRIB_VALUE;else{if(i(X))continue;Re(T,"Attribute without value"),T.tag.attributes[T.attribName]="",T.attribValue="",de(T,"onattribute",{name:T.attribName,value:""}),T.attribName="",X===">"?Ne(T):G(P,X)?(T.attribName=X,T.state=q.ATTRIB_NAME):(Re(T,"Invalid attribute name"),T.state=q.ATTRIB)}continue;case q.ATTRIB_VALUE:if(i(X))continue;x(X)?(T.q=X,T.state=q.ATTRIB_VALUE_QUOTED):(Re(T,"Unquoted attribute value"),T.state=q.ATTRIB_VALUE_UNQUOTED,T.attribValue=X);continue;case q.ATTRIB_VALUE_QUOTED:if(X!==T.q){X==="&"?T.state=q.ATTRIB_VALUE_ENTITY_Q:T.attribValue+=X;continue}Me(T),T.q="",T.state=q.ATTRIB_VALUE_CLOSED;continue;case q.ATTRIB_VALUE_CLOSED:i(X)?T.state=q.ATTRIB:X===">"?Ne(T):X==="/"?T.state=q.OPEN_TAG_SLASH:G(P,X)?(Re(T,"No whitespace between attributes"),T.attribName=X,T.attribValue="",T.state=q.ATTRIB_NAME):Re(T,"Invalid attribute name");continue;case q.ATTRIB_VALUE_UNQUOTED:if(!U(X)){X==="&"?T.state=q.ATTRIB_VALUE_ENTITY_U:T.attribValue+=X;continue}Me(T),X===">"?Ne(T):T.state=q.ATTRIB;continue;case q.CLOSE_TAG:if(T.tagName)X===">"?rt(T):G(S,X)?T.tagName+=X:T.script?(T.script+="</"+T.tagName,T.tagName="",T.state=q.SCRIPT):(i(X)||Re(T,"Invalid tagname in closing tag"),T.state=q.CLOSE_TAG_SAW_WHITE);else{if(i(X))continue;Z(P,X)?T.script?(T.script+="</"+X,T.state=q.SCRIPT):Re(T,"Invalid tagname in closing tag."):T.tagName=X}continue;case q.CLOSE_TAG_SAW_WHITE:if(i(X))continue;X===">"?rt(T):Re(T,"Invalid characters in closing tag");continue;case q.TEXT_ENTITY:case q.ATTRIB_VALUE_ENTITY_Q:case q.ATTRIB_VALUE_ENTITY_U:var z,K;switch(T.state){case q.TEXT_ENTITY:z=q.TEXT,K="textNode";break;case q.ATTRIB_VALUE_ENTITY_Q:z=q.ATTRIB_VALUE_QUOTED,K="attribValue";break;case q.ATTRIB_VALUE_ENTITY_U:z=q.ATTRIB_VALUE_UNQUOTED,K="attribValue";break}X===";"?(T[K]+=pt(T),T.entity="",T.state=z):G(T.entity.length?p:h,X)?T.entity+=X:(Re(T,"Invalid character in entity name"),T[K]+="&"+T.entity+X,T.entity="",T.state=z);continue;default:throw new Error(T,"Unknown state: "+T.state)}return T.position>=T.bufferCheckPosition&&f(T),T}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var F=String.fromCharCode,T=Math.floor,Y=function(){var X=16384,ye=[],Se,z,K=-1,M=arguments.length;if(!M)return"";for(var v="";++K<M;){var E=Number(arguments[K]);if(!isFinite(E)||E<0||E>1114111||T(E)!==E)throw RangeError("Invalid code point: "+E);E<=65535?ye.push(E):(E-=65536,Se=(E>>10)+55296,z=E%1024+56320,ye.push(Se,z)),(K+1===M||ye.length>X)&&(v+=F.apply(null,ye),ye.length=0)}return v};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Y,configurable:!0,writable:!0}):String.fromCodePoint=Y}()})(typeof l>"u"?this.sax={}:l)}).call(this)}).call(this,e("buffer").Buffer)},{buffer:3,stream:11,string_decoder:27}],11:[function(e,n,l){n.exports=s;var r=e("events").EventEmitter,o=e("inherits");o(s,r),s.Readable=e("readable-stream/lib/_stream_readable.js"),s.Writable=e("readable-stream/lib/_stream_writable.js"),s.Duplex=e("readable-stream/lib/_stream_duplex.js"),s.Transform=e("readable-stream/lib/_stream_transform.js"),s.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),s.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),s.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),s.Stream=s;function s(){r.call(this)}s.prototype.pipe=function(a,f){var d=this;function u(L){a.writable&&a.write(L)===!1&&d.pause&&d.pause()}d.on("data",u);function w(){d.readable&&d.resume&&d.resume()}a.on("drain",w),!a._isStdio&&(!f||f.end!==!1)&&(d.on("end",A),d.on("close",b));var _=!1;function A(){_||(_=!0,a.end())}function b(){_||(_=!0,typeof a.destroy=="function"&&a.destroy())}function C(L){if(R(),r.listenerCount(this,"error")===0)throw L}d.on("error",C),a.on("error",C);function R(){d.removeListener("data",u),a.removeListener("drain",w),d.removeListener("end",A),d.removeListener("close",b),d.removeListener("error",C),a.removeListener("error",C),d.removeListener("end",R),d.removeListener("close",R),a.removeListener("close",R)}return d.on("end",R),d.on("close",R),a.on("close",R),a.emit("pipe",d),a}},{events:5,inherits:12,"readable-stream/lib/_stream_duplex.js":14,"readable-stream/lib/_stream_passthrough.js":15,"readable-stream/lib/_stream_readable.js":16,"readable-stream/lib/_stream_transform.js":17,"readable-stream/lib/_stream_writable.js":18,"readable-stream/lib/internal/streams/end-of-stream.js":22,"readable-stream/lib/internal/streams/pipeline.js":24}],12:[function(e,n,l){typeof Object.create=="function"?n.exports=function(o,s){s&&(o.super_=s,o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(o,s){if(s){o.super_=s;var a=function(){};a.prototype=s.prototype,o.prototype=new a,o.prototype.constructor=o}}},{}],13:[function(e,n,l){function r(w,_){w.prototype=Object.create(_.prototype),w.prototype.constructor=w,w.__proto__=_}var o={};function s(w,_,A){A||(A=Error);function b(R,L,N){return typeof _=="string"?_:_(R,L,N)}var C=function(R){r(L,R);function L(N,j,P){return R.call(this,b(N,j,P))||this}return L}(A);C.prototype.name=A.name,C.prototype.code=w,o[w]=C}function a(w,_){if(Array.isArray(w)){var A=w.length;return w=w.map(function(b){return String(b)}),A>2?"one of ".concat(_," ").concat(w.slice(0,A-1).join(", "),", or ")+w[A-1]:A===2?"one of ".concat(_," ").concat(w[0]," or ").concat(w[1]):"of ".concat(_," ").concat(w[0])}else return"of ".concat(_," ").concat(String(w))}function f(w,_,A){return w.substr(0,_.length)===_}function d(w,_,A){return(A===void 0||A>w.length)&&(A=w.length),w.substring(A-_.length,A)===_}function u(w,_,A){return typeof A!="number"&&(A=0),A+_.length>w.length?!1:w.indexOf(_,A)!==-1}s("ERR_INVALID_OPT_VALUE",function(w,_){return'The value "'+_+'" is invalid for option "'+w+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(w,_,A){var b;typeof _=="string"&&f(_,"not ")?(b="must not be",_=_.replace(/^not /,"")):b="must be";var C;if(d(w," argument"))C="The ".concat(w," ").concat(b," ").concat(a(_,"type"));else{var R=u(w,".")?"property":"argument";C='The "'.concat(w,'" ').concat(R," ").concat(b," ").concat(a(_,"type"))}return C+=". Received type ".concat(typeof A),C},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(w){return"The "+w+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(w){return"Cannot call "+w+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(w){return"Unknown encoding: "+w},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n.exports.codes=o},{}],14:[function(e,n,l){(function(r){(function(){var o=Object.keys||function(b){var C=[];for(var R in b)C.push(R);return C};n.exports=w;var s=e("./_stream_readable"),a=e("./_stream_writable");e("inherits")(w,s);for(var f=o(a.prototype),d=0;d<f.length;d++){var u=f[d];w.prototype[u]||(w.prototype[u]=a.prototype[u])}function w(b){if(!(this instanceof w))return new w(b);s.call(this,b),a.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",_)))}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function _(){this._writableState.ended||r.nextTick(A,this)}function A(b){b.end()}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(C){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=C,this._writableState.destroyed=C)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":16,"./_stream_writable":18,_process:8,inherits:12}],15:[function(e,n,l){n.exports=o;var r=e("./_stream_transform");e("inherits")(o,r);function o(s){if(!(this instanceof o))return new o(s);r.call(this,s)}o.prototype._transform=function(s,a,f){f(null,s)}},{"./_stream_transform":17,inherits:12}],16:[function(e,n,l){(function(r,o){(function(){n.exports=pe;var s;pe.ReadableState=re,e("events").EventEmitter;var a=function(K,M){return K.listeners(M).length},f=e("./internal/streams/stream"),d=e("buffer").Buffer,u=o.Uint8Array||function(){};function w(z){return d.from(z)}function _(z){return d.isBuffer(z)||z instanceof u}var A=e("util"),b;A&&A.debuglog?b=A.debuglog("stream"):b=function(){};var C=e("./internal/streams/buffer_list"),R=e("./internal/streams/destroy"),L=e("./internal/streams/state"),N=L.getHighWaterMark,j=e("../errors").codes,P=j.ERR_INVALID_ARG_TYPE,S=j.ERR_STREAM_PUSH_AFTER_EOF,h=j.ERR_METHOD_NOT_IMPLEMENTED,p=j.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,i,x,U;e("inherits")(pe,f);var G=R.errorOrDestroy,Z=["error","close","destroy","pause","resume"];function q(z,K,M){if(typeof z.prependListener=="function")return z.prependListener(K,M);!z._events||!z._events[K]?z.on(K,M):Array.isArray(z._events[K])?z._events[K].unshift(M):z._events[K]=[M,z._events[K]]}function re(z,K,M){s=s||e("./_stream_duplex"),z=z||{},typeof M!="boolean"&&(M=K instanceof s),this.objectMode=!!z.objectMode,M&&(this.objectMode=this.objectMode||!!z.readableObjectMode),this.highWaterMark=N(this,z,"readableHighWaterMark",M),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.destroyed=!1,this.defaultEncoding=z.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,z.encoding&&(i||(i=e("string_decoder/").StringDecoder),this.decoder=new i(z.encoding),this.encoding=z.encoding)}function pe(z){if(s=s||e("./_stream_duplex"),!(this instanceof pe))return new pe(z);var K=this instanceof s;this._readableState=new re(z,this,K),this.readable=!0,z&&(typeof z.read=="function"&&(this._read=z.read),typeof z.destroy=="function"&&(this._destroy=z.destroy)),f.call(this)}Object.defineProperty(pe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),pe.prototype.destroy=R.destroy,pe.prototype._undestroy=R.undestroy,pe.prototype._destroy=function(z,K){K(z)},pe.prototype.push=function(z,K){var M=this._readableState,v;return M.objectMode?v=!0:typeof z=="string"&&(K=K||M.defaultEncoding,K!==M.encoding&&(z=d.from(z,K),K=""),v=!0),de(this,z,K,!1,v)},pe.prototype.unshift=function(z){return de(this,z,null,!0,!1)};function de(z,K,M,v,E){b("readableAddChunk",K);var H=z._readableState;if(K===null)H.reading=!1,Ue(z,H);else{var ne;if(E||(ne=Ie(H,K)),ne)G(z,ne);else if(H.objectMode||K&&K.length>0)if(typeof K!="string"&&!H.objectMode&&Object.getPrototypeOf(K)!==d.prototype&&(K=w(K)),v)H.endEmitted?G(z,new p):ve(z,H,K,!0);else if(H.ended)G(z,new S);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!M?(K=H.decoder.write(K),H.objectMode||K.length!==0?ve(z,H,K,!1):Ne(z,H)):ve(z,H,K,!1)}else v||(H.reading=!1,Ne(z,H))}return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function ve(z,K,M,v){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,z.emit("data",M)):(K.length+=K.objectMode?1:M.length,v?K.buffer.unshift(M):K.buffer.push(M),K.needReadable&&Ge(z)),Ne(z,K)}function Ie(z,K){var M;return!_(K)&&typeof K!="string"&&K!==void 0&&!z.objectMode&&(M=new P("chunk",["string","Buffer","Uint8Array"],K)),M}pe.prototype.isPaused=function(){return this._readableState.flowing===!1},pe.prototype.setEncoding=function(z){i||(i=e("string_decoder/").StringDecoder);var K=new i(z);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var M=this._readableState.buffer.head,v="";M!==null;)v+=K.write(M.data),M=M.next;return this._readableState.buffer.clear(),v!==""&&this._readableState.buffer.push(v),this._readableState.length=v.length,this};var De=1073741824;function Ye(z){return z>=De?z=De:(z--,z|=z>>>1,z|=z>>>2,z|=z>>>4,z|=z>>>8,z|=z>>>16,z++),z}function Re(z,K){return z<=0||K.length===0&&K.ended?0:K.objectMode?1:z!==z?K.flowing&&K.length?K.buffer.head.data.length:K.length:(z>K.highWaterMark&&(K.highWaterMark=Ye(z)),z<=K.length?z:K.ended?K.length:(K.needReadable=!0,0))}pe.prototype.read=function(z){b("read",z),z=parseInt(z,10);var K=this._readableState,M=z;if(z!==0&&(K.emittedReadable=!1),z===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return b("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?X(this):Ge(this),null;if(z=Re(z,K),z===0&&K.ended)return K.length===0&&X(this),null;var v=K.needReadable;b("need readable",v),(K.length===0||K.length-z<K.highWaterMark)&&(v=!0,b("length less than watermark",v)),K.ended||K.reading?(v=!1,b("reading or ended",v)):v&&(b("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(z=Re(M,K)));var E;return z>0?E=Y(z,K):E=null,E===null?(K.needReadable=K.length<=K.highWaterMark,z=0):(K.length-=z,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),M!==z&&K.ended&&X(this)),E!==null&&this.emit("data",E),E};function Ue(z,K){if(b("onEofChunk"),!K.ended){if(K.decoder){var M=K.decoder.end();M&&M.length&&(K.buffer.push(M),K.length+=K.objectMode?1:M.length)}K.ended=!0,K.sync?Ge(z):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,Me(z)))}}function Ge(z){var K=z._readableState;b("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(b("emitReadable",K.flowing),K.emittedReadable=!0,r.nextTick(Me,z))}function Me(z){var K=z._readableState;b("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&(K.length||K.ended)&&(z.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,T(z)}function Ne(z,K){K.readingMore||(K.readingMore=!0,r.nextTick(rt,z,K))}function rt(z,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var M=K.length;if(b("maybeReadMore read 0"),z.read(0),M===K.length)break}K.readingMore=!1}pe.prototype._read=function(z){G(this,new h("_read()"))},pe.prototype.pipe=function(z,K){var M=this,v=this._readableState;switch(v.pipesCount){case 0:v.pipes=z;break;case 1:v.pipes=[v.pipes,z];break;default:v.pipes.push(z);break}v.pipesCount+=1,b("pipe count=%d opts=%j",v.pipesCount,K);var E=(!K||K.end!==!1)&&z!==r.stdout&&z!==r.stderr,H=E?he:st;v.endEmitted?r.nextTick(H):M.once("end",H),z.on("unpipe",ne);function ne(dt,y){b("onunpipe"),dt===M&&y&&y.hasUnpiped===!1&&(y.hasUnpiped=!0,Pe())}function he(){b("onend"),z.end()}var we=pt(M);z.on("drain",we);var _e=!1;function Pe(){b("cleanup"),z.removeListener("close",at),z.removeListener("finish",It),z.removeListener("drain",we),z.removeListener("error",ft),z.removeListener("unpipe",ne),M.removeListener("end",he),M.removeListener("end",st),M.removeListener("data",it),_e=!0,v.awaitDrain&&(!z._writableState||z._writableState.needDrain)&&we()}M.on("data",it);function it(dt){b("ondata");var y=z.write(dt);b("dest.write",y),y===!1&&((v.pipesCount===1&&v.pipes===z||v.pipesCount>1&&Se(v.pipes,z)!==-1)&&!_e&&(b("false write response, pause",v.awaitDrain),v.awaitDrain++),M.pause())}function ft(dt){b("onerror",dt),st(),z.removeListener("error",ft),a(z,"error")===0&&G(z,dt)}q(z,"error",ft);function at(){z.removeListener("finish",It),st()}z.once("close",at);function It(){b("onfinish"),z.removeListener("close",at),st()}z.once("finish",It);function st(){b("unpipe"),M.unpipe(z)}return z.emit("pipe",M),v.flowing||(b("pipe resume"),M.resume()),z};function pt(z){return function(){var M=z._readableState;b("pipeOnDrain",M.awaitDrain),M.awaitDrain&&M.awaitDrain--,M.awaitDrain===0&&a(z,"data")&&(M.flowing=!0,T(z))}}pe.prototype.unpipe=function(z){var K=this._readableState,M={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return z&&z!==K.pipes?this:(z||(z=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,z&&z.emit("unpipe",this,M),this);if(!z){var v=K.pipes,E=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var H=0;H<E;H++)v[H].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=Se(K.pipes,z);return ne===-1?this:(K.pipes.splice(ne,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),z.emit("unpipe",this,M),this)},pe.prototype.on=function(z,K){var M=f.prototype.on.call(this,z,K),v=this._readableState;return z==="data"?(v.readableListening=this.listenerCount("readable")>0,v.flowing!==!1&&this.resume()):z==="readable"&&!v.endEmitted&&!v.readableListening&&(v.readableListening=v.needReadable=!0,v.flowing=!1,v.emittedReadable=!1,b("on readable",v.length,v.reading),v.length?Ge(this):v.reading||r.nextTick(je,this)),M},pe.prototype.addListener=pe.prototype.on,pe.prototype.removeListener=function(z,K){var M=f.prototype.removeListener.call(this,z,K);return z==="readable"&&r.nextTick(ut,this),M},pe.prototype.removeAllListeners=function(z){var K=f.prototype.removeAllListeners.apply(this,arguments);return(z==="readable"||z===void 0)&&r.nextTick(ut,this),K};function ut(z){var K=z._readableState;K.readableListening=z.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:z.listenerCount("data")>0&&z.resume()}function je(z){b("readable nexttick read 0"),z.read(0)}pe.prototype.resume=function(){var z=this._readableState;return z.flowing||(b("resume"),z.flowing=!z.readableListening,yt(this,z)),z.paused=!1,this};function yt(z,K){K.resumeScheduled||(K.resumeScheduled=!0,r.nextTick(F,z,K))}function F(z,K){b("resume",K.reading),K.reading||z.read(0),K.resumeScheduled=!1,z.emit("resume"),T(z),K.flowing&&!K.reading&&z.read(0)}pe.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function T(z){var K=z._readableState;for(b("flow",K.flowing);K.flowing&&z.read()!==null;);}pe.prototype.wrap=function(z){var K=this,M=this._readableState,v=!1;z.on("end",function(){if(b("wrapped end"),M.decoder&&!M.ended){var ne=M.decoder.end();ne&&ne.length&&K.push(ne)}K.push(null)}),z.on("data",function(ne){if(b("wrapped data"),M.decoder&&(ne=M.decoder.write(ne)),!(M.objectMode&&ne==null)&&!(!M.objectMode&&(!ne||!ne.length))){var he=K.push(ne);he||(v=!0,z.pause())}});for(var E in z)this[E]===void 0&&typeof z[E]=="function"&&(this[E]=function(he){return function(){return z[he].apply(z,arguments)}}(E));for(var H=0;H<Z.length;H++)z.on(Z[H],this.emit.bind(this,Z[H]));return this._read=function(ne){b("wrapped _read",ne),v&&(v=!1,z.resume())},this},typeof Symbol=="function"&&(pe.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=e("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),pe._fromList=Y,Object.defineProperty(pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Y(z,K){if(K.length===0)return null;var M;return K.objectMode?M=K.buffer.shift():!z||z>=K.length?(K.decoder?M=K.buffer.join(""):K.buffer.length===1?M=K.buffer.first():M=K.buffer.concat(K.length),K.buffer.clear()):M=K.buffer.consume(z,K.decoder),M}function X(z){var K=z._readableState;b("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,r.nextTick(ye,K,z))}function ye(z,K){if(b("endReadableNT",z.endEmitted,z.length),!z.endEmitted&&z.length===0&&(z.endEmitted=!0,K.readable=!1,K.emit("end"),z.autoDestroy)){var M=K._writableState;(!M||M.autoDestroy&&M.finished)&&K.destroy()}}typeof Symbol=="function"&&(pe.from=function(z,K){return U===void 0&&(U=e("./internal/streams/from")),U(pe,z,K)});function Se(z,K){for(var M=0,v=z.length;M<v;M++)if(z[M]===K)return M;return-1}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":13,"./_stream_duplex":14,"./internal/streams/async_iterator":19,"./internal/streams/buffer_list":20,"./internal/streams/destroy":21,"./internal/streams/from":23,"./internal/streams/state":25,"./internal/streams/stream":26,_process:8,buffer:3,events:5,inherits:12,"string_decoder/":27,util:2}],17:[function(e,n,l){n.exports=w;var r=e("../errors").codes,o=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,f=r.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(w,d);function u(b,C){var R=this._transformState;R.transforming=!1;var L=R.writecb;if(L===null)return this.emit("error",new s);R.writechunk=null,R.writecb=null,C!=null&&this.push(C),L(b);var N=this._readableState;N.reading=!1,(N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}function w(b){if(!(this instanceof w))return new w(b);d.call(this,b),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",_)}function _(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(C,R){A(b,C,R)}):A(this,null,null)}w.prototype.push=function(b,C){return this._transformState.needTransform=!1,d.prototype.push.call(this,b,C)},w.prototype._transform=function(b,C,R){R(new o("_transform()"))},w.prototype._write=function(b,C,R){var L=this._transformState;if(L.writecb=R,L.writechunk=b,L.writeencoding=C,!L.transforming){var N=this._readableState;(L.needTransform||N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}},w.prototype._read=function(b){var C=this._transformState;C.writechunk!==null&&!C.transforming?(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform)):C.needTransform=!0},w.prototype._destroy=function(b,C){d.prototype._destroy.call(this,b,function(R){C(R)})};function A(b,C,R){if(C)return b.emit("error",C);if(R!=null&&b.push(R),b._writableState.length)throw new f;if(b._transformState.transforming)throw new a;return b.push(null)}},{"../errors":13,"./_stream_duplex":14,inherits:12}],18:[function(e,n,l){(function(r,o){(function(){n.exports=re;function s(T){var Y=this;this.next=null,this.entry=null,this.finish=function(){F(Y,T)}}var a;re.WritableState=Z;var f={deprecate:e("util-deprecate")},d=e("./internal/streams/stream"),u=e("buffer").Buffer,w=o.Uint8Array||function(){};function _(T){return u.from(T)}function A(T){return u.isBuffer(T)||T instanceof w}var b=e("./internal/streams/destroy"),C=e("./internal/streams/state"),R=C.getHighWaterMark,L=e("../errors").codes,N=L.ERR_INVALID_ARG_TYPE,j=L.ERR_METHOD_NOT_IMPLEMENTED,P=L.ERR_MULTIPLE_CALLBACK,S=L.ERR_STREAM_CANNOT_PIPE,h=L.ERR_STREAM_DESTROYED,p=L.ERR_STREAM_NULL_VALUES,i=L.ERR_STREAM_WRITE_AFTER_END,x=L.ERR_UNKNOWN_ENCODING,U=b.errorOrDestroy;e("inherits")(re,d);function G(){}function Z(T,Y,X){a=a||e("./_stream_duplex"),T=T||{},typeof X!="boolean"&&(X=Y instanceof a),this.objectMode=!!T.objectMode,X&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=R(this,T,"writableHighWaterMark",X),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ye=T.decodeStrings===!1;this.decodeStrings=!ye,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Se){Ue(Y,Se)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}Z.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,X=[];Y;)X.push(Y),Y=Y.next;return X},function(){try{Object.defineProperty(Z.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(re,Symbol.hasInstance,{value:function(Y){return q.call(this,Y)?!0:this!==re?!1:Y&&Y._writableState instanceof Z}})):q=function(Y){return Y instanceof this};function re(T){a=a||e("./_stream_duplex");var Y=this instanceof a;if(!Y&&!q.call(re,this))return new re(T);this._writableState=new Z(T,this,Y),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),d.call(this)}re.prototype.pipe=function(){U(this,new S)};function pe(T,Y){var X=new i;U(T,X),r.nextTick(Y,X)}function de(T,Y,X,ye){var Se;return X===null?Se=new p:typeof X!="string"&&!Y.objectMode&&(Se=new N("chunk",["string","Buffer"],X)),Se?(U(T,Se),r.nextTick(ye,Se),!1):!0}re.prototype.write=function(T,Y,X){var ye=this._writableState,Se=!1,z=!ye.objectMode&&A(T);return z&&!u.isBuffer(T)&&(T=_(T)),typeof Y=="function"&&(X=Y,Y=null),z?Y="buffer":Y||(Y=ye.defaultEncoding),typeof X!="function"&&(X=G),ye.ending?pe(this,X):(z||de(this,ye,T,X))&&(ye.pendingcb++,Se=Ie(this,ye,z,T,Y,X)),Se},re.prototype.cork=function(){this._writableState.corked++},re.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,!T.writing&&!T.corked&&!T.bufferProcessing&&T.bufferedRequest&&Ne(this,T))},re.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new x(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(re.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ve(T,Y,X){return!T.objectMode&&T.decodeStrings!==!1&&typeof Y=="string"&&(Y=u.from(Y,X)),Y}Object.defineProperty(re.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ie(T,Y,X,ye,Se,z){if(!X){var K=ve(Y,ye,Se);ye!==K&&(X=!0,Se="buffer",ye=K)}var M=Y.objectMode?1:ye.length;Y.length+=M;var v=Y.length<Y.highWaterMark;if(v||(Y.needDrain=!0),Y.writing||Y.corked){var E=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:ye,encoding:Se,isBuf:X,callback:z,next:null},E?E.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else De(T,Y,!1,M,ye,Se,z);return v}function De(T,Y,X,ye,Se,z,K){Y.writelen=ye,Y.writecb=K,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new h("write")):X?T._writev(Se,Y.onwrite):T._write(Se,z,Y.onwrite),Y.sync=!1}function Ye(T,Y,X,ye,Se){--Y.pendingcb,X?(r.nextTick(Se,ye),r.nextTick(je,T,Y),T._writableState.errorEmitted=!0,U(T,ye)):(Se(ye),T._writableState.errorEmitted=!0,U(T,ye),je(T,Y))}function Re(T){T.writing=!1,T.writecb=null,T.length-=T.writelen,T.writelen=0}function Ue(T,Y){var X=T._writableState,ye=X.sync,Se=X.writecb;if(typeof Se!="function")throw new P;if(Re(X),Y)Ye(T,X,ye,Y,Se);else{var z=rt(X)||T.destroyed;!z&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest&&Ne(T,X),ye?r.nextTick(Ge,T,X,z,Se):Ge(T,X,z,Se)}}function Ge(T,Y,X,ye){X||Me(T,Y),Y.pendingcb--,ye(),je(T,Y)}function Me(T,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,T.emit("drain"))}function Ne(T,Y){Y.bufferProcessing=!0;var X=Y.bufferedRequest;if(T._writev&&X&&X.next){var ye=Y.bufferedRequestCount,Se=new Array(ye),z=Y.corkedRequestsFree;z.entry=X;for(var K=0,M=!0;X;)Se[K]=X,X.isBuf||(M=!1),X=X.next,K+=1;Se.allBuffers=M,De(T,Y,!0,Y.length,Se,"",z.finish),Y.pendingcb++,Y.lastBufferedRequest=null,z.next?(Y.corkedRequestsFree=z.next,z.next=null):Y.corkedRequestsFree=new s(Y),Y.bufferedRequestCount=0}else{for(;X;){var v=X.chunk,E=X.encoding,H=X.callback,ne=Y.objectMode?1:v.length;if(De(T,Y,!1,ne,v,E,H),X=X.next,Y.bufferedRequestCount--,Y.writing)break}X===null&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=X,Y.bufferProcessing=!1}re.prototype._write=function(T,Y,X){X(new j("_write()"))},re.prototype._writev=null,re.prototype.end=function(T,Y,X){var ye=this._writableState;return typeof T=="function"?(X=T,T=null,Y=null):typeof Y=="function"&&(X=Y,Y=null),T!=null&&this.write(T,Y),ye.corked&&(ye.corked=1,this.uncork()),ye.ending||yt(this,ye,X),this},Object.defineProperty(re.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rt(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function pt(T,Y){T._final(function(X){Y.pendingcb--,X&&U(T,X),Y.prefinished=!0,T.emit("prefinish"),je(T,Y)})}function ut(T,Y){!Y.prefinished&&!Y.finalCalled&&(typeof T._final=="function"&&!Y.destroyed?(Y.pendingcb++,Y.finalCalled=!0,r.nextTick(pt,T,Y)):(Y.prefinished=!0,T.emit("prefinish")))}function je(T,Y){var X=rt(Y);if(X&&(ut(T,Y),Y.pendingcb===0&&(Y.finished=!0,T.emit("finish"),Y.autoDestroy))){var ye=T._readableState;(!ye||ye.autoDestroy&&ye.endEmitted)&&T.destroy()}return X}function yt(T,Y,X){Y.ending=!0,je(T,Y),X&&(Y.finished?r.nextTick(X):T.once("finish",X)),Y.ended=!0,T.writable=!1}function F(T,Y,X){var ye=T.entry;for(T.entry=null;ye;){var Se=ye.callback;Y.pendingcb--,Se(X),ye=ye.next}Y.corkedRequestsFree.next=T}Object.defineProperty(re.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Y){this._writableState&&(this._writableState.destroyed=Y)}}),re.prototype.destroy=b.destroy,re.prototype._undestroy=b.undestroy,re.prototype._destroy=function(T,Y){Y(T)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":13,"./_stream_duplex":14,"./internal/streams/destroy":21,"./internal/streams/state":25,"./internal/streams/stream":26,_process:8,buffer:3,inherits:12,"util-deprecate":28}],19:[function(e,n,l){(function(r){(function(){var o;function s(h,p,i){return p in h?Object.defineProperty(h,p,{value:i,enumerable:!0,configurable:!0,writable:!0}):h[p]=i,h}var a=e("./end-of-stream"),f=Symbol("lastResolve"),d=Symbol("lastReject"),u=Symbol("error"),w=Symbol("ended"),_=Symbol("lastPromise"),A=Symbol("handlePromise"),b=Symbol("stream");function C(h,p){return{value:h,done:p}}function R(h){var p=h[f];if(p!==null){var i=h[b].read();i!==null&&(h[_]=null,h[f]=null,h[d]=null,p(C(i,!1)))}}function L(h){r.nextTick(R,h)}function N(h,p){return function(i,x){h.then(function(){if(p[w]){i(C(void 0,!0));return}p[A](i,x)},x)}}var j=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((o={get stream(){return this[b]},next:function(){var p=this,i=this[u];if(i!==null)return Promise.reject(i);if(this[w])return Promise.resolve(C(void 0,!0));if(this[b].destroyed)return new Promise(function(Z,q){r.nextTick(function(){p[u]?q(p[u]):Z(C(void 0,!0))})});var x=this[_],U;if(x)U=new Promise(N(x,this));else{var G=this[b].read();if(G!==null)return Promise.resolve(C(G,!1));U=new Promise(this[A])}return this[_]=U,U}},s(o,Symbol.asyncIterator,function(){return this}),s(o,"return",function(){var p=this;return new Promise(function(i,x){p[b].destroy(null,function(U){if(U){x(U);return}i(C(void 0,!0))})})}),o),j),S=function(p){var i,x=Object.create(P,(i={},s(i,b,{value:p,writable:!0}),s(i,f,{value:null,writable:!0}),s(i,d,{value:null,writable:!0}),s(i,u,{value:null,writable:!0}),s(i,w,{value:p._readableState.endEmitted,writable:!0}),s(i,A,{value:function(G,Z){var q=x[b].read();q?(x[_]=null,x[f]=null,x[d]=null,G(C(q,!1))):(x[f]=G,x[d]=Z)},writable:!0}),i));return x[_]=null,a(p,function(U){if(U&&U.code!=="ERR_STREAM_PREMATURE_CLOSE"){var G=x[d];G!==null&&(x[_]=null,x[f]=null,x[d]=null,G(U)),x[u]=U;return}var Z=x[f];Z!==null&&(x[_]=null,x[f]=null,x[d]=null,Z(C(void 0,!0))),x[w]=!0}),p.on("readable",L.bind(null,x)),x};n.exports=S}).call(this)}).call(this,e("_process"))},{"./end-of-stream":22,_process:8}],20:[function(e,n,l){function r(R,L){var N=Object.keys(R);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(R);L&&(j=j.filter(function(P){return Object.getOwnPropertyDescriptor(R,P).enumerable})),N.push.apply(N,j)}return N}function o(R){for(var L=1;L<arguments.length;L++){var N=arguments[L]!=null?arguments[L]:{};L%2?r(Object(N),!0).forEach(function(j){s(R,j,N[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(N)):r(Object(N)).forEach(function(j){Object.defineProperty(R,j,Object.getOwnPropertyDescriptor(N,j))})}return R}function s(R,L,N){return L in R?Object.defineProperty(R,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):R[L]=N,R}function a(R,L){if(!(R instanceof L))throw new TypeError("Cannot call a class as a function")}function f(R,L){for(var N=0;N<L.length;N++){var j=L[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(R,j.key,j)}}function d(R,L,N){return L&&f(R.prototype,L),R}var u=e("buffer"),w=u.Buffer,_=e("util"),A=_.inspect,b=A&&A.custom||"inspect";function C(R,L,N){w.prototype.copy.call(R,L,N)}n.exports=function(){function R(){a(this,R),this.head=null,this.tail=null,this.length=0}return d(R,[{key:"push",value:function(N){var j={data:N,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length}},{key:"unshift",value:function(N){var j={data:N,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var j=this.head,P=""+j.data;j=j.next;)P+=N+j.data;return P}},{key:"concat",value:function(N){if(this.length===0)return w.alloc(0);for(var j=w.allocUnsafe(N>>>0),P=this.head,S=0;P;)C(P.data,j,S),S+=P.data.length,P=P.next;return j}},{key:"consume",value:function(N,j){var P;return N<this.head.data.length?(P=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?P=this.shift():P=j?this._getString(N):this._getBuffer(N),P}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var j=this.head,P=1,S=j.data;for(N-=S.length;j=j.next;){var h=j.data,p=N>h.length?h.length:N;if(p===h.length?S+=h:S+=h.slice(0,N),N-=p,N===0){p===h.length?(++P,j.next?this.head=j.next:this.head=this.tail=null):(this.head=j,j.data=h.slice(p));break}++P}return this.length-=P,S}},{key:"_getBuffer",value:function(N){var j=w.allocUnsafe(N),P=this.head,S=1;for(P.data.copy(j),N-=P.data.length;P=P.next;){var h=P.data,p=N>h.length?h.length:N;if(h.copy(j,j.length-N,0,p),N-=p,N===0){p===h.length?(++S,P.next?this.head=P.next:this.head=this.tail=null):(this.head=P,P.data=h.slice(p));break}++S}return this.length-=S,j}},{key:b,value:function(N,j){return A(this,o({},j,{depth:0,customInspect:!1}))}}]),R}()},{buffer:3,util:2}],21:[function(e,n,l){(function(r){(function(){function o(w,_){var A=this,b=this._readableState&&this._readableState.destroyed,C=this._writableState&&this._writableState.destroyed;return b||C?(_?_(w):w&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(d,this,w)):r.nextTick(d,this,w)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(w||null,function(R){!_&&R?A._writableState?A._writableState.errorEmitted?r.nextTick(a,A):(A._writableState.errorEmitted=!0,r.nextTick(s,A,R)):r.nextTick(s,A,R):_?(r.nextTick(a,A),_(R)):r.nextTick(a,A)}),this)}function s(w,_){d(w,_),a(w)}function a(w){w._writableState&&!w._writableState.emitClose||w._readableState&&!w._readableState.emitClose||w.emit("close")}function f(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function d(w,_){w.emit("error",_)}function u(w,_){var A=w._readableState,b=w._writableState;A&&A.autoDestroy||b&&b.autoDestroy?w.destroy(_):w.emit("error",_)}n.exports={destroy:o,undestroy:f,errorOrDestroy:u}}).call(this)}).call(this,e("_process"))},{_process:8}],22:[function(e,n,l){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(d){var u=!1;return function(){if(!u){u=!0;for(var w=arguments.length,_=new Array(w),A=0;A<w;A++)_[A]=arguments[A];d.apply(this,_)}}}function s(){}function a(d){return d.setHeader&&typeof d.abort=="function"}function f(d,u,w){if(typeof u=="function")return f(d,null,u);u||(u={}),w=o(w||s);var _=u.readable||u.readable!==!1&&d.readable,A=u.writable||u.writable!==!1&&d.writable,b=function(){d.writable||R()},C=d._writableState&&d._writableState.finished,R=function(){A=!1,C=!0,_||w.call(d)},L=d._readableState&&d._readableState.endEmitted,N=function(){_=!1,L=!0,A||w.call(d)},j=function(p){w.call(d,p)},P=function(){var p;if(_&&!L)return(!d._readableState||!d._readableState.ended)&&(p=new r),w.call(d,p);if(A&&!C)return(!d._writableState||!d._writableState.ended)&&(p=new r),w.call(d,p)},S=function(){d.req.on("finish",R)};return a(d)?(d.on("complete",R),d.on("abort",P),d.req?S():d.on("request",S)):A&&!d._writableState&&(d.on("end",b),d.on("close",b)),d.on("end",N),d.on("finish",R),u.error!==!1&&d.on("error",j),d.on("close",P),function(){d.removeListener("complete",R),d.removeListener("abort",P),d.removeListener("request",S),d.req&&d.req.removeListener("finish",R),d.removeListener("end",b),d.removeListener("close",b),d.removeListener("finish",R),d.removeListener("end",N),d.removeListener("error",j),d.removeListener("close",P)}}n.exports=f},{"../../../errors":13}],23:[function(e,n,l){n.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],24:[function(e,n,l){var r;function o(R){var L=!1;return function(){L||(L=!0,R.apply(void 0,arguments))}}var s=e("../../../errors").codes,a=s.ERR_MISSING_ARGS,f=s.ERR_STREAM_DESTROYED;function d(R){if(R)throw R}function u(R){return R.setHeader&&typeof R.abort=="function"}function w(R,L,N,j){j=o(j);var P=!1;R.on("close",function(){P=!0}),r===void 0&&(r=e("./end-of-stream")),r(R,{readable:L,writable:N},function(h){if(h)return j(h);P=!0,j()});var S=!1;return function(h){if(!P&&!S){if(S=!0,u(R))return R.abort();if(typeof R.destroy=="function")return R.destroy();j(h||new f("pipe"))}}}function _(R){R()}function A(R,L){return R.pipe(L)}function b(R){return!R.length||typeof R[R.length-1]!="function"?d:R.pop()}function C(){for(var R=arguments.length,L=new Array(R),N=0;N<R;N++)L[N]=arguments[N];var j=b(L);if(Array.isArray(L[0])&&(L=L[0]),L.length<2)throw new a("streams");var P,S=L.map(function(h,p){var i=p<L.length-1,x=p>0;return w(h,i,x,function(U){P||(P=U),U&&S.forEach(_),!i&&(S.forEach(_),j(P))})});return L.reduce(A)}n.exports=C},{"../../../errors":13,"./end-of-stream":22}],25:[function(e,n,l){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function o(a,f,d){return a.highWaterMark!=null?a.highWaterMark:f?a[d]:null}function s(a,f,d,u){var w=o(f,u,d);if(w!=null){if(!(isFinite(w)&&Math.floor(w)===w)||w<0){var _=u?d:"highWaterMark";throw new r(_,w)}return Math.floor(w)}return a.objectMode?16:16*1024}n.exports={getHighWaterMark:s}},{"../../../errors":13}],26:[function(e,n,l){n.exports=e("events").EventEmitter},{events:5}],27:[function(e,n,l){var r=e("safe-buffer").Buffer,o=r.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(S){if(!S)return"utf8";for(var h;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(h)return;S=(""+S).toLowerCase(),h=!0}}function a(S){var h=s(S);if(typeof h!="string"&&(r.isEncoding===o||!o(S)))throw new Error("Unknown encoding: "+S);return h||S}l.StringDecoder=f;function f(S){this.encoding=a(S);var h;switch(this.encoding){case"utf16le":this.text=C,this.end=R,h=4;break;case"utf8":this.fillLast=_,h=4;break;case"base64":this.text=L,this.end=N,h=3;break;default:this.write=j,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(h)}f.prototype.write=function(S){if(S.length===0)return"";var h,p;if(this.lastNeed){if(h=this.fillLast(S),h===void 0)return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<S.length?h?h+this.text(S,p):this.text(S,p):h||""},f.prototype.end=b,f.prototype.text=A,f.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function d(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function u(S,h,p){var i=h.length-1;if(i<p)return 0;var x=d(h[i]);return x>=0?(x>0&&(S.lastNeed=x-1),x):--i<p||x===-2?0:(x=d(h[i]),x>=0?(x>0&&(S.lastNeed=x-2),x):--i<p||x===-2?0:(x=d(h[i]),x>=0?(x>0&&(x===2?x=0:S.lastNeed=x-3),x):0))}function w(S,h,p){if((h[0]&192)!==128)return S.lastNeed=0,"�";if(S.lastNeed>1&&h.length>1){if((h[1]&192)!==128)return S.lastNeed=1,"�";if(S.lastNeed>2&&h.length>2&&(h[2]&192)!==128)return S.lastNeed=2,"�"}}function _(S){var h=this.lastTotal-this.lastNeed,p=w(this,S);if(p!==void 0)return p;if(this.lastNeed<=S.length)return S.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,h,0,S.length),this.lastNeed-=S.length}function A(S,h){var p=u(this,S,h);if(!this.lastNeed)return S.toString("utf8",h);this.lastTotal=p;var i=S.length-(p-this.lastNeed);return S.copy(this.lastChar,0,i),S.toString("utf8",h,i)}function b(S){var h=S&&S.length?this.write(S):"";return this.lastNeed?h+"�":h}function C(S,h){if((S.length-h)%2===0){var p=S.toString("utf16le",h);if(p){var i=p.charCodeAt(p.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",h,S.length-1)}function R(S){var h=S&&S.length?this.write(S):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return h+this.lastChar.toString("utf16le",0,p)}return h}function L(S,h){var p=(S.length-h)%3;return p===0?S.toString("base64",h):(this.lastNeed=3-p,this.lastTotal=3,p===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",h,S.length-p))}function N(S){var h=S&&S.length?this.write(S):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function j(S){return S.toString(this.encoding)}function P(S){return S&&S.length?this.write(S):""}},{"safe-buffer":9}],28:[function(e,n,l){(function(r){(function(){n.exports=o;function o(a,f){if(s("noDeprecation"))return a;var d=!1;function u(){if(!d){if(s("throwDeprecation"))throw new Error(f);s("traceDeprecation")?console.trace(f):console.warn(f),d=!0}return a.apply(this,arguments)}return u}function s(a){try{if(!r.localStorage)return!1}catch{return!1}var f=r.localStorage[a];return f==null?!1:String(f).toLowerCase()==="true"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],29:[function(e,n,l){n.exports={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}},{}],30:[function(e,n,l){var r=e("./xml2js"),o=e("./xml2json"),s=e("./js2xml"),a=e("./json2xml");n.exports={xml2js:r,xml2json:o,js2xml:s,json2xml:a}},{"./js2xml":31,"./json2xml":32,"./xml2js":34,"./xml2json":35}],31:[function(e,n,l){var r=e("./options-helper"),o=e("./array-helper").isArray,s,a;function f(p){var i=r.copyOptions(p);return r.ensureFlagExists("ignoreDeclaration",i),r.ensureFlagExists("ignoreInstruction",i),r.ensureFlagExists("ignoreAttributes",i),r.ensureFlagExists("ignoreText",i),r.ensureFlagExists("ignoreComment",i),r.ensureFlagExists("ignoreCdata",i),r.ensureFlagExists("ignoreDoctype",i),r.ensureFlagExists("compact",i),r.ensureFlagExists("indentText",i),r.ensureFlagExists("indentCdata",i),r.ensureFlagExists("indentAttributes",i),r.ensureFlagExists("indentInstruction",i),r.ensureFlagExists("fullTagEmptyElement",i),r.ensureFlagExists("noQuotesForNativeAttributes",i),r.ensureSpacesExists(i),typeof i.spaces=="number"&&(i.spaces=Array(i.spaces+1).join(" ")),r.ensureKeyExists("declaration",i),r.ensureKeyExists("instruction",i),r.ensureKeyExists("attributes",i),r.ensureKeyExists("text",i),r.ensureKeyExists("comment",i),r.ensureKeyExists("cdata",i),r.ensureKeyExists("doctype",i),r.ensureKeyExists("type",i),r.ensureKeyExists("name",i),r.ensureKeyExists("elements",i),r.checkFnExists("doctype",i),r.checkFnExists("instruction",i),r.checkFnExists("cdata",i),r.checkFnExists("comment",i),r.checkFnExists("text",i),r.checkFnExists("instructionName",i),r.checkFnExists("elementName",i),r.checkFnExists("attributeName",i),r.checkFnExists("attributeValue",i),r.checkFnExists("attributes",i),r.checkFnExists("fullTagEmptyElement",i),i}function d(p,i,x){return(!x&&p.spaces?`
`:"")+Array(i+1).join(p.spaces)}function u(p,i,x){if(i.ignoreAttributes)return"";"attributesFn"in i&&(p=i.attributesFn(p,a,s));var U,G,Z,q,re=[];for(U in p)p.hasOwnProperty(U)&&p[U]!==null&&p[U]!==void 0&&(q=i.noQuotesForNativeAttributes&&typeof p[U]!="string"?"":'"',G=""+p[U],G=G.replace(/"/g,"&quot;"),Z="attributeNameFn"in i?i.attributeNameFn(U,G,a,s):U,re.push(i.spaces&&i.indentAttributes?d(i,x+1,!1):" "),re.push(Z+"="+q+("attributeValueFn"in i?i.attributeValueFn(G,U,a,s):G)+q));return p&&Object.keys(p).length&&i.spaces&&i.indentAttributes&&re.push(d(i,x,!1)),re.join("")}function w(p,i,x){return s=p,a="xml",i.ignoreDeclaration?"":"<?xml"+u(p[i.attributesKey],i,x)+"?>"}function _(p,i,x){if(i.ignoreInstruction)return"";var U;for(U in p)if(p.hasOwnProperty(U))break;var G="instructionNameFn"in i?i.instructionNameFn(U,p[U],a,s):U;if(typeof p[U]=="object")return s=p,a=G,"<?"+G+u(p[U][i.attributesKey],i,x)+"?>";var Z=p[U]?p[U]:"";return"instructionFn"in i&&(Z=i.instructionFn(Z,U,a,s)),"<?"+G+(Z?" "+Z:"")+"?>"}function A(p,i){return i.ignoreComment?"":"<!--"+("commentFn"in i?i.commentFn(p,a,s):p)+"-->"}function b(p,i){return i.ignoreCdata?"":"<![CDATA["+("cdataFn"in i?i.cdataFn(p,a,s):p.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function C(p,i){return i.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in i?i.doctypeFn(p,a,s):p)+">"}function R(p,i){return i.ignoreText?"":(p=""+p,p=p.replace(/&amp;/g,"&"),p=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in i?i.textFn(p,a,s):p)}function L(p,i){var x;if(p.elements&&p.elements.length)for(x=0;x<p.elements.length;++x)switch(p.elements[x][i.typeKey]){case"text":if(i.indentText)return!0;break;case"cdata":if(i.indentCdata)return!0;break;case"instruction":if(i.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function N(p,i,x){s=p,a=p.name;var U=[],G="elementNameFn"in i?i.elementNameFn(p.name,p):p.name;U.push("<"+G),p[i.attributesKey]&&U.push(u(p[i.attributesKey],i,x));var Z=p[i.elementsKey]&&p[i.elementsKey].length||p[i.attributesKey]&&p[i.attributesKey]["xml:space"]==="preserve";return Z||("fullTagEmptyElementFn"in i?Z=i.fullTagEmptyElementFn(p.name,p):Z=i.fullTagEmptyElement),Z?(U.push(">"),p[i.elementsKey]&&p[i.elementsKey].length&&(U.push(j(p[i.elementsKey],i,x+1)),s=p,a=p.name),U.push(i.spaces&&L(p,i)?`
`+Array(x+1).join(i.spaces):""),U.push("</"+G+">")):U.push("/>"),U.join("")}function j(p,i,x,U){return p.reduce(function(G,Z){var q=d(i,x,U&&!G);switch(Z.type){case"element":return G+q+N(Z,i,x);case"comment":return G+q+A(Z[i.commentKey],i);case"doctype":return G+q+C(Z[i.doctypeKey],i);case"cdata":return G+(i.indentCdata?q:"")+b(Z[i.cdataKey],i);case"text":return G+(i.indentText?q:"")+R(Z[i.textKey],i);case"instruction":var re={};return re[Z[i.nameKey]]=Z[i.attributesKey]?Z:Z[i.instructionKey],G+(i.indentInstruction?q:"")+_(re,i,x)}},"")}function P(p,i,x){var U;for(U in p)if(p.hasOwnProperty(U))switch(U){case i.parentKey:case i.attributesKey:break;case i.textKey:if(i.indentText||x)return!0;break;case i.cdataKey:if(i.indentCdata||x)return!0;break;case i.instructionKey:if(i.indentInstruction||x)return!0;break;case i.doctypeKey:case i.commentKey:return!0;default:return!0}return!1}function S(p,i,x,U,G){s=p,a=i;var Z="elementNameFn"in x?x.elementNameFn(i,p):i;if(typeof p>"u"||p===null||p==="")return"fullTagEmptyElementFn"in x&&x.fullTagEmptyElementFn(i,p)||x.fullTagEmptyElement?"<"+Z+"></"+Z+">":"<"+Z+"/>";var q=[];if(i){if(q.push("<"+Z),typeof p!="object")return q.push(">"+R(p,x)+"</"+Z+">"),q.join("");p[x.attributesKey]&&q.push(u(p[x.attributesKey],x,U));var re=P(p,x,!0)||p[x.attributesKey]&&p[x.attributesKey]["xml:space"]==="preserve";if(re||("fullTagEmptyElementFn"in x?re=x.fullTagEmptyElementFn(i,p):re=x.fullTagEmptyElement),re)q.push(">");else return q.push("/>"),q.join("")}return q.push(h(p,x,U+1,!1)),s=p,a=i,i&&q.push((G?d(x,U,!1):"")+"</"+Z+">"),q.join("")}function h(p,i,x,U){var G,Z,q,re=[];for(Z in p)if(p.hasOwnProperty(Z))for(q=o(p[Z])?p[Z]:[p[Z]],G=0;G<q.length;++G){switch(Z){case i.declarationKey:re.push(w(q[G],i,x));break;case i.instructionKey:re.push((i.indentInstruction?d(i,x,U):"")+_(q[G],i,x));break;case i.attributesKey:case i.parentKey:break;case i.textKey:re.push((i.indentText?d(i,x,U):"")+R(q[G],i));break;case i.cdataKey:re.push((i.indentCdata?d(i,x,U):"")+b(q[G],i));break;case i.doctypeKey:re.push(d(i,x,U)+C(q[G],i));break;case i.commentKey:re.push(d(i,x,U)+A(q[G],i));break;default:re.push(d(i,x,U)+S(q[G],Z,i,x,P(q[G],i)))}U=U&&!re.length}return re.join("")}n.exports=function(p,i){i=f(i);var x=[];return s=p,a="_root_",i.compact?x.push(h(p,i,0,!0)):(p[i.declarationKey]&&x.push(w(p[i.declarationKey],i,0)),p[i.elementsKey]&&p[i.elementsKey].length&&x.push(j(p[i.elementsKey],i,0,!x.length))),x.join("")}},{"./array-helper":29,"./options-helper":33}],32:[function(e,n,l){(function(r){(function(){var o=e("./js2xml.js");n.exports=function(s,a){s instanceof r&&(s=s.toString());var f=null;if(typeof s=="string")try{f=JSON.parse(s)}catch{throw new Error("The JSON structure is invalid")}else f=s;return o(f,a)}}).call(this)}).call(this,e("buffer").Buffer)},{"./js2xml.js":31,buffer:3}],33:[function(e,n,l){var r=e("./array-helper").isArray;n.exports={copyOptions:function(o){var s,a={};for(s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);return a},ensureFlagExists:function(o,s){(!(o in s)||typeof s[o]!="boolean")&&(s[o]=!1)},ensureSpacesExists:function(o){(!("spaces"in o)||typeof o.spaces!="number"&&typeof o.spaces!="string")&&(o.spaces=0)},ensureAlwaysArrayExists:function(o){(!("alwaysArray"in o)||typeof o.alwaysArray!="boolean"&&!r(o.alwaysArray))&&(o.alwaysArray=!1)},ensureKeyExists:function(o,s){(!(o+"Key"in s)||typeof s[o+"Key"]!="string")&&(s[o+"Key"]=s.compact?"_"+o:o)},checkFnExists:function(o,s){return o+"Fn"in s}}},{"./array-helper":29}],34:[function(e,n,l){var r=e("sax"),o=e("./options-helper"),s=e("./array-helper").isArray,a,f;function d(S){return a=o.copyOptions(S),o.ensureFlagExists("ignoreDeclaration",a),o.ensureFlagExists("ignoreInstruction",a),o.ensureFlagExists("ignoreAttributes",a),o.ensureFlagExists("ignoreText",a),o.ensureFlagExists("ignoreComment",a),o.ensureFlagExists("ignoreCdata",a),o.ensureFlagExists("ignoreDoctype",a),o.ensureFlagExists("compact",a),o.ensureFlagExists("alwaysChildren",a),o.ensureFlagExists("addParent",a),o.ensureFlagExists("trim",a),o.ensureFlagExists("nativeType",a),o.ensureFlagExists("nativeTypeAttributes",a),o.ensureFlagExists("sanitize",a),o.ensureFlagExists("instructionHasAttributes",a),o.ensureFlagExists("captureSpacesBetweenElements",a),o.ensureAlwaysArrayExists(a),o.ensureKeyExists("declaration",a),o.ensureKeyExists("instruction",a),o.ensureKeyExists("attributes",a),o.ensureKeyExists("text",a),o.ensureKeyExists("comment",a),o.ensureKeyExists("cdata",a),o.ensureKeyExists("doctype",a),o.ensureKeyExists("type",a),o.ensureKeyExists("name",a),o.ensureKeyExists("elements",a),o.ensureKeyExists("parent",a),o.checkFnExists("doctype",a),o.checkFnExists("instruction",a),o.checkFnExists("cdata",a),o.checkFnExists("comment",a),o.checkFnExists("text",a),o.checkFnExists("instructionName",a),o.checkFnExists("elementName",a),o.checkFnExists("attributeName",a),o.checkFnExists("attributeValue",a),o.checkFnExists("attributes",a),a}function u(S){var h=Number(S);if(!isNaN(h))return h;var p=S.toLowerCase();return p==="true"?!0:p==="false"?!1:S}function w(S,h){var p;if(a.compact){if(!f[a[S+"Key"]]&&(s(a.alwaysArray)?a.alwaysArray.indexOf(a[S+"Key"])!==-1:a.alwaysArray)&&(f[a[S+"Key"]]=[]),f[a[S+"Key"]]&&!s(f[a[S+"Key"]])&&(f[a[S+"Key"]]=[f[a[S+"Key"]]]),S+"Fn"in a&&typeof h=="string"&&(h=a[S+"Fn"](h,f)),S==="instruction"&&("instructionFn"in a||"instructionNameFn"in a)){for(p in h)if(h.hasOwnProperty(p))if("instructionFn"in a)h[p]=a.instructionFn(h[p],p,f);else{var i=h[p];delete h[p],h[a.instructionNameFn(p,i,f)]=i}}s(f[a[S+"Key"]])?f[a[S+"Key"]].push(h):f[a[S+"Key"]]=h}else{f[a.elementsKey]||(f[a.elementsKey]=[]);var x={};if(x[a.typeKey]=S,S==="instruction"){for(p in h)if(h.hasOwnProperty(p))break;x[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(p,h,f):p,a.instructionHasAttributes?(x[a.attributesKey]=h[p][a.attributesKey],"instructionFn"in a&&(x[a.attributesKey]=a.instructionFn(x[a.attributesKey],p,f))):("instructionFn"in a&&(h[p]=a.instructionFn(h[p],p,f)),x[a.instructionKey]=h[p])}else S+"Fn"in a&&(h=a[S+"Fn"](h,f)),x[a[S+"Key"]]=h;a.addParent&&(x[a.parentKey]=f),f[a.elementsKey].push(x)}}function _(S){if("attributesFn"in a&&S&&(S=a.attributesFn(S,f)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&S){var h;for(h in S)if(S.hasOwnProperty(h)&&(a.trim&&(S[h]=S[h].trim()),a.nativeTypeAttributes&&(S[h]=u(S[h])),"attributeValueFn"in a&&(S[h]=a.attributeValueFn(S[h],h,f)),"attributeNameFn"in a)){var p=S[h];delete S[h],S[a.attributeNameFn(h,S[h],f)]=p}}return S}function A(S){var h={};if(S.body&&(S.name.toLowerCase()==="xml"||a.instructionHasAttributes)){for(var p=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,i;(i=p.exec(S.body))!==null;)h[i[1]]=i[2]||i[3]||i[4];h=_(h)}if(S.name.toLowerCase()==="xml"){if(a.ignoreDeclaration)return;f[a.declarationKey]={},Object.keys(h).length&&(f[a.declarationKey][a.attributesKey]=h),a.addParent&&(f[a.declarationKey][a.parentKey]=f)}else{if(a.ignoreInstruction)return;a.trim&&(S.body=S.body.trim());var x={};a.instructionHasAttributes&&Object.keys(h).length?(x[S.name]={},x[S.name][a.attributesKey]=h):x[S.name]=S.body,w("instruction",x)}}function b(S,h){var p;if(typeof S=="object"&&(h=S.attributes,S=S.name),h=_(h),"elementNameFn"in a&&(S=a.elementNameFn(S,f)),a.compact){if(p={},!a.ignoreAttributes&&h&&Object.keys(h).length){p[a.attributesKey]={};var i;for(i in h)h.hasOwnProperty(i)&&(p[a.attributesKey][i]=h[i])}!(S in f)&&(s(a.alwaysArray)?a.alwaysArray.indexOf(S)!==-1:a.alwaysArray)&&(f[S]=[]),f[S]&&!s(f[S])&&(f[S]=[f[S]]),s(f[S])?f[S].push(p):f[S]=p}else f[a.elementsKey]||(f[a.elementsKey]=[]),p={},p[a.typeKey]="element",p[a.nameKey]=S,!a.ignoreAttributes&&h&&Object.keys(h).length&&(p[a.attributesKey]=h),a.alwaysChildren&&(p[a.elementsKey]=[]),f[a.elementsKey].push(p);p[a.parentKey]=f,f=p}function C(S){a.ignoreText||!S.trim()&&!a.captureSpacesBetweenElements||(a.trim&&(S=S.trim()),a.nativeType&&(S=u(S)),a.sanitize&&(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),w("text",S))}function R(S){a.ignoreComment||(a.trim&&(S=S.trim()),w("comment",S))}function L(S){var h=f[a.parentKey];a.addParent||delete f[a.parentKey],f=h}function N(S){a.ignoreCdata||(a.trim&&(S=S.trim()),w("cdata",S))}function j(S){a.ignoreDoctype||(S=S.replace(/^ /,""),a.trim&&(S=S.trim()),w("doctype",S))}function P(S){S.note=S}n.exports=function(S,h){var p=r.parser(!0,{}),i={};if(f=i,a=d(h),p.opt={strictEntities:!0},p.onopentag=b,p.ontext=C,p.oncomment=R,p.onclosetag=L,p.onerror=P,p.oncdata=N,p.ondoctype=j,p.onprocessinginstruction=A,p.write(S).close(),i[a.elementsKey]){var x=i[a.elementsKey];delete i[a.elementsKey],i[a.elementsKey]=x,delete i.text}return i}},{"./array-helper":29,"./options-helper":33,sax:10}],35:[function(e,n,l){var r=e("./options-helper"),o=e("./xml2js");function s(a){var f=r.copyOptions(a);return r.ensureSpacesExists(f),f}n.exports=function(a,f){var d,u,w,_;return d=s(f),u=o(a,d),_="compact"in d&&d.compact?"_parent":"parent","addParent"in d&&d.addParent?w=JSON.stringify(u,function(A,b){return A===_?"_":b},d.spaces):w=JSON.stringify(u,null,d.spaces),w.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},{"./options-helper":33,"./xml2js":34}],36:[function(e,n,l){var r,o;o=function(s,a,f){var d,u;return d=a*Math.min(f,1-f),u=function(w,_=(w+s*12)%12){return f-d*Math.max(Math.min(_-3,9-_,1),-1)},[u(0),u(8),u(4)].map(function(w){return w})},r=["red","green","blue","hue","saturation","lightness","value","cyan","magenta","yellow","key","alpha","x","y","z","l","a","b"],n.exports=class{constructor(a){var f,d,u,w,_,A,b,C;for({red:this.red,green:this.green,blue:this.blue,hue:this.hue,saturation:this.saturation,value:this.value,lightness:this.lightness,cyan:d,magenta:A,yellow:C,key:w,alpha:this.alpha,name:this.name}=a,u=0,_=r.length;u<_;u++)if(f=r[u],a[f]!=null){if(!isFinite(a[f])||typeof a[f]!="number")throw new TypeError(`Color component option ${f} is not a finite number: ${JSON.stringify(a[f])}`);if(a[f]<0||a[f]>1)throw new TypeError(`Color component option ${f} outside range of [0,1]: ${a[f]}`)}if(b=function(){throw new TypeError(`Color constructor must be called with {red,green,blue} or {hue,saturation,value} or {hue,saturation,lightness} or {cyan,magenta,yellow,key} or {x,y,z} or {l,a,b}, ${function(){try{return`got ${JSON.stringify(a)}`}catch{return"got something that couldn't be displayed with JSON.stringify for this error message"}}()}`)},!(this.red!=null&&this.green!=null&&this.blue!=null))if(this.hue!=null&&this.saturation!=null){if(this.value!=null)this.lightness=(2-this.saturation)*this.value/2,this.saturation=this.saturation*this.value/(this.lightness<.5?this.lightness*2:2-this.lightness*2),isNaN(this.saturation)&&(this.saturation=0);else if(this.lightness==null){if(a.brightness!=null)throw new TypeError("{hue, saturation, brightness} not supported. Use {hue, saturation, value} instead for an equivalent color space");b()}[this.red,this.green,this.blue]=o(this.hue,this.saturation,this.lightness)}else{if(d!=null&&A!=null&&C!=null&&w!=null)throw new Error("CMYK color space is not currently supported");if(a.l!=null&&a.a!=null&&a.b!=null)throw new Error("L*a*b* color space is not currently supported");if(a.x!=null&&a.y!=null&&a.z!=null)throw new Error("XYZ color space is not currently supported");b()}}toString(){if(this.hue!=null)return this.alpha!=null?`hsla(${this.hue*360}, ${this.saturation*100}%, ${this.lightness*100}%, ${this.alpha})`:`hsl(${this.hue*360}, ${this.saturation*100}%, ${this.lightness*100}%)`;if(this.red!=null)return this.alpha!=null?`rgba(${this.red*255}, ${this.green*255}, ${this.blue*255}, ${this.alpha})`:`rgb(${this.red*255}, ${this.green*255}, ${this.blue*255})`}static is(a,f,d=1e-4){var u,w;return Math.abs(a.red-f.red)<d&&Math.abs(a.green-f.green)<d&&Math.abs(a.blue-f.blue)<d&&Math.abs(((u=a.alpha)!=null?u:1)-((w=f.alpha)!=null?w:1))<d}}},{}],37:[function(e,n,l){var r,o;r=e("./Color"),o=["r","g","b","h","s","l","v","x","y","z","a","b","c","m","y","k","red","green","blue","hue","saturation","lightness","value","cyan","magenta","yellow","key","alpha"],n.exports=class extends Array{constructor(...a){super(...a),this.name=void 0,this.description=void 0,this.numberOfColumns=void 0,this.geometrySpecifiedByFile=void 0}add(a){var f,d,u,w;for(d=0,u=o.length;d<u;d++)if(f=o[d],a[f]!=null){if(!isFinite(a[f])||typeof a[f]!="number")throw new TypeError(`palette.add() component option ${f} is not a finite number: ${JSON.stringify(a[f])}`);if(a[f]<0||a[f]>1)throw new TypeError(`palette.add() component option ${f} outside range of [0,1]: ${a[f]}`)}return w=a instanceof r?a:new r(a),this.push(w)}}},{"./Color":36}],38:[function(e,n,l){var r,o,s,a,f;f=e("jdataview"),o=e("../Palette"),r=2**16-1,s=Object.freeze({RGB:0,HSB:1,CMYK:2,PANTONE:3,FOCOLTONE:4,TRUMATCH:5,TOYO:6,LAB:7,GRAYSCALE:8,WIDE_CMYK:9,HKS:10,DIC:11,TOTAL_INK:12,MONITOR_RGB:13,DUOTONE:14,OPACITY:15,WEB:16,GRAY_FLOAT:17,RGB_FLOAT:18,OPACITY_FLOAT:19,0:"RGB",1:"HSB",2:"CMYK",3:"PANTONE",4:"FOCOLTONE",5:"TRUMATCH",6:"TOYO",7:"LAB",8:"GRAYSCALE",9:"WIDE_CMYK",10:"HKS",11:"DIC",12:"TOTAL_INK",13:"MONITOR_RGB",14:"DUOTONE",15:"OPACITY",16:"WEB",17:"GRAY_FLOAT",18:"RGB_FLOAT",19:"OPACITY_FLOAT"}),a=function(d,u,w){var _,A,b;for(w&&(u-=1),b="",_=0,A=u;0<=A?_<A:_>A;0<=A?_++:_--)b+=String.fromCharCode(d.getUint16());return w&&d.getUint16(),b},n.exports.read_adobe_color_swatch=function({data:d}){var u,w,_,A,b,C,R,L,N,j,P,S,h;if(N=new o,h=new f(d),j=function(p){var i,x,U,G,Z,q,re;switch(i=h.getUint16(),G=h.getUint16()/r,Z=h.getUint16()/r,q=h.getUint16()/r,re=h.getUint16()/r,p?(h.getUint16(),x=h.getUint16(),U=a(h,x,!0)):U=void 0,i){case s.RGB:return N.add({red:G,green:Z,blue:q,name:U});case s.HSB:return N.add({hue:G,saturation:Z,value:q,name:U});case s.CMYK:case s.WIDE_CMYK:return N.add({cyan:G,magenta:Z,yellow:q,key:re,name:U});case s.LAB:return N.add({l:G,a:Z,b:q,name:U});case s.GRAYSCALE:return N.add({red:G,green:G,blue:G,name:U})}},u=h.getUint16(),L=h.getUint16(),u!==1)throw new Error("Not an Adobe Color Swatch file");if(b=4,_=b+L*(5*2),h.byteLength<=_){for(C=0,P=L;0<=P?C<P:C>P;0<=P?C++:C--)j(!1);return N}if(h.seek(_),A=h.getUint16(),w=h.getUint16(),A!==2)throw new Error("Not an Adobe Color Swatch file v2");if(w!==L)throw new Error("Number of colors mismatch between ACO v1 and v2 sections");for(R=0,S=L;0<=S?R<S:R>S;0<=S?R++:R--)j(!0);return N},n.exports.write_adobe_color_swatch=function(d){var u,w,_,A,b,C,R,L,N,j,P;for(P=function(S,h){var p,i,x,U,G,Z,q,re,pe,de,ve,Ie;for(de=(ve=S.name)!=null?ve:S.toString(),i=s.RGB,G=[S.red,S.green,S.blue,0],Ie=2+G.length*2,h&&(Ie+=4+(de.length+1)*2),x=new f(Ie),x.writeUint16(i),Z=0,re=G.length;Z<re;Z++)U=G[Z],x.writeUint16(U*r);if(h){for(x.writeUint16(0),x.writeUint16(de.length+1),q=0,pe=de.length;q<pe;q++)p=de[q],x.writeUint16(p.charCodeAt(0));x.writeUint16(0)}return x.buffer},u=function(){var S,h,p;for(p=[],S=0,h=d.length;S<h;S++)A=d[S],p.push(P(A,!1));return p}(),w=function(){var S,h,p;for(p=[],S=0,h=d.length;S<h;S++)A=d[S],p.push(P(A,!0));return p}(),b=4+u.reduce(function(S,h){return S+h.byteLength},0)+2+2+w.reduce(function(S,h){return S+h.byteLength},0),C=new f(b),C.writeUint16(1),C.writeUint16(d.length),R=0,N=u.length;R<N;R++)_=u[R],C.writeBytes(new Uint8Array(_));for(C.writeUint16(2),C.writeUint16(d.length),L=0,j=w.length;L<j;L++)_=w[L],C.writeBytes(new Uint8Array(_));return C.buffer},n.exports.read_adobe_swatch_exchange=function({data:d}){var u,w,_,A,b,C,R,L,N,j,P,S,h,p,i,x,U,G,Z;if(x=new o,G=new f(d),G.getString(4)!=="ASEF")throw new Error("Not an Adobe Swatch Exchange file");for(G.getUint32(),i=G.getUint32(),_=49153,w=49154,u=1,A="CMYK",C="RGB ",b="GRAY",Z=[],S=0,U=i;0<=U?S<U:S>U;0<=U?S++:S--){switch(N=G.getUint16(),L=G.getUint32(),R=G.tell()+L,N){case _:p=G.getUint16(),h=a(G,p,!0),Z.push({name:h});break;case w:Z.pop();break;case u:switch(p=G.getUint16(),h=a(G,p,!0),j=G.getString(4),j){case A:x.add({cyan:G.getFloat32(),magenta:G.getFloat32(),yellow:G.getFloat32(),key:G.getFloat32(),name:h});break;case C:x.add({red:G.getFloat32(),green:G.getFloat32(),blue:G.getFloat32(),name:h});break;case b:P=G.getFloat32(),x.add({red:P,green:P,blue:P,name:h})}G.getUint16()}G.seek(R)}return x},n.exports.write_adobe_swatch_exchange=function(d){var u,w,_,A,b,C,R,L,N,j,P,S,h,p,i,x,U,G,Z,q,re,pe,de;for(u=1,_="RGB ",w=0,L=[],re=0,h=0,x=d.length;h<x;h++){for(P=d[h],Z=(q=P.name)!=null?q:P.toString(),C=u,N=2+(Z.length+1)*2+4+3*4+2,b=6+N,R=f(b),R.writeUint16(C),R.writeUint32(N),R.writeUint16(Z.length+1),p=0,U=Z.length;p<U;p++)j=Z[p],R.writeUint16(j.charCodeAt(0));R.writeUint16(0),R.writeString(_),R.writeFloat32(P.red),R.writeFloat32(P.green),R.writeFloat32(P.blue),R.writeUint16(w),L.push(R.buffer),re+=b}for(S=12+re,de=new f(S),de.writeString("ASEF"),pe=1,de.writeUint32(pe),de.writeUint32(L.length),i=0,G=L.length;i<G;i++)A=L[i],de.writeBytes(new Uint8Array(A));return de.buffer},n.exports.read_adobe_color_book=function({data:d}){var u,w,_,A,b,C,R,L,N,j,P,S,h,p,i,x,U,G;if(h=new o,G=new f(d),x=G.getString(4),x!=="8BCB")throw new Error("Not an Adobe Color Book");if(U=G.getUint16(),U!==1)throw new Error(`Unknown Adobe Color Book version: ${U}?`);for(P=function(Z){var q;return q=Z.replace(/^"(.*)"$/,"$1"),q.startsWith("$$$")&&(q=q.split("=")[1]),q=q.replace("^R","®"),q=q.replace("^C","©"),q},G.getUint16(),A=P(a(G,G.getUint32(),!1)),L=P(a(G,G.getUint32(),!1)),N=P(a(G,G.getUint32(),!1)),_=P(a(G,G.getUint32())),C=G.getUint16(),G.getUint16(),G.getUint16(),j=G.getUint16(),S=0,i=C;0<=i?S<i:S>i;0<=i?S++:S--)switch(R=P(a(G,G.getUint32(),!1)),b=G.getString(6).trim(),b=b.replace(/^0*(\d+)$/,"$1"),b=b.replace("X","-"),b&&!R&&(p=b.lastIndexOf(N.trim()),R=p>=0?b.slice(0,p):b),u=function(Z){if(!(!R.trim()&&!b.trim()))return Z.name=L+R+N,h.add(Z)},w=function(){throw new Error(`Color space #${j} (${s[j]}) not supported.`)},j){case 0:u({red:G.getUint8()/255,green:G.getUint8()/255,blue:G.getUint8()/255});break;case 1:u({hue:G.getUint8()/255,saturation:G.getUint8()/255,value:G.getUint8()/255});break;case 2:u({cyan:1-G.getUint8()/255,magenta:1-G.getUint8()/255,yellow:1-G.getUint8()/255,key:1-G.getUint8()/255});break;case 3:w();break;case 4:w();break;case 5:w();break;case 6:w();break;case 7:u({l:G.getUint8()/255,a:G.getUint8()/255,b:G.getUint8()/255});break;case 8:w();break;case 9:w();break;case 10:w();break;default:w()}return h.name=A,h.description=_,h}},{"../Palette":37,jdataview:7}],39:[function(e,n,l){var r,o;o=e("jdataview"),r=e("../Palette"),n.exports=function({data:s,fileExt:a}){var f,d,u,w;if(d=new r,w=new o(s),!((u=w.byteLength)===768||u===772||a==="act"))throw new Error(`file size must be 768 or 772 bytes (saw ${w.byteLength}), OR file extension must be '.act' (saw '.${a}')`);for(var f=0;f<256;f++)d.add({red:w.getUint8()/255,green:w.getUint8()/255,blue:w.getUint8()/255});return d.numberOfColumns=16,d},n.exports.write=function(s){var a,f,d;for(d=new o(256*3),a=f=0;f<256;a=++f)d.writeUint8(s[a]?Math.round(s[a].red*255):0),d.writeUint8(s[a]?Math.round(s[a].green*255):0),d.writeUint8(s[a]?Math.round(s[a].blue*255):0);return d.buffer}},{"../Palette":37,jdataview:7}],40:[function(e,n,l){var r,o;o=e("css.escape"),r=e("../Palette"),n.exports=function({fileContentString:s}){var a,f,d,u,w,_,A,b,C,R,L,N,j,P,S,h,p;for(C=0,d=0,w=s.length;d<w;d++)a=s[d],(a==="\0"||a===""||a===""||a===""||a===""||a===""||a===""||a==="\x07"||a==="\b"||a==="\v"||a==="\f"||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a==="\x1B"||a===""||a===""||a===""||a===""||a==="")&&C++;if(C>5)throw new Error("looks like a binary file");for(p=[L=new r,N=new r,S=new r,j=new r,P=new r,h=new r],f=function(i){return parseInt(i,16)},s.replace(/\#([0-9A-F]{3}|[0-9A-F]{6}|[0-9A-F]{4}|[0-9A-F]{8})(?![0-9A-F])/gim,function(i,x){return x.length>4?L.add({red:f(x[0]+x[1])/255,green:f(x[2]+x[3])/255,blue:f(x[4]+x[5])/255,alpha:x.length===8?f(x[6]+x[7])/255:void 0}):N.add({red:f(x[0]+x[0])/255,green:f(x[1]+x[1])/255,blue:f(x[2]+x[2])/255,alpha:x.length===4?f(x[3]+x[3])/255:void 0})}),s.replace(/rgb\(\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*\)/gim,function(i,x,U,G,Z,q,re){return S.add({red:Number(x)/(U==="%"?100:255),green:Number(G)/(Z==="%"?100:255),blue:Number(q)/(re==="%"?100:255)})}),s.replace(/rgba?\(\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\/)\s*([0-9]*\.?[0-9]+)(%?)\s*\)/gim,function(i,x,U,G,Z,q,re,pe,de){return h.add({red:Number(x)/(U==="%"?100:255),green:Number(G)/(Z==="%"?100:255),blue:Number(q)/(re==="%"?100:255),alpha:Number(pe)/(de==="%"?100:1)})}),s.replace(/hsl\(\s*([0-9]*\.?[0-9]+)(deg|rad|turn|)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*\)/gim,function(i,x,U,G,Z,q,re){return j.add({hue:Number(x)/(U==="rad"?2*Math.PI:U==="turn"?1:360),saturation:Number(G)/(Z==="%"?100:1),lightness:Number(q)/(re==="%"?100:1)})}),s.replace(/hsla?\(\s*([0-9]*\.?[0-9]+)(deg|rad|turn|)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\s)\s*([0-9]*\.?[0-9]+)(%?)\s*(?:,|\/)\s*([0-9]*\.?[0-9]+)(%?)\s*\)/gim,function(i,x,U,G,Z,q,re,pe,de){return P.add({hue:Number(x)/(U==="rad"?2*Math.PI:U==="turn"?1:360),saturation:Number(G)/(Z==="%"?100:1),lightness:Number(q)/(re==="%"?100:1),alpha:Number(pe)/(de==="%"?100:1)})}),A=[],u=0,_=p.length;u<_;u++)R=p[u],R.length>=A.length&&(A=R);if(b=A.length,b<4)throw new Error(["No colors found","Only one color found","Only a couple colors found","Only a few colors found"][b]+` (${b})`);return A},n.exports.write_css=function(s){return`:root {
	${s.map(function(a,f){return`--${a.name?o(a.name.replace(/\s/g,"-")):`color-${f+1}`}: ${a};`}).join(`
	`)}
}`},n.exports.write_styl=function(s){return s.map(function(a,f){return`${a.name?o(a.name.replace(/\s/g,"-")):`color-${f+1}`} = ${a};`}).join(`
`)},n.exports.write_less=function(s){return s.map(function(a,f){return`@${a.name?o(a.name.replace(/\s/g,"-")):`color-${f+1}`}: ${a};`}).join(`
`)},n.exports.write_scss=function(s){return s.map(function(a,f){return`$${a.name?o(a.name.replace(/\s/g,"-")):`color-${f+1}`}: ${a};`}).join(`
`)},n.exports.write_sass=function(s){return s.map(function(a,f){return`$${a.name?o(a.name.replace(/\s/g,"-")):`color-${f+1}`}: ${a}`}).join(`
`)}},{"../Palette":37,"css.escape":4}],41:[function(e,n,l){var r,o;o=e("jdataview"),r=e("../Palette"),n.exports=function({data:s,fileExt:a}){var f,d,u,w,_,A,b;if(a!=="cs")throw new Error(`ColorSchemer loader is only enabled when file extension is '.cs' (saw '.${a}' instead)`);for(_=new r,w=!0,b=new o(s,0,void 0,w),b.getUint16(),f=b.getUint16(),d=u=0,A=f;0<=A?u<A:u>A;d=0<=A?++u:--u)b.seek(8+d*26),_.add({red:b.getUint8()/255,green:b.getUint8()/255,blue:b.getUint8()/255});return _}},{"../Palette":37,jdataview:7}],42:[function(e,n,l){var r,o,s;r=e("../Palette"),o=function(a,f){var d,u,w,_,A,b;if(w=a.split(/\r?\n/),w[0]!==f)throw new Error(`Not a ${f}`);for(A=new r,u=0;(u+=1)<w.length;)if(d=w[u],!(d[0]==="#"||d==="")){if(_=d.match(/Name:\s*(.*)/),_){A.name=_[1];continue}if(_=d.match(/Columns:\s*(.*)/),_){A.numberOfColumns=Number(_[1]),A.geometrySpecifiedByFile=!0;continue}if(b=d.match(/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+)(?:\s+(.*))?$/),!b)throw new Error(`Line ${u+1} doesn't match pattern of red green blue name`);A.add({red:Number(b[1])/255,green:Number(b[2])/255,blue:Number(b[3])/255,name:b[4]})}return A},n.exports=function({fileContentString:a}){return o(a,"GIMP Palette")},s=function(a,f){return`${f||"GIMP Palette"}
Name: ${a.name||"Saved Colors"}
Columns: ${a.numberOfColumns||8}
#
${a.map(d=>{var u,w,_;return{red:_,green:w,blue:u}=d,`${[_,w,u].map(A=>`${Math.round(A*255)}`.padEnd(3," ")).join(" ")}   ${d.name||d}`}).join(`
`)}`},n.exports.write=function(a){return s(a,"GIMP Palette")},n.exports.extension="gpl",n.exports.write_gimp_or_kde_rgb_palette=s,n.exports.parse_gimp_or_kde_rgb_palette=o},{"../Palette":37}],43:[function(e,n,l){var r;r=e("../Palette"),n.exports=function({fileContentString:o}){var s,a,f,d,u,w;if(d=o.split(/\r?\n/),d[0]!=="Palette")throw new Error("Not a Homesite palette");if(!d[1].match(/Version [34]\.0/))throw new Error("Unsupported Homesite palette version");for(w=new r,s=0,a=d.length;s<a;s++)f=d[s],u=f.match(/(\d+)\s+(\d+)\s+(\d+)/),u&&w.add({red:Number(u[1])/255,green:Number(u[2])/255,blue:Number(u[3])/255});return w},n.exports.write=function(o){return`Palette
Version 4.0
-----------
${o.map(function(s){return`${Math.round(s.red*255)} ${Math.round(s.green*255)} ${Math.round(s.blue*255)}`}).join(`
`)}`}},{"../Palette":37}],44:[function(e,n,l){var r,o;({parse_gimp_or_kde_rgb_palette:r,write_gimp_or_kde_rgb_palette:o}=e("./GIMP")),n.exports=function({fileContentString:s}){return r(s,"KDE RGB Palette")},n.exports.write=function(s){return o(s,"KDE RGB Palette")},n.exports.extension="colors"},{"./GIMP":42}],45:[function(e,n,l){var r;r=e("../Palette"),n.exports=function({fileContentString:o}){var s,a,f,d,u,w,_;for(w=new r,s=function(A){return parseInt(A,16)},_=o.split(/\r?\n/),a=0,f=_.length;a<f;a++)d=_[a],u=d.match(/^([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i),u&&w.add({alpha:s(u[1])/255,red:s(u[2])/255,green:s(u[3])/255,blue:s(u[4])/255});return w},n.exports.write=function(o){var s,a,f;return a=function(d){var u;return u=Math.round(d*255).toString(16),u.length===1?`0${u}`:u},f=function(d){var u,w,_,A;return{alpha:u,red:A,green:_,blue:w}=d,u==null&&(u=1),[u,A,_,w].map(a).join("")},s=`Paint.NET Palette File
Lines that start with a semicolon are comments
Colors are written as 8-digit hexadecimal numbers: aarrggbb
For example, this would specify green: FF00FF00
The alpha ('aa') value specifies how transparent a color is. FF is fully opaque, 00 is fully transparent.
A palette must consist of ninety six (96) colors. If there are less than this, the remaining color
slots will be set to white (FFFFFFFF). If there are more, then the remaining colors will be ignored.

`,o.name&&(s+=`Palette Name: ${o.name}
`),o.description&&(s+=`Description: ${o.description}
`),s+=`Colors: ${o.length}
`,o.numberOfColumns&&(s+=`Columns: ${o.numberOfColumns}
`),s=`; ${s}`.replace(/\n/g,`
; `).replace(/\s*\n/g,`
`),`${s}
${o.map(f).join(`
`)}`}},{"../Palette":37}],46:[function(e,n,l){var r;r=e("../Palette"),n.exports=function({fileContentString:o}){var s,a,f,d,u,w,_;if(u=o.split(/[\n\r]+/m),u[0]!=="JASC-PAL")throw new Error("Not a JASC-PAL");if(u[1]!=="0100")throw new Error("Unknown JASC-PAL version");for(w=new r,s=a=0,f=u.length;a<f;s=++a)d=u[s],d!==""&&s>2&&(_=d.split(" "),w.add({red:Number(_[0])/255,green:Number(_[1])/255,blue:Number(_[2])/255}));return w},n.exports.write=function(o){return`JASC-PAL
0100
${o.length}
${o.map(function(s){return`${Math.round(s.red*255)} ${Math.round(s.green*255)} ${Math.round(s.blue*255)}`}).join(`
`)}`}},{"../Palette":37}],47:[function(e,n,l){var r,o;o=e("jdataview"),r=e("../Palette"),n.exports=function({data:s}){var a,f,d,u,w,_,A,b,C,R;if(u=!0,R=new o(s,0,void 0,u),b=R.getString(4),R.getUint32(),C=R.getString(4),b!=="RIFF")throw new Error("RIFF header not found; not a RIFF PAL file");if(C!=="PAL ")throw new Error(`RIFF header says this isn't a PAL file,
more of a sort of ${(C+"").trim()} file`);if(a=R.getString(4),R.getUint32(),w=R.getUint16(),f=R.getUint16(),a!=="data")throw new Error(`Data chunk not found (...'${a}'?)`);if(w!==768)throw new Error(`Unsupported PAL file format version: 0x${w.toString(16)}`);for(_=new r,d=0,A=f;0<=A?d<A:d>A;0<=A?d++:d--)_.add({red:R.getUint8()/255,green:R.getUint8()/255,blue:R.getUint8()/255}),R.getUint8();return _},n.exports.write=function(s){var a,f,d,u,w,_,A,b;for(f=4+4*s.length,d=8+f,u=12+d,b=!0,w=new o(u,0,void 0,b),w.writeString("RIFF"),w.writeUint32(d+4),w.writeString("PAL "),w.writeString("data"),w.writeUint32(f),w.writeUint16(768),w.writeUint16(s.length),_=0,A=s.length;_<A;_++)a=s[_],w.writeUint8(Math.round(a.red*255)),w.writeUint8(Math.round(a.green*255)),w.writeUint8(Math.round(a.blue*255)),w.writeUint8(0);return w.buffer}},{"../Palette":37,jdataview:7}],48:[function(e,n,l){var r,o;r=e("../Palette"),{parse_css_hex_color:o}=e("../helpers"),n.exports=function({fileContentString:s}){var a,f,d,u,w,_,A,b,C,R,L,N,j,P,S;for(L=s.split(/[\n\r]+/m),P=new r,_={set_name:function(h){return P.name=h},add_comments:function(h){return P.description==null&&(P.description=""),P.description.length>0&&(P.description+=`
`),P.description+=h},set_columns:function(h){return P.numberOfColumns=h,P.geometrySpecifiedByFile=!0},hexcolor:function(h,p){var i;return i=o("#"+h),i.name=p,P.add(i)},rgbcolor:function(h,p,i,x){return P.add({red:h/255,green:p/255,blue:i/255,name:x})},color:function([h,p,i,x]){switch(h){case"RGB":return P.add({red:p[0],green:p[1],blue:p[2],alpha:i,name:x});case"Grayscale":return P.add({red:p[0],green:p[0],blue:p[0],alpha:i,name:x});case"CMYK":return P.add({cyan:p[0],magenta:p[1],yellow:p[2],key:p[3],alpha:i,name:x});case"HSL":return P.add({hue:p[0],saturation:p[1],lightness:p[2],alpha:i,name:x})}}},S=function(h,p){var i,x,U,G,Z,q,re;for(i=[],x=0,Z=function(){var pe,de;if(de="",pe=h[x],pe!=="'"&&pe!=='"')throw new Error("Expected to start parsing string on a quote character");for(x+=1;x<h.length;){if(h[x]==="\\")x+=1,h[x]==="\\"?de+="\\":h[x]==="r"?de+="\r":h[x]==="n"?de+=`
`:h[x]==="t"?de+="	":h[x]==="v"?de+="\v":h[x]==="a"?de+="a":h[x]==="b"?de+="\b":h[x]==="'"?de+="'":h[x]==='"'?de+='"':h[x].match(/\d/)||h[x]==="x"||h[x]==="N"||h[x]==="u"||h[x]==="U"||(console.log(`Warning: unecessary escape in python string: \\${h[x]}`),de+=h[x]);else{if(h[x]===pe)return de;de+=h[x]}x+=1}throw new SyntaxError(`Expected end of string on line ${p}`)},G=function(){var pe;for(pe="";x<h.length&&h[x].match(/[\d\.]/);){pe+=h[x];x+=1}return x-=1,parseFloat(pe)},U=function(){var pe,de,ve;for(x+=1,ve=[];x<h.length;){if(h[x]==="u")if(x+=1,(pe=h[x])==="'"||pe==='"')ve.push(Z());else throw new SyntaxError(`Unexpected 'u${h.slice(x)}' on line ${p}`);else if((de=h[x])==="'"||de==='"')ve.push(Z());else if(h[x]==="[")ve.push(U());else if(h[x].match(/\d/))ve.push(G());else{if(h[x]==="]")return ve;if(h[x]!==","){if(h[x].match(/\S/))throw new SyntaxError(`Unexpected '${h.slice(x)}' on line ${p}`)}}x+=1}throw new SyntaxError(`Expected end of array on line ${p}`)};x<h.length;){if(h[x]==="u")if(x+=1,(q=h[x])==="'"||q==='"')i.push(Z());else throw new SyntaxError(`Unexpected 'u${h.slice(x)}' on line ${p}`);else if((re=h[x])==="'"||re==='"')i.push(Z());else if(h[x]==="[")i.push(U());else if(h[x].match(/\d/))i.push(G());else if(h[x]!==","){if(h[x].match(/\S/))throw new SyntaxError(`Unexpected '${h.slice(x)}' on line ${p}`)}x+=1}return i},R=A=0,b=L.length;A<b;R=++A)C=L[R],N=C.match(/([\w_]+)\((.*)\)/),N&&([a,w,d]=N,u=_[w],u&&(f=S(d,R+1),u(...f)));if(j=P.length,j<2)throw new Error(["No colors found","Only one color found"][j]+` (${j})`);return P},n.exports.write=function(s){var a,f,d,u,w,_,A,b,C,R,L,N,j,P,S;if(P=function(h){return`'${h.replace(/[\r\n]+/g," ").replace(/'/g,"\\'")}'`},S=`##sK1 palette
`,S+=`palette()
`,s.name&&(S+=`set_name(${P(s.name)})
`),s.source&&(S+=`set_source(${P(s.source)})
`),s.description)for(L=s.description.split(/\r?\n/g),w=0,b=L.length;w<b;w++)_=L[w],S+=`add_comments(${P(_)})
`;for(s.numberOfColumns&&(S+=`set_columns(${s.numberOfColumns})
`),A=0,C=s.length;A<C;A++)f=s[A],f.hue!=null?(d="HSL",u=[f.hue,f.saturation,f.lightness]):(d="RGB",u=[f.red,f.green,f.blue]),a=(N=f.alpha)!=null?N:1,R=(j=f.name)!=null?j:f.toString(),S+=`color([${P(d)}, [${u.join(", ")}], ${a}, ${P(R)}])
`;return S+=`palette_end()
`,S}},{"../Palette":37,"../helpers":56}],49:[function(e,n,l){var r;r=e("../Palette"),n.exports=function({fileContentString:o}){var s,a,f,d,u,w,_;if(u=o.split(/[\n\r]+/m),u[0]!=="##Sketch RGBPalette 0")throw new Error("Not a Skencil palette");for(w=new r,d=s=0,a=u.length;s<a;d=++s)if(f=u[d],!(f[0]==="#"||f==="")){if(_=f.match(/^\s*([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)(?:\s+(.*))?$/),!_)throw new Error(`Line ${d+1} doesn't match pattern of red green blue name`);w.add({red:Number(_[1]),green:Number(_[2]),blue:Number(_[3]),name:_[4]})}return w},n.exports.write=function(o){return`##Sketch RGBPalette 0
${o.map(function(s){var a;return`${s.red.toFixed(6)} ${s.green.toFixed(6)} ${s.blue.toFixed(6)} ${(a=s.name)!=null?a:s}`}).join(`
`)}`}},{"../Palette":37}],50:[function(e,n,l){var r,o;o=e("jdataview"),r=e("../Palette"),n.exports=function({data:s}){var a,f,d;if(f=new r,d=new o(s),d.byteLength!==768)throw new Error(`Wrong file size, must be 768 bytes long (not ${d.byteLength})`);for(var a=0;a<256;a++)f.add({red:d.getUint8()/255,green:d.getUint8()/255,blue:d.getUint8()/255});return f},n.exports.write=function(s){var a,f,d;for(d=new o(256*3),a=f=0;f<256;a=++f)d.writeUint8(s[a]?Math.round(s[a].red*255):0),d.writeUint8(s[a]?Math.round(s[a].green*255):0),d.writeUint8(s[a]?Math.round(s[a].blue*255):0);return d.buffer}},{"../Palette":37,jdataview:7}],51:[function(e,n,l){var r,o;o=e("jdataview"),r=e("../Palette"),n.exports=function({data:s}){var a,f,d;if(f=new r,d=new o(s),d.byteLength!==1024)throw new Error(`Wrong file size, must be 1024 bytes long (not ${d.byteLength})`);for(var a=0;a<256;a++)f.add({red:d.getUint8()/255,green:d.getUint8()/255,blue:d.getUint8()/255}),d.getUint8();return f.numberOfColumns=16,f},n.exports.write=function(s){var a,f,d;for(d=new o(256*4),a=f=0;f<256;a=++f)d.writeUint8(s[a]?Math.round(s[a].red*255):0),d.writeUint8(s[a]?Math.round(s[a].green*255):0),d.writeUint8(s[a]?Math.round(s[a].blue*255):0),d.writeUint8(0);return d.buffer}},{"../Palette":37,jdataview:7}],52:[function(e,n,l){var r,o,s,a;o=e("xml-js"),r=e("../Palette"),{parse_css_hex_color:s}=e("../helpers"),n.exports.read_soc=function({fileContentString:f}){var d,u,w,_,A,b,C,R,L,N,j,P,S,h;if(!f.match(/^\s*<\?\s*xml/i))throw new Error("not a StarOffice palette (no <?xml...?> declaration)");if(R=new r,L=o.xml2js(f,{compact:!1}),!((N=L.elements)!=null&&N.length))throw new Error("No XML elements found");for(j=L.elements,_=0,b=j.length;_<b;_++)if(w=j[_],(P=w.name)!=null&&P.match(/:color-table$/)&&w.elements)for(S=w.elements,A=0,C=S.length;A<C;A++)d=S[A],d.name==="draw:color"&&((h=d.attributes["draw:color"])!=null&&h.match(/#/))&&(u=s(d.attributes["draw:color"]),u.name=d.attributes["draw:name"],R.add(u));return R},a=function(f,d){var u,w,_;return w=function(A){var b;return b=Math.round(A*255).toString(16),b.length===1?`0${b}`:b},_=function(A){var b,C,R;return{red:R,green:C,blue:b}=A,"#"+[R,C,b].map(w).join("")},o.js2xml({declaration:{attributes:{version:"1.0",encoding:"UTF-8"}},elements:[{type:"element",name:d?"ooo:color-table":"office:color-table",attributes:d?{"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svg":"http://www.w3.org/2000/svg","xmlns:ooo":"http://openoffice.org/2004/office"}:{"xmlns:form":"http://openoffice.org/2000/form","xmlns:number":"http://openoffice.org/2000/datastyle","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:office":"http://openoffice.org/2000/office","xmlns:meta":"http://openoffice.org/2000/meta","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:svg":"http://www.w3.org/2000/svg","xmlns:dr3d":"http://openoffice.org/2000/dr3d","xmlns:text":"http://openoffice.org/2000/text","xmlns:style":"http://openoffice.org/2000/style","xmlns:script":"http://openoffice.org/2000/script","xmlns:chart":"http://openoffice.org/2000/chart","xmlns:draw":"http://openoffice.org/2000/drawing","xmlns:table":"http://openoffice.org/2000/table","xmlns:fo":"http://www.w3.org/1999/XSL/Format","xmlns:config":"http://openoffice.org/2001/config","xmlns:dc":"http://purl.org/dc/elements/1.1/"},elements:function(){var A,b,C;for(C=[],A=0,b=f.length;A<b;A++)u=f[A],C.push({type:"element",name:"draw:color",attributes:{"draw:name":u.name||u.toString(),"draw:color":_(u)}});return C}()}]},{spaces:"	"})},n.exports.write_staroffice_soc=function(f){return a(f,!1)},n.exports.write_libreoffice_soc=function(f){return a(f,!0)}},{"../Palette":37,"../helpers":56,"xml-js":30}],53:[function(e,n,l){var r,o,s;r=e("../Palette"),{parse_css_hex_color:o}=e("../helpers"),s=1.4,n.exports=function({fileContentString:a}){var f,d,u,w,_,A,b,C,R,L,N;if(!a.match(/^\s*{/))throw new Error("not sketchpalette JSON");if(L=JSON.parse(a),u=L.compatibleVersion,f=(N=L.colors)!=null?N:[],R=new r,u&&u>s)throw new Error(`Can't handle compatibleVersion of ${u}.`);if(!u||u<1.4)for(_=0,b=f.length;_<b;_++)w=f[_],R.add(o(w));else if(f.length>0)for(A=0,C=f.length;A<C;A++)d=f[A],R.add(d);return R},n.exports.write=function(a){return JSON.stringify({compatibleVersion:"1.4",pluginVersion:"1.4",colors:a.map(function(f){var d,u,w,_;return{red:_,green:w,blue:u,alpha:d}=f,d==null&&(d=1),{red:_,green:w,blue:u,alpha:d}})},null,"	")},n.exports.extension="sketchpalette"},{"../Palette":37,"../helpers":56}],54:[function(e,n,l){var r;r=e("../Palette"),n.exports=function({fileContentString:o}){var s,a,f,d,u,w,_,A,b,C,R,L,N;for(_=o.split(/[\n\r]+/m),R=[s=new r,L=new r],N=function(j,P,S){var h;if(h=j.match(S),h)return P.add({red:Number(h[1])/255,green:Number(h[2])/255,blue:Number(h[3])/255})},a=0,d=_.length;a<d;a++)w=_[a],N(w,s,/([0-9]*\.?[0-9]+),\s*([0-9]*\.?[0-9]+),\s*([0-9]*\.?[0-9]+)/),N(w,L,/([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)\s+([0-9]*\.?[0-9]+)/);for(A=[],f=0,u=R.length;f<u;f++)C=R[f],C.length>=A.length&&(A=C);if(b=A.length,b<4)throw new Error(["No colors found","Only one color found","Only a couple colors found","Only a few colors found"][b]+` (${b})`);return A.every(function(j){return j.red<=1/255&&j.green<=1/255&&j.blue<=1/255})&&A.forEach(function(j){return j.red*=255,j.green*=255,j.blue*=255}),A}},{"../Palette":37}],55:[function(e,n,l){var r,o,s;r=e("../Palette"),o=function(a){var f,d,u,w;return d={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},w={},f=a.split(/[\r\n]+/),u=null,f.forEach(function(_){var A;d.comment.test(_)||(d.param.test(_)?(A=_.match(d.param),u?w[u][A[1]]=A[2]:w[A[1]]=A[2]):d.section.test(_)?(A=_.match(d.section),w[A[1]]={},u=A[1]):_.length===0&&u&&(u=null))}),w},s=function(a){var f,d,u,w,_,A,b,C,R,L;if(L=o(a),f=L["Control Panel\\Colors"],!f)throw new Error("Invalid theme file, no [Control Panel\\Colors] section");C=new r;for(A in f)if(!A.match(/\W/)&&(u=f[A].split(" "),u.length===3)){for(w=_=0,b=u.length;_<b;w=++_)d=u[w],u[w]=parseInt(d,10);u.every(function(N){return isFinite(N)})&&C.add({red:u[0]/255,green:u[1]/255,blue:u[2]/255,name:A})}return C.name=(R=L.Theme)!=null?R.DisplayName:void 0,C},n.exports=function({fileContentString:a}){return s(a)}},{"../Palette":37}],56:[function(e,n,l){n.exports.parse_css_hex_color=function(r){var o,s,a,f;return a=function(d){return parseInt(d,16)},f=r.match(/\#([0-9A-F]{3}|[0-9A-F]{6}|[0-9A-F]{4}|[0-9A-F]{8})(?![0-9A-F])/im),[o,s]=f,s.length>4?{red:a(s[0]+s[1])/255,green:a(s[2]+s[3])/255,blue:a(s[4]+s[5])/255,alpha:s.length===8?a(s[6]+s[7])/255:void 0}:{red:a(s[0]+s[0])/255,green:a(s[1]+s[1])/255,blue:a(s[2]+s[2])/255,alpha:s.length===4?a(s[3]+s[3])/255:void 0}}},{}],57:[function(e,n,l){var r,o,s,a,f,d,u,w,_,A,b,C,R=[].splice;for(a=e("./Palette"),o=e("./Color"),s=class extends Error{constructor(N){var j;super(),this.errors=N,this.message="Some errors were encountered when loading:"+(function(){var P,S,h,p;for(h=this.errors,p=[],P=0,S=h.length;P<S;P++)j=h[P],p.push(`
	`+j.message);return p}).call(this)}},u={PAINT_SHOP_PRO_PALETTE:{name:"Paint Shop Pro palette",fileExtensions:["psppalette","pal"],readFromText:e("./formats/PaintShopPro"),write:e("./formats/PaintShopPro").write},RIFF_PALETTE:{name:"RIFF PAL",fileExtensions:["pal"],read:e("./formats/RIFF"),write:e("./formats/RIFF").write},COLORSCHEMER_PALETTE:{name:"ColorSchemer palette",fileExtensions:["cs"],read:e("./formats/ColorSchemer")},PAINTDOTNET_PALETTE:{name:"Paint.NET palette",fileExtensions:["txt"],readFromText:e("./formats/Paint.NET"),write:e("./formats/Paint.NET").write},GIMP_PALETTE:{name:"GIMP palette",fileExtensions:["gpl","gimp","colors"],readFromText:e("./formats/GIMP"),write:e("./formats/GIMP").write},KDE_RGB_PALETTE:{name:"KolourPaint palette",fileExtensions:["colors"],readFromText:e("./formats/KolourPaint"),write:e("./formats/KolourPaint").write},SKENCIL_PALETTE:{name:"Skencil palette",fileExtensions:["spl"],readFromText:e("./formats/SPL"),write:e("./formats/SPL").write},SKETCH_JSON_PALETTE:{name:"Sketch palette",fileExtensions:["sketchpalette"],readFromText:e("./formats/sketchpalette"),write:e("./formats/sketchpalette").write},SK1_PALETTE:{name:"sK1 palette",fileExtensions:["skp"],readFromText:e("./formats/SKP"),write:e("./formats/SKP").write},WINDOWS_THEME_COLORS:{name:"Windows desktop theme",fileExtensions:["theme","themepack"],readFromText:e("./formats/theme")},ADOBE_SWATCH_EXCHANGE_PALETTE:{name:"Adobe Swatch Exchange",fileExtensions:["ase"],read:e("./formats/Adobe").read_adobe_swatch_exchange,write:e("./formats/Adobe").write_adobe_swatch_exchange},ADOBE_COLOR_BOOK_PALETTE:{name:"Adobe Color Book",fileExtensions:["acb"],read:e("./formats/Adobe").read_adobe_color_book},STAROFFICE_PALETTE:{name:"StarOffice Colors",fileExtensions:["soc"],readFromText:e("./formats/StarOffice").read_soc,write:e("./formats/StarOffice").write_libreoffice_soc},CSS_VARIABLES:{name:"CSS variables",fileExtensions:["css"],write:e("./formats/CSS").write_css},SCSS_VARIABLES:{name:"SCSS variables",fileExtensions:["scss"],write:e("./formats/CSS").write_scss},SASS_VARIABLES:{name:"SASS variables",fileExtensions:["sass"],write:e("./formats/CSS").write_sass},LESS_VARIABLES:{name:"LESS variables",fileExtensions:["less"],write:e("./formats/CSS").write_less},STYLUS_VARIABLES:{name:"Stylus variables",fileExtensions:["styl"],write:e("./formats/CSS").write_styl},CSS_COLORS:{name:"CSS colors",fileExtensions:["css","scss","sass","less","styl","html","htm","svg","js","ts","xml","txt"],readFromText:e("./formats/CSS")},HOMESITE_PALETTE:{name:"Homesite palette",fileExtensions:["hpl"],readFromText:e("./formats/Homesite"),write:e("./formats/Homesite").write},ADOBE_COLOR_SWATCH_PALETTE:{name:"Adobe Color Swatch",fileExtensions:["aco"],read:e("./formats/Adobe").read_adobe_color_swatch,write:e("./formats/Adobe").write_adobe_color_swatch},ADOBE_COLOR_TABLE_PALETTE:{name:"Adobe Color Table",fileExtensions:["act"],read:e("./formats/AdobeColorTable"),write:e("./formats/AdobeColorTable").write},STARCRAFT_PALETTE:{name:"StarCraft palette",fileExtensions:["pal"],read:e("./formats/StarCraft"),write:e("./formats/StarCraft").write},STARCRAFT_PADDED:{name:"StarCraft terrain palette",fileExtensions:["wpe"],read:e("./formats/StarCraftPadded"),write:e("./formats/StarCraftPadded").write},TABULAR:{name:"tabular colors",fileExtensions:["csv","tsv","txt"],readFromText:e("./formats/tabular")}},C=Object.keys(u),w=0,_=C.length;w<_;w++)d=C[w],f=u[d],f.fileExtensionsPretty=`.${f.fileExtensions.join(", .")}`;b=function(L,N){var j,P,S,h,p,i,x,U,G,Z,q,re;for(L.fileContentString=typeof L.data=="string"?L.data:new TextDecoder().decode(L.data),G={},re=Object.keys(u),p=0,i=re.length;p<i;p++)d=re[p],u[d].fileExtensions.indexOf(L.fileExt)>-1&&(G[d]=!0);for(h=Object.keys(u),h.sort(function(pe,de){return(G[de]!=null)-(G[pe]!=null)}),S=[],U=0,x=h.length;U<x;U++)if(d=h[U],f=u[d],!!(f.read||f.readFromText)){try{if(f.readFromText?q=f.readFromText(L):q=f.read(L),q.length===0)throw q=null,new Error("no colors returned")}catch(pe){j=pe,Z=`failed to load ${L.fileName} as ${f.name}: ${j.message}`,P=new Error(Z),P.error=j,P.__PATCHED_LIB_TO_ADD_THIS__format=f,S.push(P)}if(q){q.confidence=G[d]!=null?.9:.01,N(null,q,f,G[d]!=null,{__errors_before_success:S});return}}N(new s(S))},A=function(L={}){var N,j;return(typeof L=="string"||L instanceof String)&&(L={filePath:L}),typeof File<"u"&&File!==null&&L instanceof File&&(L={file:L}),L.fileName==null&&(L.fileName=(N=(j=L.file)!=null?j.name:void 0)!=null?N:L.filePath?e("path").basename(L.filePath):void 0),L.fileExt==null&&(L.fileExt=`${L.fileName}`.split(".").pop()),L.fileExt=`${L.fileExt}`.toLowerCase(),L},r={Color:o,Palette:a,formats:u},r.loadPalette=function(L,N){var j,P;if(!L)throw new TypeError("parameters required: AnyPalette.loadPalette(options, function callback(error, palette){})");if(!N)throw new TypeError("callback required: AnyPalette.loadPalette(options, function callback(error, palette){})");if(L=A(L),L.data)return b(L,N);if(L.file){if(!(L.file instanceof File))throw new TypeError("options.file was passed but it is not a File");return j=new FileReader,j.onerror=function(){return N(j.error)},j.onload=function(){return L.data=j.result,b(L,N)},j.readAsArrayBuffer(L.file)}else{if(L.filePath!=null)return P=e("fs"),P.readFile(L.filePath,function(S,h){return S?N(S):(L.data=h,b(L,N))});throw new TypeError("either options.data or options.file or options.filePath must be passed")}},r.writePalette=function(L,N){return N==null&&(N=r.formats.GIMP_PALETTE),N.write(L)},r.uniqueColors=function(L,N){var j,P,S,h,p;for(p=new a,p.name=this.name,p.description=this.description,R.apply(p,[0,9e9].concat(L.slice(0))),j=0;j<p.length;){for(P=p[j],S=j+1;S<p.length;)h=p[S],o.is(P,h,N)&&(p.splice(S,1),S-=1),S+=1;j+=1}return p},n.exports=r,qr=r},{"./Color":36,"./Palette":37,"./formats/Adobe":38,"./formats/AdobeColorTable":39,"./formats/CSS":40,"./formats/ColorSchemer":41,"./formats/GIMP":42,"./formats/Homesite":43,"./formats/KolourPaint":44,"./formats/Paint.NET":45,"./formats/PaintShopPro":46,"./formats/RIFF":47,"./formats/SKP":48,"./formats/SPL":49,"./formats/StarCraft":50,"./formats/StarCraftPadded":51,"./formats/StarOffice":52,"./formats/sketchpalette":53,"./formats/tabular":54,"./formats/theme":55,fs:"fs",path:"path"}]},{},[57])(57)});const ui=qr;console.log("AnyPlatteLib",ui);console.log("JS 실행:","helpers.js");const Et=- - - - - - - -Math.PI+Math.PI-0,zi=new Date().getMonth()===5,Ke=$(window);function Ht(e){return'<span style="white-space: pre">???</span>'}function si(e,n,l){return`url(images/cursors/${e}.png) ${n.join(" ")}, ${l}`}const ht=function(n){return document.createElement(n)};function xs(e,n,l){let r;const o=function(){const s=this,a=arguments,f=()=>{r=null,e.apply(s,a)};clearTimeout(r),r=setTimeout(f,n)};return o.cancel=()=>{clearTimeout(r)},o}function Ki(e,n=5e4){const l={},r=[],o=(...s)=>{if(s.some(f=>f instanceof CanvasPattern))return e.apply(null,s);const a=JSON.stringify(s);if(l[a])return l[a];{const f=e.apply(null,s);if(l[a]=f,r.push(a),r.length>n){const d=r.shift();delete l[d]}return f}};return o.clear_memo_cache=()=>{for(const s of r)delete l[s];r.length=0},o}const io=e=>{const n=et(1,1);n.ctx.fillStyle=e,n.ctx.fillRect(0,0,1,1);const l=n.ctx.getImageData(0,0,1,1);return Array.from(l.data)},on=Ki(io);function Ts(e,n,l){const r=e.data,o=n.data;if(r.length!==o.length)return!1;for(let s=r.length,a=0;a<s;a++)if(r[a]!==o[a]&&Math.abs(r[a]-o[a])>l)return!1;return!0}function et(e,n){console.log("make canvas");const l=e,r=ht("canvas"),o=r.getContext("2d");return r.ctx=o,o.disable_image_smoothing=()=>{o.imageSmoothingEnabled=!1,o.imageSmoothingEnabled!==!1&&(o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1)},o.enable_image_smoothing=()=>{o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled!==!0&&(o.mozImageSmoothingEnabled=!0,o.webkitImageSmoothingEnabled=!0,o.msImageSmoothingEnabled=!0)},o.copy=s=>{r.width=s.naturalWidth||s.width,r.height=s.naturalHeight||s.height,o.disable_image_smoothing(),s instanceof ImageData?o.putImageData(s,0,0):o.drawImage(s,0,0)},e&&n?(r.width=e,r.height=n,o.disable_image_smoothing()):l&&o.copy(l),r}function Ot(e){const n=new Image;return n.src=`help/${e}`,n}function St(e){return Ot(e.help_icon)}function ro(e){return new Promise((n,l)=>{const r=new Image;r.onload=()=>{n(r)},r.onerror=()=>{l(new Error(`failed to load image from ${e}`))},r.src=e})}function ao(e){if(e.length===1)return St(e[0]);const n=et(16,16);return Promise.all(e.map(l=>ro(`help/${l.help_icon}`))).then(l=>{l.forEach((r,o)=>{const s=n.width/l.length,a=o*s,f=n.height,d=0;n.ctx.drawImage(r,a,d,s,f,a,d,s,f)})}),n}function Vi(e){let n,l;if(e.type=="touchmove"?(n=e.touches[0].clientX,l=e.touches[0].clientY):(n=e.clientX,l=e.clientY),n===void 0||l===void 0)throw new TypeError("clientX and clientY must be defined (not {x, y} or x, y or [x, y])");const r=window.globApp.canvas_bounding_client_rect;return{x:~~((n-r.left)/r.width*window.globAppstate.main_canvas.width),y:~~((l-r.top)/r.height*window.globAppstate.main_canvas.height)}}function Cr({x:e,y:n}){const l=window.globApp.canvas_bounding_client_rect;return{clientX:~~(e/window.globAppstate.main_canvas.width*l.width+l.left),clientY:~~(n/window.globAppstate.main_canvas.height*l.height+l.top)}}console.log("JS 실행:","$ToolWindow.js");function Wr(e){const n=make_window_supporting_scale({title:e,resizable:!1,maximizeButton:!1,minimizeButton:!1});n.addClass("dialog-window"),n.$form=$(ht("form")).appendTo(n.$content),n.$main=$(ht("div")).appendTo(n.$form),n.$buttons=$(ht("div")).appendTo(n.$form).addClass("button-group"),n.$Button=(r,o,s={type:"button"})=>{const a=$(ht("button")).appendTo(n.$buttons);return a[0].append(r),a.on("click",()=>{o()}),a.on("pointerdown",()=>{a.focus()}),a.attr({type:s.type}),a},n.$form.on("submit",r=>{r.preventDefault()});function l(){n.find("button, input").removeClass("default");let r=$(document.activeElement).closest("button, input[type='submit'], input[type='button'], textarea, select");r.length===0&&(r=n.$form.find('button[type="submit"], input[type="submit"], button:not([type])').first()),r.is("button, input[type='submit'], input[type='button']")&&r.addClass("default")}return n.on("focusin",l),n.on("focusout",()=>{n.find("button, input").removeClass("default")}),setTimeout(()=>{l()},0),n}console.log("JS 실행:","OnCanvasObject.js");function oo(e){const n=[.25,.5,1,2,4,8,16];let l=n[0];for(let r=1;r<n.length;r++)Math.abs(e-n[r])<Math.abs(e-l)&&(l=n[r]);return l}class Yi{constructor(n,l,r,o,s){this.x=n,this.y=l,this.width=r,this.height=o,this.initwidth=r,this.initheight=o,this.hideMainCanvasHandles=s,this.$el=$(ht("div")).addClass("on-canvas-object").appendTo(window.globApp.$canvas_area),this.hideMainCanvasHandles&&window.globApp.canvas_handles.hide(),Ke.on("resize theme-load",this._global_resize_handler=()=>{this.position()})}position(n){const l=parseFloat(window.globApp.$canvas_area.css("padding-left")),r=parseFloat(window.globApp.$canvas_area.css("padding-top")),o=window.devicePixelRatio,a=oo(o)/o,f=window.globAppstate.magnification*a;this.$el.css({position:"absolute",left:f*this.x+l,top:f*this.y+r,width:f*this.width,height:f*this.height}),n&&(window.globApp.$status_position.text(`${this.x}, ${this.y}px`),window.globApp.$status_size.text(`${this.width} x ${this.height}px`))}destroy(){this.$el.remove(),this.hideMainCanvasHandles&&window.globApp.canvas_handles.show(),Ke.off("resize theme-load",this._global_resize_handler)}}console.log("JS 실행:","OnCanvasHelpLayer.js");class so extends Yi{constructor(n,l,r,o,s,a=1){super(n,l,r,o,s),this.$el.addClass("helper-layer"),this.$el.css({pointerEvents:"none"}),this.position(),this.canvas=et(this.width*a,this.height*a),this.$el.append(this.canvas)}}console.log("JS 실행:","OnCanvasHelpLayer.js");class lo extends Yi{constructor(n,l,r,o,s,a=1){super(n,l,r,o,s),this.$el.addClass("mask-layer"),this.$el.css({pointerEvents:"none"}),this.position(),this.canvas=et(this.width*a,this.height*a),this.$el.append(this.canvas)}}console.log("JS 실행:","Hendles.js");function Ir(e){const n=[.25,.5,1,2,4,8,16];let l=n[0];for(let r=1;r<n.length;r++)Math.abs(e-n[r])<Math.abs(e-l)&&(l=n[r]);return l}function co(e){const{$handles_container:n,$object_container:l}=e,r=e.outset||0,o=e.get_handles_offset_left||(()=>0),s=e.get_handles_offset_top||(()=>0),a=e.get_ghost_offset_left||(()=>0),f=e.get_ghost_offset_top||(()=>0),d=e.size_only||!1,u=0,w=-1,_=1,A=w,b=_,C=w,R=_,L=$(ht("div")).addClass("resize-ghost");e.thick&&L.addClass("thick");const N=[];[[C,b],[C,u],[C,A],[u,A],[R,A],[R,u],[R,b],[u,b]].forEach(([j,P])=>{const S=$(ht("div")).addClass("handle");S.appendTo(n);const h=$(ht("div")).addClass("grab-region").appendTo(n);(j===u||P===u)&&h.addClass("is-middle"),h.attr("draggable","false"),S.css("touch-action","none");let p,i=!1;const x=j!==u,U=P!==u;d&&(j===C||P===A)&&(S.addClass("useless-handle"),h.remove());let G;P===A&&j===C||P===b&&j===R?G="nwse-resize":P===b&&j===C||P===A&&j===R?G="nesw-resize":U?G="ew-resize":x&&(G="ns-resize");let Z="";j===C&&(Z+="n"),j===R&&(Z+="s"),P===A&&(Z+="w"),P===b&&(Z+="e"),Z+="-resize";const q=si(G,[16,16],Z);S.add(h).css({cursor:q});const re=de=>{L.appendTo(l),i=!0,p=e.get_rect();const ve=Vi(de);let Ie=0,De=0,Ye,Re;P===b?(Ie=0,Ye=~~(ve.x-p.x)):P===A?(Ie=~~(ve.x-p.x),Ye=~~(p.x+p.width-ve.x)):Ye=~~p.width,j===R?(De=0,Re=~~(ve.y-p.y)):j===C?(De=~~(ve.y-p.y),Re=~~(p.y+p.height-ve.y)):Re=~~p.height;let Ue={x:p.x+Ie,y:p.y+De,width:Ye,height:Re};Ue.width=Math.max(1,Ue.width),Ue.height=Math.max(1,Ue.height),e.constrain_rect?Ue=e.constrain_rect(Ue,P,j):(Ue.x=Math.min(Ue.x,p.x+p.width),Ue.y=Math.min(Ue.y,p.y+p.height));const Ge=window.devicePixelRatio,Ne=Ir(Ge)/Ge,rt=window.globAppstate.magnification*Ne;L.css({position:"absolute",left:rt*Ue.x+a(),top:rt*Ue.y+f(),width:rt*Ue.width-2,height:rt*Ue.height-2}),p=Ue};S.add(h).on("pointerdown touchstart",de=>{i=!1,Ke.on("pointermove touchmove",re),$("body").css({cursor:q}).addClass("cursor-bully"),Ke.one("pointerup touchend touchcancel",()=>{Ke.off("pointermove touchmove",re),$("body").css({cursor:""}).removeClass("cursor-bully"),L.remove(),i&&e.set_rect(p),n.trigger("update")})}),S.add(h).on("mousedown selectstart",de=>{de.preventDefault()});const pe=()=>{const de=window.devicePixelRatio,Ie=Ir(de)/de,De=e.get_rect();De.width*=Ie,De.height*=Ie;const Ye=S.width(),Re=o(),Ue=s(),Ge=32;for(const{len_key:Me,pos_key:Ne,region:rt,offset:pt}of[{len_key:"width",pos_key:"left",region:P,offset:Re},{len_key:"height",pos_key:"top",region:j,offset:Ue}]){let ut=Math.max(De[Me]*window.globAppstate.magnification/2-Ge/2,Math.min(Ge/2,De[Me]*window.globAppstate.magnification/3)),je=De[Me]*window.globAppstate.magnification-ut;je-ut<window.globAppstate.magnification&&(ut=0,je=window.globAppstate.magnification);const yt=-Ge/2,F=Math.min(Ge/2,ut),T=De[Me]*window.globAppstate.magnification-F,Y=De[Me]*window.globAppstate.magnification-yt;d&&(ut=Math.max(-pt,Math.min(ut,je-Ge))),rt===w?(S.css({[Ne]:pt-r}),h.css({[Ne]:pt+yt,[Me]:F-yt})):rt===u?(S.css({[Ne]:pt+(De[Me]*window.globAppstate.magnification-Ye)/2}),h.css({[Ne]:pt+ut,[Me]:je-ut})):rt===_&&(S.css({[Ne]:pt+(De[Me]*window.globAppstate.magnification-Ye/2)}),h.css({[Ne]:pt+T,[Me]:Y-T}))}};n.on("update resize scroll",pe),Ke.on("resize theme-load",pe),setTimeout(pe,50),N.push(S[0],h[0])}),this.handles=N,this.hide=()=>{$(N).css({opacity:0,pointerEvents:"none"})},this.show=()=>{$(N).css({opacity:"",pointerEvents:""})}}const hn=(function(){var e;function n(y,D){return y.b===D.b&&y.a===D.a}function l(y,D){return y.b<D.b||y.b===D.b&&y.a<=D.a}function r(y,D,B){var V=D.b-y.b,ee=B.b-D.b;return 0<V+ee?V<ee?D.a-y.a+V/(V+ee)*(y.a-B.a):D.a-B.a+ee/(V+ee)*(B.a-y.a):0}function o(y,D,B){var V=D.b-y.b,ee=B.b-D.b;return 0<V+ee?(D.a-B.a)*V+(D.a-y.a)*ee:0}function s(y,D){return y.a<D.a||y.a===D.a&&y.b<=D.b}function a(y,D,B){var V=D.a-y.a,ee=B.a-D.a;return 0<V+ee?V<ee?D.b-y.b+V/(V+ee)*(y.b-B.b):D.b-B.b+ee/(V+ee)*(B.b-y.b):0}function f(y,D,B){var V=D.a-y.a,ee=B.a-D.a;return 0<V+ee?(D.b-B.b)*V+(D.b-y.b)*ee:0}function d(y){return l(y.b.a,y.a)}function u(y){return l(y.a,y.b.a)}function w(y,D,B,V){return y=0>y?0:y,B=0>B?0:B,y<=B?B===0?(D+V)/2:D+y/(y+B)*(V-D):V+B/(y+B)*(D-V)}function _(y){var D=L(y.b);return j(D,y.c),j(D.b,y.c),P(D,y.a),D}function A(y,D){var B=!1,V=!1;y!==D&&(D.a!==y.a&&(V=!0,h(D.a,y.a)),D.d!==y.d&&(B=!0,p(D.d,y.d)),N(D,y),V||(j(D,y.a),y.a.c=y),B||(P(D,y.d),y.d.a=y))}function b(y){var D=y.b,B=!1;y.d!==y.b.d&&(B=!0,p(y.d,y.b.d)),y.c===y?h(y.a,null):(y.b.d.a=z(y),y.a.c=y.c,N(y,z(y)),B||P(y,y.d)),D.c===D?(h(D.a,null),p(D.d,null)):(y.d.a=z(D),D.a.c=D.c,N(D,z(D))),S(y)}function C(y){var D=L(y),B=D.b;return N(D,y.e),D.a=y.b.a,j(B,D.a),D.d=B.d=y.d,D=D.b,N(y.b,z(y.b)),N(y.b,D),y.b.a=D.a,D.b.a.c=D.b,D.b.d=y.b.d,D.f=y.f,D.b.f=y.b.f,D}function R(y,D){var B=!1,V=L(y),ee=V.b;return D.d!==y.d&&(B=!0,p(D.d,y.d)),N(V,y.e),N(ee,D),V.a=y.b.a,ee.a=D.a,V.d=ee.d=y.d,y.d.a=ee,B||P(V,y.d),V}function L(y){var D=new Se,B=new Se,V=y.b.h;return B.h=V,V.b.h=D,D.h=y,y.b.h=B,D.b=B,D.c=D,D.e=B,B.b=D,B.c=B,B.e=D}function N(y,D){var B=y.c,V=D.c;B.b.e=D,V.b.e=y,y.c=V,D.c=B}function j(y,D){var B=D.f,V=new M(D,B);B.e=V,D.f=V,B=V.c=y;do B.a=V,B=B.c;while(B!==y)}function P(y,D){var B=D.d,V=new ye(D,B);B.b=V,D.d=V,V.a=y,V.c=D.c,B=y;do B.d=V,B=B.e;while(B!==y)}function S(y){var D=y.h;y=y.b.h,D.b.h=y,y.b.h=D}function h(y,D){var B=y.c,V=B;do V.a=D,V=V.c;while(V!==B);B=y.f,V=y.e,V.f=B,B.e=V}function p(y,D){var B=y.a,V=B;do V.d=D,V=V.e;while(V!==B);B=y.d,V=y.b,V.d=B,B.b=V}function i(y){var D=0;return Math.abs(y[1])>Math.abs(y[0])&&(D=1),Math.abs(y[2])>Math.abs(y[D])&&(D=2),D}var x=4*1e150;function U(y,D){y.f+=D.f,y.b.f+=D.b.f}function G(y,D,B){return y=y.a,D=D.a,B=B.a,D.b.a===y?B.b.a===y?l(D.a,B.a)?0>=o(B.b.a,D.a,B.a):0<=o(D.b.a,B.a,D.a):0>=o(B.b.a,y,B.a):B.b.a===y?0<=o(D.b.a,y,D.a):(D=r(D.b.a,y,D.a),y=r(B.b.a,y,B.a),D>=y)}function Z(y){y.a.i=null;var D=y.e;D.a.c=D.c,D.c.a=D.a,y.e=null}function q(y,D){b(y.a),y.c=!1,y.a=D,D.i=y}function re(y){var D=y.a.a;do y=dt(y);while(y.a.a===D);return y.c&&(D=R(st(y).a.b,y.a.e),q(y,D),y=dt(y)),y}function pe(y,D,B){var V=new It;return V.a=B,V.e=je(y.f,D.e,V),B.i=V}function de(y,D){switch(y.s){case 100130:return(D&1)!==0;case 100131:return D!==0;case 100132:return 0<D;case 100133:return 0>D;case 100134:return 2<=D||-2>=D}return!1}function ve(y){var D=y.a,B=D.d;B.c=y.d,B.a=D,Z(y)}function Ie(y,D,B){for(y=D,D=D.a;y!==B;){y.c=!1;var V=st(y),ee=V.a;if(ee.a!==D.a){if(!V.c){ve(y);break}ee=R(D.c.b,ee.b),q(V,ee)}D.c!==ee&&(A(z(ee),ee),A(D,ee)),ve(y),D=V.a,y=V}return D}function De(y,D,B,V,ee,ce){var ge=!0;do pe(y,D,B.b),B=B.c;while(B!==V);for(ee===null&&(ee=st(D).a.b.c);V=st(D),B=V.a.b,B.a===ee.a;)B.c!==ee&&(A(z(B),B),A(z(ee),B)),V.f=D.f-B.f,V.d=de(y,V.f),D.b=!0,!ge&&Ge(y,D)&&(U(B,ee),Z(D),b(ee)),ge=!1,D=V,ee=B;D.b=!0,ce&&Ne(y,D)}function Ye(y,D,B,V,ee){var ce=[D.g[0],D.g[1],D.g[2]];D.d=null,D.d=y.o&&y.o(ce,B,V,y.c)||null,D.d===null&&(ee?y.n||(X(y,100156),y.n=!0):D.d=B[0])}function Re(y,D,B){var V=[null,null,null,null];V[0]=D.a.d,V[1]=B.a.d,Ye(y,D.a,V,[.5,.5,0,0],!1),A(D,B)}function Ue(y,D,B,V,ee){var ce=Math.abs(D.b-y.b)+Math.abs(D.a-y.a),ge=Math.abs(B.b-y.b)+Math.abs(B.a-y.a),Ee=ee+1;V[ee]=.5*ge/(ce+ge),V[Ee]=.5*ce/(ce+ge),y.g[0]+=V[ee]*D.g[0]+V[Ee]*B.g[0],y.g[1]+=V[ee]*D.g[1]+V[Ee]*B.g[1],y.g[2]+=V[ee]*D.g[2]+V[Ee]*B.g[2]}function Ge(y,D){var B=st(D),V=D.a,ee=B.a;if(l(V.a,ee.a)){if(0<o(ee.b.a,V.a,ee.a))return!1;if(!n(V.a,ee.a))C(ee.b),A(V,z(ee)),D.b=B.b=!0;else if(V.a!==ee.a){var B=y.e,ce=V.a.h;if(0<=ce){var B=B.b,ge=B.d,Ee=B.e,ke=B.c,Oe=ke[ce];ge[Oe]=ge[B.a],ke[ge[Oe]]=Oe,Oe<=--B.a&&(1>=Oe||l(Ee[ge[Oe>>1]],Ee[ge[Oe]])?ft(B,Oe):at(B,Oe)),Ee[ce]=null,ke[ce]=B.b,B.b=ce}else for(B.c[-(ce+1)]=null;0<B.a&&B.c[B.d[B.a-1]]===null;)--B.a;Re(y,z(ee),V)}}else{if(0>o(V.b.a,ee.a,V.a))return!1;dt(D).b=D.b=!0,C(V.b),A(z(ee),V)}return!0}function Me(y,D){var B=st(D),V=D.a,ee=B.a,ce=V.a,ge=ee.a,Ee=V.b.a,ke=ee.b.a,Oe=new M;if(o(Ee,y.a,ce),o(ke,y.a,ge),ce===ge||Math.min(ce.a,Ee.a)>Math.max(ge.a,ke.a))return!1;if(l(ce,ge)){if(0<o(ke,ce,ge))return!1}else if(0>o(Ee,ge,ce))return!1;var mt=Ee,lt=ce,Ve=ke,tt=ge,qe,_t;if(l(mt,lt)||(qe=mt,mt=lt,lt=qe),l(Ve,tt)||(qe=Ve,Ve=tt,tt=qe),l(mt,Ve)||(qe=mt,mt=Ve,Ve=qe,qe=lt,lt=tt,tt=qe),l(Ve,lt)?l(lt,tt)?(qe=r(mt,Ve,lt),_t=r(Ve,lt,tt),0>qe+_t&&(qe=-qe,_t=-_t),Oe.b=w(qe,Ve.b,_t,lt.b)):(qe=o(mt,Ve,lt),_t=-o(mt,tt,lt),0>qe+_t&&(qe=-qe,_t=-_t),Oe.b=w(qe,Ve.b,_t,tt.b)):Oe.b=(Ve.b+lt.b)/2,s(mt,lt)||(qe=mt,mt=lt,lt=qe),s(Ve,tt)||(qe=Ve,Ve=tt,tt=qe),s(mt,Ve)||(qe=mt,mt=Ve,Ve=qe,qe=lt,lt=tt,tt=qe),s(Ve,lt)?s(lt,tt)?(qe=a(mt,Ve,lt),_t=a(Ve,lt,tt),0>qe+_t&&(qe=-qe,_t=-_t),Oe.a=w(qe,Ve.a,_t,lt.a)):(qe=f(mt,Ve,lt),_t=-f(mt,tt,lt),0>qe+_t&&(qe=-qe,_t=-_t),Oe.a=w(qe,Ve.a,_t,tt.a)):Oe.a=(Ve.a+lt.a)/2,l(Oe,y.a)&&(Oe.b=y.a.b,Oe.a=y.a.a),mt=l(ce,ge)?ce:ge,l(mt,Oe)&&(Oe.b=mt.b,Oe.a=mt.a),n(Oe,ce)||n(Oe,ge))return Ge(y,D),!1;if(!n(Ee,y.a)&&0<=o(Ee,y.a,Oe)||!n(ke,y.a)&&0>=o(ke,y.a,Oe)){if(ke===y.a)return C(V.b),A(ee.b,V),D=re(D),V=st(D).a,Ie(y,st(D),B),De(y,D,z(V),V,V,!0),!0;if(Ee===y.a){C(ee.b),A(V.e,z(ee)),ce=B=D,ge=ce.a.b.a;do ce=dt(ce);while(ce.a.b.a===ge);return D=ce,ce=st(D).a.b.c,B.a=z(ee),ee=Ie(y,B,null),De(y,D,ee.c,V.b.c,ce,!0),!0}return 0<=o(Ee,y.a,Oe)&&(dt(D).b=D.b=!0,C(V.b),V.a.b=y.a.b,V.a.a=y.a.a),0>=o(ke,y.a,Oe)&&(D.b=B.b=!0,C(ee.b),ee.a.b=y.a.b,ee.a.a=y.a.a),!1}return C(V.b),C(ee.b),A(z(ee),V),V.a.b=Oe.b,V.a.a=Oe.a,V.a.h=H(y.e,V.a),V=V.a,ee=[0,0,0,0],Oe=[ce.d,Ee.d,ge.d,ke.d],V.g[0]=V.g[1]=V.g[2]=0,Ue(V,ce,Ee,ee,0),Ue(V,ge,ke,ee,2),Ye(y,V,Oe,ee,!0),dt(D).b=D.b=B.b=!0,!1}function Ne(y,D){for(var B=st(D);;){for(;B.b;)D=B,B=st(B);if(!D.b&&(B=D,D=dt(D),D===null||!D.b))break;D.b=!1;var V=D.a,ee=B.a,ce;if(ce=V.b.a!==ee.b.a)e:{ce=D;var ge=st(ce),Ee=ce.a,ke=ge.a,Oe=void 0;if(l(Ee.b.a,ke.b.a)){if(0>o(Ee.b.a,ke.b.a,Ee.a)){ce=!1;break e}dt(ce).b=ce.b=!0,Oe=C(Ee),A(ke.b,Oe),Oe.d.c=ce.d}else{if(0<o(ke.b.a,Ee.b.a,ke.a)){ce=!1;break e}ce.b=ge.b=!0,Oe=C(ke),A(Ee.e,ke.b),Oe.b.d.c=ce.d}ce=!0}if(ce&&(B.c?(Z(B),b(ee),B=st(D),ee=B.a):D.c&&(Z(D),b(V),D=dt(B),V=D.a)),V.a!==ee.a){if(V.b.a===ee.b.a||D.c||B.c||V.b.a!==y.a&&ee.b.a!==y.a)Ge(y,D);else if(Me(y,D))break}V.a===ee.a&&V.b.a===ee.b.a&&(U(ee,V),Z(D),b(V),D=dt(B))}}function rt(y,D){y.a=D;for(var B=D.c;B.i===null;)if(B=B.c,B===D.c){var B=y,V=D,ge=new It;ge.a=V.c.b;var ee=B.f,Ee=ee.a;do Ee=Ee.a;while(Ee.b!==null&&!ee.c(ee.b,ge,Ee.b));var ee=Ee.b,ce=st(ee),ge=ee.a,Ee=ce.a;if(o(ge.b.a,V,ge.a)===0)ge=ee.a,n(ge.a,V)||n(ge.b.a,V)||(C(ge.b),ee.c&&(b(ge.c),ee.c=!1),A(V.c,ge),rt(B,V));else{var ke=l(Ee.b.a,ge.b.a)?ee:ce,ce=void 0;ee.d||ke.c?(ke===ee?ce=R(V.c.b,ge.e):ce=R(Ee.b.c.b,V.c).b,ke.c?q(ke,ce):(ge=B,ee=pe(B,ee,ce),ee.f=dt(ee).f+ee.a.f,ee.d=de(ge,ee.f)),rt(B,V)):De(B,ee,V.c,V.c,null,!0)}return}if(B=re(B.i),ge=st(B),ee=ge.a,ge=Ie(y,ge,null),ge.c===ee){var ee=ge,ge=ee.c,Ee=st(B),ce=B.a,ke=Ee.a,Oe=!1;ce.b.a!==ke.b.a&&Me(y,B),n(ce.a,y.a)&&(A(z(ge),ce),B=re(B),ge=st(B).a,Ie(y,st(B),Ee),Oe=!0),n(ke.a,y.a)&&(A(ee,z(ke)),ee=Ie(y,Ee,null),Oe=!0),Oe?De(y,B,ee.c,ge,ge,!0):(l(ke.a,ce.a)?V=z(ke):V=ce,V=R(ee.c.b,V),De(y,B,V,V.c,V.c,!1),V.b.i.c=!0,Ne(y,B))}else De(y,B,ge.c,ee,ee,!0)}function pt(y,D){var B=new It,V=_(y.b);V.a.b=x,V.a.a=D,V.b.a.b=-x,V.b.a.a=D,y.a=V.b.a,B.a=V,B.f=0,B.d=!1,B.c=!1,B.h=!0,B.b=!1,V=y.f,V=je(V,V.a,B),B.e=V}function ut(y){this.a=new yt,this.b=y,this.c=G}function je(y,D,B){do D=D.c;while(D.b!==null&&!y.c(y.b,D.b,B));return y=new yt(B,D.a,D),D.a.c=y,D.a=y}function yt(y,D,B){this.b=y||null,this.a=D||this,this.c=B||this}function F(){this.d=T,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}var T=0;e=F.prototype,e.x=function(){Y(this,T)},e.B=function(y,D){switch(y){case 100142:return;case 100140:switch(D){case 100130:case 100131:case 100132:case 100133:case 100134:this.s=D;return}break;case 100141:this.m=!!D;return;default:X(this,100900);return}X(this,100901)},e.y=function(y){switch(y){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:X(this,100900)}return!1},e.A=function(y,D,B){this.j[0]=y,this.j[1]=D,this.j[2]=B},e.z=function(y,D){var B=D||null;switch(y){case 100100:case 100106:this.h=B;break;case 100104:case 100110:this.l=B;break;case 100101:case 100107:this.k=B;break;case 100102:case 100108:this.i=B;break;case 100103:case 100109:this.p=B;break;case 100105:case 100111:this.o=B;break;case 100112:this.r=B;break;default:X(this,100900)}},e.C=function(y,D){var B=!1,V=[0,0,0];Y(this,2);for(var ee=0;3>ee;++ee){var ce=y[ee];-1e150>ce&&(ce=-1e150,B=!0),1e150<ce&&(ce=1e150,B=!0),V[ee]=ce}B&&X(this,100155),B=this.q,B===null?(B=_(this.b),A(B,B.b)):(C(B),B=B.e),B.a.d=D,B.a.g[0]=V[0],B.a.g[1]=V[1],B.a.g[2]=V[2],B.f=1,B.b.f=-1,this.q=B},e.u=function(y){Y(this,T),this.d=1,this.b=new K,this.c=y},e.t=function(){Y(this,1),this.d=2,this.q=null},e.v=function(){Y(this,2),this.d=1},e.w=function(){Y(this,1),this.d=T;var y=this.j[0],D=this.j[1],B=this.j[2],V=!1,ee=[y,D,B];if(y===0&&D===0&&B===0){for(var D=[-2*1e150,-2*1e150,-2*1e150],ce=[2*1e150,2*1e150,2*1e150],B=[],ge=[],V=this.b.c,y=V.e;y!==V;y=y.e)for(var Ee=0;3>Ee;++Ee){var ke=y.g[Ee];ke<ce[Ee]&&(ce[Ee]=ke,ge[Ee]=y),ke>D[Ee]&&(D[Ee]=ke,B[Ee]=y)}if(y=0,D[1]-ce[1]>D[0]-ce[0]&&(y=1),D[2]-ce[2]>D[y]-ce[y]&&(y=2),ce[y]>=D[y])ee[0]=0,ee[1]=0,ee[2]=1;else{for(D=0,ce=ge[y],B=B[y],ge=[0,0,0],ce=[ce.g[0]-B.g[0],ce.g[1]-B.g[1],ce.g[2]-B.g[2]],Ee=[0,0,0],y=V.e;y!==V;y=y.e)Ee[0]=y.g[0]-B.g[0],Ee[1]=y.g[1]-B.g[1],Ee[2]=y.g[2]-B.g[2],ge[0]=ce[1]*Ee[2]-ce[2]*Ee[1],ge[1]=ce[2]*Ee[0]-ce[0]*Ee[2],ge[2]=ce[0]*Ee[1]-ce[1]*Ee[0],ke=ge[0]*ge[0]+ge[1]*ge[1]+ge[2]*ge[2],ke>D&&(D=ke,ee[0]=ge[0],ee[1]=ge[1],ee[2]=ge[2]);0>=D&&(ee[0]=ee[1]=ee[2]=0,ee[i(ce)]=1)}V=!0}for(ge=i(ee),y=this.b.c,D=(ge+1)%3,B=(ge+2)%3,ge=0<ee[ge]?1:-1,ee=y.e;ee!==y;ee=ee.e)ee.b=ee.g[D],ee.a=ge*ee.g[B];if(V){for(ee=0,V=this.b.a,y=V.b;y!==V;y=y.b)if(D=y.a,!(0>=D.f))do ee+=(D.a.b-D.b.a.b)*(D.a.a+D.b.a.a),D=D.e;while(D!==y.a);if(0>ee)for(ee=this.b.c,V=ee.e;V!==ee;V=V.e)V.a=-V.a}for(this.n=!1,ee=this.b.b,y=ee.h;y!==ee;y=V)V=y.h,D=y.e,n(y.a,y.b.a)&&y.e.e!==y&&(Re(this,D,y),b(y),y=D,D=y.e),D.e===y&&(D!==y&&((D===V||D===V.b)&&(V=V.h),b(D)),(y===V||y===V.b)&&(V=V.h),b(y));for(this.e=ee=new v,V=this.b.c,y=V.e;y!==V;y=y.e)y.h=H(ee,y);for(E(ee),this.f=new ut(this),pt(this,-x),pt(this,x);(ee=ne(this.e))!==null;){for(;;){e:if(y=this.e,y.a===0)V=Pe(y.b);else if(V=y.c[y.d[y.a-1]],y.b.a!==0&&(y=Pe(y.b),l(y,V))){V=y;break e}if(V===null||!n(V,ee))break;V=ne(this.e),Re(this,ee.c,V.c)}rt(this,ee)}for(this.a=this.f.a.a.b.a.a,ee=0;(V=this.f.a.a.b)!==null;)V.h||++ee,Z(V);for(this.f=null,ee=this.e,ee.b=null,ee.d=null,this.e=ee.c=null,ee=this.b,y=ee.a.b;y!==ee.a;y=V)V=y.b,y=y.a,y.e.e===y&&(U(y.c,y),b(y));if(!this.n){if(ee=this.b,this.m)for(y=ee.b.h;y!==ee.b;y=V)V=y.h,y.b.d.c!==y.d.c?y.f=y.d.c?1:-1:b(y);else for(y=ee.a.b;y!==ee.a;y=V)if(V=y.b,y.c){for(y=y.a;l(y.b.a,y.a);y=y.c.b);for(;l(y.a,y.b.a);y=y.e);for(D=y.c.b,B=void 0;y.e!==D;)if(l(y.b.a,D.a)){for(;D.e!==y&&(d(D.e)||0>=o(D.a,D.b.a,D.e.b.a));)B=R(D.e,D),D=B.b;D=D.c.b}else{for(;D.e!==y&&(u(y.c.b)||0<=o(y.b.a,y.a,y.c.b.a));)B=R(y,y.c.b),y=B.b;y=y.e}for(;D.e.e!==y;)B=R(D.e,D),D=B.b}if(this.h||this.i||this.k||this.l)if(this.m){for(ee=this.b,V=ee.a.b;V!==ee.a;V=V.b)if(V.c){this.h&&this.h(2,this.c),y=V.a;do this.k&&this.k(y.a.d,this.c),y=y.e;while(y!==V.a);this.i&&this.i(this.c)}}else{for(ee=this.b,V=!!this.l,y=!1,D=-1,B=ee.a.d;B!==ee.a;B=B.d)if(B.c){y||(this.h&&this.h(4,this.c),y=!0),ge=B.a;do V&&(ce=ge.b.d.c?0:1,D!==ce&&(D=ce,this.l&&this.l(!!D,this.c))),this.k&&this.k(ge.a.d,this.c),ge=ge.e;while(ge!==B.a)}y&&this.i&&this.i(this.c)}if(this.r){for(ee=this.b,y=ee.a.b;y!==ee.a;y=V)if(V=y.b,!y.c){D=y.a,B=D.e,ge=void 0;do ge=B,B=ge.e,ge.d=null,ge.b.d===null&&(ge.c===ge?h(ge.a,null):(ge.a.c=ge.c,N(ge,z(ge))),ce=ge.b,ce.c===ce?h(ce.a,null):(ce.a.c=ce.c,N(ce,z(ce))),S(ge));while(ge!==D);D=y.d,y=y.b,y.d=D,D.b=y}this.r(this.b),this.c=this.b=null;return}}this.b=this.c=null};function Y(y,D){if(y.d!==D)for(;y.d!==D;)if(y.d<D)switch(y.d){case T:X(y,100151),y.u(null);break;case 1:X(y,100152),y.t()}else switch(y.d){case 2:X(y,100154),y.v();break;case 1:X(y,100153),y.w()}}function X(y,D){y.p&&y.p(D,y.c)}function ye(y,D){this.b=y||this,this.d=D||this,this.a=null,this.c=!1}function Se(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function z(y){return y.b.e}function K(){this.c=new M,this.a=new ye,this.b=new Se,this.d=new Se,this.b.b=this.d,this.d.b=this.b}function M(y,D){this.e=y||this,this.f=D||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function v(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new he}function E(y){y.d=[];for(var D=0;D<y.a;D++)y.d[D]=D;y.d.sort(function(B){return function(V,ee){return l(B[V],B[ee])?1:-1}}(y.c)),y.e=!0,_e(y.b)}function H(y,D){if(y.e){var B=y.b,V=++B.a;2*V>B.f&&(B.f*=2,B.c=we(B.c,B.f+1));var ee;return B.b===0?ee=V:(ee=B.b,B.b=B.c[B.b]),B.e[ee]=D,B.c[ee]=V,B.d[V]=ee,B.h&&at(B,V),ee}return B=y.a++,y.c[B]=D,-(B+1)}function ne(y){if(y.a===0)return it(y.b);var D=y.c[y.d[y.a-1]];if(y.b.a!==0&&l(Pe(y.b),D))return it(y.b);do--y.a;while(0<y.a&&y.c[y.d[y.a-1]]===null);return D}function he(){this.d=we([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function we(y,D){for(var B=Array(D),V=0;V<y.length;V++)B[V]=y[V];for(;V<D;V++)B[V]=0;return B}function _e(y){for(var D=y.a;1<=D;--D)ft(y,D);y.h=!0}function Pe(y){return y.e[y.d[1]]}function it(y){var D=y.d,B=y.e,V=y.c,ee=D[1],ce=B[ee];return 0<y.a&&(D[1]=D[y.a],V[D[1]]=1,B[ee]=null,V[ee]=y.b,y.b=ee,0<--y.a&&ft(y,1)),ce}function ft(y,D){for(var B=y.d,V=y.e,ee=y.c,ce=D,ge=B[ce];;){var Ee=ce<<1;Ee<y.a&&l(V[B[Ee+1]],V[B[Ee]])&&(Ee+=1);var ke=B[Ee];if(Ee>y.a||l(V[ge],V[ke])){B[ce]=ge,ee[ge]=ce;break}B[ce]=ke,ee[ke]=ce,ce=Ee}}function at(y,D){for(var B=y.d,V=y.e,ee=y.c,ce=D,ge=B[ce];;){var Ee=ce>>1,ke=B[Ee];if(Ee===0||l(V[ke],V[ge])){B[ce]=ge,ee[ge]=ce;break}B[ce]=ke,ee[ke]=ce,ce=Ee}}function It(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function st(y){return y.e.c.b}function dt(y){return y.e.a.b}return this.libtess={GluTesselator:F,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},F.prototype.gluDeleteTess=F.prototype.x,F.prototype.gluTessProperty=F.prototype.B,F.prototype.gluGetTessProperty=F.prototype.y,F.prototype.gluTessNormal=F.prototype.A,F.prototype.gluTessCallback=F.prototype.z,F.prototype.gluTessVertex=F.prototype.C,F.prototype.gluTessBeginPolygon=F.prototype.u,F.prototype.gluTessBeginContour=F.prototype.t,F.prototype.gluTessEndContour=F.prototype.v,F.prototype.gluTessEndPolygon=F.prototype.w,typeof module<"u"&&(module.exports=this.libtess),this.libtess}).apply(new Object);console.log("JS 실행:","image-manipulation.js");const vt=1;function uo(e,n){return Math.ceil(e*(n==="circle"?2.1:1)/2)*2}function Kr(e,n,l){n.match(/diagonal/)&&(l-=.4);const r=Math.round(e.canvas.width/2),o=Math.round(r-l/2),s=Math.round(r+l/2),a=Math.round(e.canvas.height/2),f=Math.round(a-l/2),d=Math.round(a+l/2);n==="circle"?Hi(e,o,f,l,l,!1,!0):n==="square"?e.fillRect(o,f,~~l,~~l):n==="diagonal"?wn(e,o,f,s,d):n==="reverse_diagonal"?wn(e,o,d,s,f):n==="horizontal"?wn(e,o,a,l,a):n==="vertical"&&wn(e,r,f,r,l)}function Hi(e,n,l,r,o,s,a){const f=n+r/2,d=l+o/2;if(window.globAppstate.aliasing){const u=[];for(let _=0;_<Et;_+=.05)u.push({x:f+Math.cos(_)*r/2,y:d+Math.sin(_)*o/2});di(e,u,s,a)}else e.beginPath(),e.ellipse(f,d,Math.abs(r/2),Math.abs(o/2),0,0,Et,!1),e.stroke(),e.fill()}function Rr(e,n,l,r,o,s,a,f,d){if(window.globAppstate.aliasing){const u=[],w=(C,R)=>{u.push({x:C,y:R})},_=(C,R,L,N,j,P)=>{for(let h=j;h<P;h+=.05)u.push({x:C+Math.cos(h)*L,y:R+Math.sin(h)*N});u.push({x:C+Math.cos(P)*L,y:R+Math.sin(P)*N})},A=n+r,b=l+o;_(A-s,l+a,s,a,Et*3/4,Et),w(A,b-a),_(A-s,b-a,s,a,0,Et*1/4),w(n+s,b),_(n+s,b-a,s,a,Et*1/4,Et*1/2),w(n,l+a),_(n+s,l+a,s,a,Et/2,Et*3/4),di(e,u,f,d)}else e.beginPath(),e.moveTo(n+s,l),e.lineTo(n+r-s,l),e.quadraticCurveTo(n+r,l,n+r,l+a),e.lineTo(n+r,l+o-a),e.quadraticCurveTo(n+r,l+o,n+r-s,l+o),e.lineTo(n+s,l+o),e.quadraticCurveTo(n,l+o,n,l+o-a),e.lineTo(n,l+a),e.quadraticCurveTo(n,l,n+s,l),e.closePath(),f&&e.stroke(),d&&e.fill()}const fo=(e,n)=>{const l=uo(n,e),r=et(l,l);return Kr(r.ctx,e,n),r},fi=Ki(fo,20);Ke.on("invalidate-brush-canvases",()=>{fi.clear_memo_cache()});const ii=(e,n,l,r,o,s="red")=>{const a=fi(r,o),f=document.createElement("canvas");f.width=a.width,f.height=a.height;const d=f.getContext("2d");d.drawImage(a,0,0),d.globalCompositeOperation="source-in",d.fillStyle=s,d.fillRect(0,0,f.width,f.height);const u=-Math.ceil(f.width/2),w=-Math.ceil(f.height/2);e.drawImage(f,n+u,l+w)},ho=(e,n)=>{const l=fi(e,n),r=l.ctx.getImageData(0,0,l.width,l.height),o=(d,u)=>d>=0&&u>=0&&d<r.width&&u<r.height&&r.data[(u*r.width+d)*4+3]>127,s=-Math.ceil(l.width/2),a=-Math.ceil(l.height/2),f=[];for(let d=0;d<r.width;d+=1)for(let u=0;u<r.height;u+=1)o(d,u)&&(!o(d,u-1)||!o(d,u+1)||!o(d-1,u)||!o(d+1,u))&&f.push({x:d+s,y:u+a});return f},Vr=Ki(ho);Ke.on("invalidate-brush-canvases",()=>{Vr.clear_memo_cache()});let ri;function Gi(e){window.globAppstate.aliasing&&e>1&&(ri=fi("circle",e))}function wn(e,n,l,r,o,s=1){window.globAppstate.aliasing?s>1?zn(n,l,r,o,(a,f)=>{e.drawImage(ri,~~(a-ri.width/2),~~(f-ri.height/2))}):zn(n,l,r,o,(a,f)=>{e.fillRect(a,f,1,1)}):(e.beginPath(),e.moveTo(n,l),e.lineTo(r,o),e.lineWidth=s,e.lineCap="round",e.stroke(),e.lineCap="butt")}function zn(e,n,l,r,o){e=~~e,l=~~l,n=~~n,r=~~r;const s=Math.abs(l-e),a=Math.abs(r-n),f=e<l?1:-1,d=n<r?1:-1;let u=s-a;for(;o(e,n),!(e===l&&n===r);){const w=u*2;w>-a&&(u-=a,e+=f),w<s&&(u+=s,n+=d)}}function po(e,n,l,r,o){e=~~e,l=~~l,n=~~n,r=~~r;const s=Math.abs(l-e),a=Math.abs(r-n),f=e<l?1:-1,d=n<r?1:-1;let u=s-a;for(;o(e,n),!(e===l&&n===r);){const w=u*2;w>-a&&(u-=a,e+=f),o(e,n),w<s&&(u+=s,n+=d)}}function go(e,n,l,r,o,s,a){const f=window.globAppstate.main_canvas.width,d=window.globAppstate.main_canvas.height;n=Math.max(0,Math.min(Math.floor(n),f)),l=Math.max(0,Math.min(Math.floor(l),d));const u=[[n,l]],w=e.getImageData(0,0,f,d);let _=(l*f+n)*4;const A=w.data[_+0],b=w.data[_+1],C=w.data[_+2],R=w.data[_+3];if(Math.abs(r-A)<=vt&&Math.abs(o-b)<=vt&&Math.abs(s-C)<=vt&&Math.abs(a-R)<=vt)return;for(;u.length;){let j,P,S,h,p;for(j=u.pop(),P=j[0],S=j[1],_=(S*f+P)*4;L(_);)S--,_=(S*f+P)*4;for(h=!1,p=!1;S++,_=(S*f+P)*4,!!(S<d&&L(_));)N(_),P>0&&(L(_-4)?h||(u.push([P-1,S]),h=!0):h&&(h=!1)),P<f-1&&(L(_+4)?p||(u.push([P+1,S]),p=!0):p&&(p=!1)),_+=f*4}e.putImageData(w,0,0);function L(j){return Math.abs(w.data[j+0]-A)<=vt&&Math.abs(w.data[j+1]-b)<=vt&&Math.abs(w.data[j+2]-C)<=vt&&Math.abs(w.data[j+3]-R)<=vt}function N(j){w.data[j+0]=r,w.data[j+1]=o,w.data[j+2]=s,w.data[j+3]=a}}function wo(e,n,l,r){if(typeof r=="string"){const o=on(r);go(e,n,l,o[0],o[1],o[2],o[3])}else{const o=e.canvas,s=et(o.width,o.height);mo(e,s.ctx,n,l,255,255,255,255),Zt(s.ctx,r,0,0),e.drawImage(s,0,0)}}function mo(e,n,l,r,o,s,a,f){const d=window.globAppstate.main_canvas.width,u=window.globAppstate.main_canvas.height;l=Math.max(0,Math.min(Math.floor(l),d)),r=Math.max(0,Math.min(Math.floor(r),u));const w=[[l,r]],_=e.getImageData(0,0,d,u),A=n.getImageData(0,0,d,u);let b=(r*d+l)*4;const C=_.data[b+0],R=_.data[b+1],L=_.data[b+2],N=_.data[b+3];for(;w.length;){let S,h,p,i,x;for(S=w.pop(),h=S[0],p=S[1],b=(p*d+h)*4;j(b);)p--,b=(p*d+h)*4;for(i=!1,x=!1;p++,b=(p*d+h)*4,!!(p<u&&j(b));)P(b),h>0&&(j(b-4)?i||(w.push([h-1,p]),i=!0):i&&(i=!1)),h<d-1&&(j(b+4)?x||(w.push([h+1,p]),x=!0):x&&(x=!1)),b+=d*4}n.putImageData(A,0,0);function j(S){return A.data[S+3]===0&&Math.abs(_.data[S+0]-C)<=vt&&Math.abs(_.data[S+1]-R)<=vt&&Math.abs(_.data[S+2]-L)<=vt&&Math.abs(_.data[S+3]-N)<=vt}function P(S){A.data[S+0]=o,A.data[S+1]=s,A.data[S+2]=a,A.data[S+3]=f}}function _o(e,n,l,r,o,s,a,f,d){if(n===s&&l===a&&r===f&&o===d)return;const{data:u}=e;for(let w=0;w<u.length;w+=4)Math.abs(u[w+0]-n)<=vt&&Math.abs(u[w+1]-l)<=vt&&Math.abs(u[w+2]-r)<=vt&&Math.abs(u[w+3]-o)<=vt&&(u[w+0]=s,u[w+1]=a,u[w+2]=f,u[w+3]=d)}function bo(e,n,l,r,o,s){const a=e.data,f=n.data;for(let d=0;d<a.length;d+=4)Math.abs(a[d+0]-l)<=vt&&Math.abs(a[d+1]-r)<=vt&&Math.abs(a[d+2]-o)<=vt&&Math.abs(a[d+3]-s)<=vt&&(f[d+0]=255,f[d+1]=255,f[d+2]=255,f[d+3]=255)}function vo(e,n,l,r,o,s,a){n=Math.max(0,Math.min(Math.floor(n),e.canvas.width)),l=Math.max(0,Math.min(Math.floor(l),e.canvas.height));const f=e.getImageData(0,0,e.canvas.width,e.canvas.height),d=(l*f.width+n)*4,u=f.data[d+0],w=f.data[d+1],_=f.data[d+2],A=f.data[d+3];_o(f,u,w,_,A,r,o,s,a),e.putImageData(f,0,0)}function yo(e,n,l,r){if(typeof r=="string"){const o=on(r);vo(e,n,l,o[0],o[1],o[2],o[3])}else{const o=e.canvas,s=et(o.width,o.height);Ao(e,s.ctx,n,l),Zt(s.ctx,r,0,0),e.drawImage(s,0,0)}}function Ao(e,n,l,r){l=Math.max(0,Math.min(Math.floor(l),e.canvas.width)),r=Math.max(0,Math.min(Math.floor(r),e.canvas.height));const o=e.getImageData(0,0,e.canvas.width,e.canvas.height),s=n.getImageData(0,0,n.canvas.width,n.canvas.height),a=(r*o.width+l)*4,f=o.data[a+0],d=o.data[a+1],u=o.data[a+2],w=o.data[a+3];bo(o,s,f,d,u,w),n.putImageData(s,0,0)}function Yr(e,n){const l=window.globAppstate.selection?window.globAppstate.selection.source_canvas:window.globAppstate.main_canvas,r=et(l.width,l.height),o=l.ctx,s=r.ctx;n(l,o,r,s),window.globAppstate.selection?wt({name:`${e.name} (${localize("Selection")})`,icon:e.icon,soft:!0},()=>{window.globAppstate.selection.replace_source_canvas(r)}):(Gt(),Gn(),wt({name:e.name,icon:e.icon},()=>{window.globAppstate.saved=!1,ln(),window.globAppstate.main_ctx.copy(r),window.globApp.$canvas_area.trigger("resize")}))}function Ss(e){Yr({name:`${localize("Rotate by angle")} ${e/Et*360} ${localize("Degrees")}`,icon:Ot(`p_rotate_${e>=0?"cw":"ccw"}.png`)},(n,l,r,o)=>{switch(o.save(),e){case Et/4:case Et*-3/4:r.width=n.height,r.height=n.width,o.disable_image_smoothing(),o.translate(r.width,0),o.rotate(Et/4);break;case Et/2:case Et/-2:o.translate(r.width,r.height),o.rotate(Et/2);break;case Et*3/4:case Et/-4:r.width=n.height,r.height=n.width,o.disable_image_smoothing(),o.translate(0,r.height),o.rotate(Et/-4);break;default:{const s=n.width,a=n.height;let f=1/0,d=-1/0,u=1/0,w=-1/0;const _=(L,N)=>{const j=Math.sin(-e)*a*L+Math.cos(+e)*s*N,P=Math.sin(+e)*s*N+Math.cos(-e)*a*L;f=Math.min(f,j),d=Math.max(d,j),u=Math.min(u,P),w=Math.max(w,P)};_(0,0),_(0,1),_(1,0),_(1,1);const A=f,b=u,C=d-f,R=w-u;r.width=C,r.height=R,o.disable_image_smoothing(),window.globAppstate.transparency||(o.fillStyle=window.globAppstate.selected_colors.background,o.fillRect(0,0,r.width,r.height)),o.translate(-A,-b),o.rotate(e),o.drawImage(n,0,0,s,a);break}}o.drawImage(n,0,0),o.restore()})}function Eo(e,n=e){const l=e.getImageData(0,0,e.canvas.width,e.canvas.height);for(let r=0;r<l.data.length;r+=4)l.data[r+0]=255-l.data[r+0],l.data[r+1]=255-l.data[r+1],l.data[r+2]=255-l.data[r+2];n.putImageData(l,0,0)}function Zt(e,n,l=0,r=0){e.globalCompositeOperation="source-in",e.fillStyle=n,e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.save(),e.translate(-l,-r),e.fill(),e.restore()}function xo(e,n,l,r,o,s,a,f,d){const u=1-e,w=u*u,_=e*e;let A,b,C,R=0;return A=w*u,b=w*e*3,C=u*_*3,R=e*_,{x:A*n+b*r+C*s+R*f,y:A*l+b*o+C*a+R*d}}function To(e,n,l,r,o,s,a,f,d,u){let _={x:n,y:l};for(let A=0;A<1;A+=1/100){const b=xo(A,n,l,r,o,s,a,f,d);wn(e,_.x,_.y,b.x,b.y,u),_=b}}function So(e,n,l,r,o,s,a,f){Xr(e,n,l,r,o,r,o,s,a,f)}function Xr(e,n,l,r,o,s,a,f,d,u){const w=Math.min(n,r,s,f),_=Math.min(l,o,a,d),A=Math.max(n,r,s,f),b=Math.max(l,o,a,d);Zr(e,w,_,A,b,window.globAppstate.stroke_color,C=>{To(C,n,l,r,o,s,a,f,d,u)})}function Zn(e,n,l,r,o,s){const a=Math.min(n,r),f=Math.min(l,o),d=Math.max(n,r),u=Math.max(l,o);Zr(e,a,f,d,u,window.globAppstate.stroke_color,w=>{wn(w,n,l,r,o,s)})}let Pi,kr=-1;function Co(e,n){const l=Math.floor(n);if(!Pi||kr!==l){kr=l;const r=et(l,l),o="#808080",s="#c0c0c0";r.ctx.fillStyle=o,r.ctx.fillRect(0,0,1,l),r.ctx.fillStyle=o,r.ctx.fillRect(0,0,l,1),r.ctx.fillStyle=s;for(let a=1;a<l;a+=2)r.ctx.fillRect(a,0,1,1),r.ctx.fillRect(0,a,1,1);Pi=e.createPattern(r,"repeat")}e.save(),e.rect(0,0,e.canvas.width,e.canvas.height),n!==l&&e.translate(-.5,-.75),e.scale(n/l,n/l),e.enable_image_smoothing(),e.fillStyle=Pi,e.fill(),e.restore()}const Nr=document.createElementNS("http://www.w3.org/2000/svg","svg"),Fi=et(8,4),Ui=et(4,8);let ei,Pn;function Sn(e,n,l,r,o,s,a,f){Pn||(Fi.ctx.fillStyle="white",Fi.ctx.fillRect(4,0,4,4),Ui.ctx.fillStyle="white",Ui.ctx.fillRect(0,4,4,4),ei=e.createPattern(Fi,"repeat"),Pn=e.createPattern(Ui,"repeat"));const d=1,u=1/s;if(e.save(),e.scale(s,s),e.translate(a,f),e.translate(n,l),e.globalCompositeOperation="difference",r>0){const w=Nr.createSVGMatrix();ei.setTransform&&ei.setTransform(w.translate(-n,-l).translate(u,0).scale(1/s)),e.fillStyle=ei,e.fillRect(0,0,r,d)}else if(o>0){const w=Nr.createSVGMatrix();Pn.setTransform&&Pn.setTransform(w.translate(-n,-l).translate(0,u).scale(1/s)),e.fillStyle=Pn,e.fillRect(0,0,d,o)}e.restore()}function Jr(e,n,l,r,o,s,a,f){Sn(e,n,l,r-1,0,s,a,f),o===1?Sn(e,n,l,0,1,s,a,f):Sn(e,n,l+1,0,o-2,s,a,f),Sn(e,n+r-1,l,0,o,s,a,f),Sn(e,n,l+o-1,r-1,0,s,a,f),Sn(e,n,l+1,0,1,s,a,f)}let pn,He,qi,Tt,Lt,Ut;function Io(){function e(a,f){f[f.length]=a[0],f[f.length]=a[1]}function n(a){var f;a!==hn.primitiveType.GL_TRIANGLES&&((f=window.console)==null||f.log(`Expected TRIANGLES but got type: ${a}`))}function l(a){var f,d;(f=window.console)==null||f.log("error callback"),(d=window.console)==null||d.log(`error number: ${a}`)}function r(a,f,d){return[a[0],a[1],a[2]]}function o(a){}const s=new hn.GluTesselator;return s.gluTessCallback(hn.gluEnum.GLU_TESS_VERTEX_DATA,e),s.gluTessCallback(hn.gluEnum.GLU_TESS_BEGIN,n),s.gluTessCallback(hn.gluEnum.GLU_TESS_ERROR,l),s.gluTessCallback(hn.gluEnum.GLU_TESS_COMBINE,r),s.gluTessCallback(hn.gluEnum.GLU_TESS_EDGE_FLAG,o),s}function Ro(e){pn.gluTessNormal(0,0,1);const n=[];pn.gluTessBeginPolygon(n);for(let l=0;l<e.length;l++){pn.gluTessBeginContour();const r=e[l];for(let o=0;o<r.length;o+=2){const s=[r[o],r[o+1],0];pn.gluTessVertex(s,s)}pn.gluTessEndContour()}return pn.gluTessEndPolygon(),n}function Lr(e){try{He=e.getContext("webgl",{antialias:!1})}catch(l){ot("Failed to get WebGL context. You may need to refresh the web page, or restart your computer.",l);return}if(!He){ot("Failed to get WebGL context. You may need to refresh the web page, or restart your computer.");return}window.WEBGL_lose_context=He.getExtension("WEBGL_lose_context");const n=ko();qi=He.getAttribLocation(n,"position"),He.enableVertexAttribArray(qi)}function Mr(e){const n=new Float32Array(e),l=He.createBuffer();return He.bindBuffer(He.ARRAY_BUFFER,l),He.bufferData(He.ARRAY_BUFFER,n,He.STATIC_DRAW),He.vertexAttribPointer(qi,2,He.FLOAT,!1,0,0),e.length/2}function ko(){var s,a;const e=["attribute vec4 position;","void main() {","	/* already in normalized coordinates, so just pass through */","	gl_Position = position;","}"].join(""),n=He.createShader(He.VERTEX_SHADER);He.shaderSource(n,e),He.compileShader(n),He.getShaderParameter(n,He.COMPILE_STATUS)||(s=window.console)==null||s.log(`Vertex shader failed to compile. Log: ${He.getShaderInfoLog(n)}`);const l=["precision mediump float;","void main() {","	gl_FragColor = vec4(0, 0, 0, 1);","}"].join(""),r=He.createShader(He.FRAGMENT_SHADER);He.shaderSource(r,l),He.compileShader(r),He.getShaderParameter(r,He.COMPILE_STATUS)||(a=window.console)==null||a.log(`Fragment shader failed to compile. Log: ${He.getShaderInfoLog(r)}`);const o=He.createProgram();return He.attachShader(o,n),He.attachShader(o,r),He.linkProgram(o),He.useProgram(o),o}function Cs(){pn=Io(),Tt=document.createElement("canvas"),Lt=document.createElement("canvas"),Ut=Lt.getContext("2d"),Lr(Tt);let e;Tt.addEventListener("webglcontextlost",n=>{var l;n.preventDefault(),(l=window.console)==null||l.warn("WebGL context lost"),Dr(),e=setTimeout(()=>{ot("The WebGL context was lost. You may need to refresh the web page, or restart your computer.")},3e3)},!1),Tt.addEventListener("webglcontextrestored",()=>{var n;Lr(Tt),(n=window.console)==null||n.warn("WebGL context restored"),clearTimeout(e),Dr(),Ke.triggerHandler("invalidate-brush-canvases"),Ke.triggerHandler("redraw-tool-options-because-webglcontextrestored")},!1)}function Dr(){window.globAppstate.brush_size>100&&(window.globAppstate.brush_size=100,ot("Brush size clamped to 100")),window.globAppstate.pencil_size>100&&(window.globAppstate.pencil_size=100,ot("Pencil size clamped to 100")),window.globAppstate.stroke_size>100&&(window.globAppstate.stroke_size=100,ot("Stroke size clamped to 100"))}function Or(e,n){Qr(e,n,!0,!1,!1)}function di(e,n,l,r){Qr(e,n,l,r,!0)}function Qr(e,n,l,r,o){if(!He){ot("Failed to get WebGL context. You may need to refresh the web page, or restart your computer.");return}l&&window.globAppstate.stroke_size>1&&Gi(window.globAppstate.stroke_size);const s=e.strokeStyle,a=e.fillStyle,f=n.length,d=f*2;if(f===0)return;let u=1/0,w=-1/0,_=1/0,A=-1/0;for(const{x:C,y:R}of n)u=Math.min(C,u),w=Math.max(C,w),_=Math.min(R,_),A=Math.max(R,A);w+=1,A+=1,u-=1,_-=1,Tt.width=w-u,Tt.height=A-_,He.viewport(0,0,Tt.width,Tt.height);const b=new Float32Array(d);for(let C=0;C<f;C++)b[C*2+0]=(n[C].x-u)/Tt.width*2-1,b[C*2+1]=1-(n[C].y-_)/Tt.height*2;if(r){const R=Ro([b]);let L=Mr(R);He.clear(He.COLOR_BUFFER_BIT),He.drawArrays(He.TRIANGLES,0,L),Lt.width=Tt.width,Lt.height=Tt.height,Ut.drawImage(Tt,0,0),Zt(Ut,a,u,_),e.drawImage(Lt,u,_)}if(l)if(window.globAppstate.stroke_size>1){const C=~~(window.globAppstate.stroke_size*1.1),R=u-C,L=_-C;Lt.width=w-u+C*2,Lt.height=A-_+C*2;for(let N=0;N<f-(o?0:1);N++){const j=n[N],P=n[(N+1)%f];wn(Ut,j.x-R,j.y-L,P.x-R,P.y-L,window.globAppstate.stroke_size)}Zt(Ut,s,R,L),e.drawImage(Lt,R,L)}else{let C=Mr(b);He.clear(He.COLOR_BUFFER_BIT),He.drawArrays(o?He.LINE_LOOP:He.LINE_STRIP,0,C),Lt.width=Tt.width,Lt.height=Tt.height,Ut.drawImage(Tt,0,0),Zt(Ut,s,u,_),e.drawImage(Lt,u,_)}}function No(e,n,l,r,o,s){o=Math.max(o,l+1),s=Math.max(s,r+1);const a=o-l,f=s-r,d=et(e);d.ctx.save(),d.ctx.globalCompositeOperation="destination-in",di(d.ctx,n,!1,!0),d.ctx.restore();const u=et(a,f);return u.ctx.drawImage(d,l,r,a,f,0,0,a,f),u}function Zr(e,n,l,r,o,s,a){const f=~~(window.globAppstate.stroke_size*1.1);r=Math.max(r,n+1),o=Math.max(o,l+1),Lt.width=r-n+f*2,Lt.height=o-l+f*2;const d=n-f,u=l-f;Ut.save(),Ut.translate(-d,-u),a(Ut),Ut.restore(),Zt(Ut,s,d,u),e.drawImage(Lt,d,u)}console.log("JS 실행:","tool-options.js");const Un=(e,n,l,r,o,s,a,f,d,u,w,_,A)=>{const b=A(l,r);let C=Un.cache[e];C||(C=Un.cache[e]=ht("img"),C.onerror=()=>{delete Un.cache[e]},C.src=e);const R=()=>{try{b.ctx.drawImage(C,o,s,a,f,d,u,w,_)}catch{}b.style.filter=n?"invert()":""};return $(C).on("load",R),R(),b};Un.cache={};const ea=(e,n,l,r,o,s,a,f,d,u,w,_,A,b)=>{const C=A(l,r);C.classList.add(e),C.style.width=a+"px",C.style.height=f+"px";const R=()=>{const L=window.devicePixelRatio!==1;C.classList.toggle("use-svg",L),C.style.backgroundPosition=`${-o}px ${-s-(b?1:0)}px`};return C._on_zoom_etc&&Ke.off("theme-load resize",C._on_zoom_etc),Ke.on("theme-load resize",R),C._on_zoom_etc=R,R(),C.style.borderColor="transparent",C.style.borderStyle="solid",C.style.borderLeftWidth=d+"px",C.style.borderTopWidth=u+"px",C.style.borderRightWidth=l-d-w+"px",C.style.borderBottomWidth=r-u-_+"px",C.style.backgroundClip="content-box",C.style.filter=n?"invert()":"",C},bn=(e,n,l,r,o)=>{const s=$(ht("div")).addClass("chooser").css("touch-action","none"),a=f=>{r(f)||(l(f),Ke.trigger("option-changed"))};return s.on("update",()=>{if(!s.is(":visible"))return;s.empty();for(let u=0;u<e.length;u++)(w=>{const _=$(ht("div")).addClass("chooser-option").appendTo(s);_.data("thing",w);const A=(R,L)=>{let N=_.find("canvas")[0];return N?(N.width!==R&&(N.width=R),N.height!==L&&(N.height=L)):(N=et(R,L),_.append(N)),N},b=(R,L)=>{let N=_.find("div")[0];return N?(N.style.width!==R+"px"&&(N.style.width=R+"px"),N.style.height!==L+"px"&&(N.style.height=L+"px")):(N=ht("div"),N.style.width=R+"px",N.style.height=L+"px",_.append(N)),N},C=()=>{const R=getComputedStyle(s[0]).getPropertyValue("--Hilight"),L=o?"rgb(192, 192, 192)":"";_.css({backgroundColor:r(w)?R:L}),n(w,r(w),A,b)};C(),Ke.on("option-changed theme-load redraw-tool-options-because-webglcontextrestored",C)})(e[u]);const f=u=>{const w=u.target.closest(".chooser-option");w&&a($(w).data("thing"))},d=u=>{const w=u.originalEvent.changedTouches[0],A=document.elementFromPoint(w.clientX,w.clientY).closest(".chooser-option");A&&a($(A).data("thing")),u.preventDefault()};s.on("pointerdown click",u=>{const w=u.target.closest(".chooser-option");w&&a($(w).data("thing")),u.type==="pointerdown"&&(s.on("pointerover",f),s.on("touchmove",d))}),Ke.on("pointerup pointercancel",()=>{s.off("pointerover",f),s.off("touchmove",d)})}),s},ti=()=>{const e=bn([{stroke:!0,fill:!1},{stroke:!0,fill:!0},{stroke:!1,fill:!0}],({stroke:n,fill:l},r,o)=>{const s=o(39,21),a=s.ctx;let f=5;const d=getComputedStyle(s);return a.fillStyle=r?d.getPropertyValue("--HilightText"):d.getPropertyValue("--WindowText"),n&&a.fillRect(f,f,s.width-f*2,s.height-f*2),f+=1,a.fillStyle=d.getPropertyValue("--ButtonShadow"),l?a.fillRect(f,f,s.width-f*2,s.height-f*2):a.clearRect(f,f,s.width-f*2,s.height-f*2),s},({stroke:n,fill:l})=>{e.stroke=n,e.fill=l},({stroke:n,fill:l})=>e.stroke===n&&e.fill===l).addClass("choose-shape-style");return e.fill=!1,e.stroke=!0,e},Lo=bn((()=>{const e=["circle","square","reverse_diagonal","diagonal"],n=[7,4,1],l=[8,5,2],r=[];return e.forEach(o=>{(o==="circle"?n:l).forEach(a=>{r.push({shape:o,size:a})})}),r})(),(e,n,l)=>{const r=l(10,10),o=getComputedStyle(r),s=e.shape,a=e.size,f=n?o.getPropertyValue("--HilightText"):o.getPropertyValue("--WindowText");return ii(r.ctx,5,5,s,a),Zt(r.ctx,f),r},({shape:e,size:n})=>{window.globAppstate.brush_shape=e,window.globAppstate.brush_size=n},({shape:e,size:n})=>window.globAppstate.brush_shape===e&&window.globAppstate.brush_size===n).addClass("choose-brush"),Mo=bn([4,6,8,10],(e,n,l)=>{const r=l(39,16),o=getComputedStyle(r);return r.ctx.fillStyle=n?o.getPropertyValue("--HilightText"):o.getPropertyValue("--WindowText"),Kr(r.ctx,"square",e),r},e=>{window.globAppstate.eraser_size=e},e=>window.globAppstate.eraser_size===e).addClass("choose-eraser"),Pr=bn([1,2,3,4,5],(e,n,l)=>{const a=l(39,12),f=(12-e)/2,d=getComputedStyle(a);return a.ctx.fillStyle=n?d.getPropertyValue("--HilightText"):d.getPropertyValue("--WindowText"),a.ctx.fillRect(5,~~f,39-5*2,e),a},e=>{window.globAppstate.stroke_size=e},e=>window.globAppstate.stroke_size===e).addClass("choose-stroke-size"),Fr=[1,2,6,8,10],Wi=bn(Fr,(e,n,l,r)=>{const o=Fr.indexOf(e),s=e===10,a=ea("magnification-option",n,39,s?2:13,o*23,0,23,9,8,2,23,9,r);return s&&$(a).addClass("secret-option"),a},e=>{hi(e)},e=>e===window.globAppstate.magnification,!0).addClass("choose-magnification").css({position:"relative"});Wi.on("update",()=>{Wi.find(".secret-option").parent().css({position:"absolute",bottom:"-2px",left:0,opacity:0,height:2,overflow:"hidden"})});const $i=[9,16,24],Do=bn($i,(e,n,l)=>{const o=$i.indexOf(e),s=$i.length,f=o===2?0:4,d=72/s-f*2,u=23,w=72/s*o+f;return Un("images/options-airbrush-size.png",n,d,u,w,0,d,u,0,0,d,u,l)},e=>{window.globAppstate.airbrush_size=e},e=>e===window.globAppstate.airbrush_size,!0).addClass("choose-airbrush-size"),Ur=bn([!1,!0],(e,n,l,r)=>ea("transparent-mode-option",!1,39,27,0,e?22:0,35,23,2,2,35,23,r,e),e=>{window.globAppstate.tool_transparent_mode=e},e=>e===window.globAppstate.tool_transparent_mode,!0).addClass("choose-transparent-mode");console.log("JS 실행:","tools.js");const ai="TOOL_FREE_FORM_SELECT",$t="TOOL_SELECT",Oo="TOOL_ERASER",Po="TOOL_FILL",Fo="TOOL_PICK_COLOR",Uo="TOOL_MAGNIFIER",$o="TOOL_PENCIL",Bo="TOOL_BRUSH",jo="TOOL_AIRBRUSH",zo="TOOL_LINE",ta="TOOL_CURVE",Ho="TOOL_RECTANGLE",na="TOOL_POLYGON",Go="TOOL_ELLIPSE",qo="TOOL_ROUNDED_RECTANGLE",sn=[{id:ai,name:localize("Free-Form Select"),speech_recognition:[],help_icon:"p_free.gif",description:localize("Selects a free-form part of the picture to move, copy, or edit."),cursor:["precise",[16,16],"crosshair"],preview_canvas:null,points:[],x_min:1/0,x_max:-1/0,y_min:1/0,y_max:-1/0,pointerdown(){this.x_min=window.globAppstate.pointer.x,this.x_max=window.globAppstate.pointer.x+1,this.y_min=window.globAppstate.pointer.y,this.y_max=window.globAppstate.pointer.y+1,this.points=[],this.preview_canvas=et(window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),Gt()},paint(e,n,l){window.globAppstate.pointer.x=Math.min(window.globAppstate.main_canvas.width,window.globAppstate.pointer.x),window.globAppstate.pointer.x=Math.max(0,window.globAppstate.pointer.x),window.globAppstate.pointer.y=Math.min(window.globAppstate.main_canvas.height,window.globAppstate.pointer.y),window.globAppstate.pointer.y=Math.max(0,window.globAppstate.pointer.y),this.points.push(window.globAppstate.pointer),this.x_min=Math.min(window.globAppstate.pointer.x,this.x_min),this.x_max=Math.max(window.globAppstate.pointer.x,this.x_max),this.y_min=Math.min(window.globAppstate.pointer.y,this.y_min),this.y_max=Math.max(window.globAppstate.pointer.y,this.y_max),zn(window.globAppstate.pointer_previous.x,window.globAppstate.pointer_previous.y,window.globAppstate.pointer.x,window.globAppstate.pointer.y,(r,o)=>{this.ffs_paint_iteration(r,o)})},ffs_paint_iteration(e,n){e=Math.min(window.globAppstate.main_canvas.width,e),e=Math.max(0,e),n=Math.min(window.globAppstate.main_canvas.height,n),n=Math.max(0,n);const l=2,r=~~(e-l/2),o=~~(n-l/2),s=l,a=l,f=this.preview_canvas.ctx,d=window.globAppstate.main_ctx.getImageData(r,o,s,a),u=f.getImageData(r,o,s,a);for(let w=0,_=u.data.length;w<_;w+=4)u.data[w+0]=255-d.data[w+0],u.data[w+1]=255-d.data[w+1],u.data[w+2]=255-d.data[w+2],u.data[w+3]=255;f.putImageData(u,r,o)},pointerup(){this.preview_canvas.width=1,this.preview_canvas.height=1;const e=No(window.globAppstate.main_canvas,this.points,this.x_min,this.y_min,this.x_max,this.y_max);window.globAppstate.selection&&(ot("This isn't supposed to happen: Free-Form Select after Select in the tool chain?"),li()),wt({name:localize("Free-Form Select"),icon:St(Mt(ai)),soft:!0},()=>{window.globAppstate.selection=new Cn(this.x_min,this.y_min,this.x_max-this.x_min,this.y_max-this.y_min,e),window.globAppstate.selection.cut_out_background()})},cancel(){this.preview_canvas&&(this.preview_canvas.width=1,this.preview_canvas.height=1)},drawPreviewUnderGrid(e,n,l,r,o,s,a){!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas||this.preview_canvas&&(e.scale(o,o),e.translate(s,a),e.drawImage(this.preview_canvas,0,0))},$options:Ur},{id:$t,name:localize("Select"),speech_recognition:[],help_icon:"p_sel.gif",description:localize("Selects a rectangular part of the picture to move, copy, or edit."),cursor:["precise",[16,16],"crosshair"],selectBox(e,n,l,r){if(l>1&&r>1){var o=window.globAppstate.selection;if(window.globAppstate.selection&&li(),window.globAppstate.ctrl)wt({name:"Crop"},()=>{var _=et(l,r);_.ctx.drawImage(window.globAppstate.main_canvas,-e,-n),window.globAppstate.main_ctx.copy(_),window.globApp.canvas_handles.show(),window.globApp.$canvas_area.trigger("resize")});else if(o){var s=Math.min(o.x,e),a=Math.min(o.y,n),f=Math.max(o.x+o.width,e+l),d=Math.max(o.y+o.height,n+r),u=et(f-s,d-a),w=et(f-s,d-a);w.ctx.drawImage(window.globAppstate.main_canvas,e,n,l,r,e-s,n-a,l,r),u.ctx.drawImage(o.canvas,o.x-s,o.y-a),u.ctx.globalCompositeOperation="xor",u.ctx.drawImage(w,0,0),wt({name:`${localize("Free-Form Select")}⊕${localize("Select")}`,icon:ao([Mt(ai),Mt($t)]),soft:!0},()=>{window.globAppstate.selection=new Cn(s,a,f-s,d-a,u),window.globAppstate.cut_out_background()})}else wt({name:localize("Select"),icon:St(Mt($t)),soft:!0},()=>{window.globAppstate.selection=new Cn(e,n,l,r)})}},$options:Ur},{id:Oo,name:localize("Eraser/Color Eraser"),speech_recognition:[],help_icon:"p_erase.gif",description:localize("Erases a portion of the picture, using the selected eraser shape."),cursor:["precise",[16,16],"crosshair"],mask_canvas:null,get_rect(e,n){const l=Math.ceil(e-window.globAppstate.eraser_size/2),r=Math.ceil(n-window.globAppstate.eraser_size/2),o=window.globAppstate.eraser_size,s=window.globAppstate.eraser_size;return{rect_x:l,rect_y:r,rect_w:o,rect_h:s}},drawPreviewUnderGrid(e,n,l,r,o,s,a){if(!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas)return;const{rect_x:f,rect_y:d,rect_w:u,rect_h:w}=this.get_rect(n,l);e.scale(o,o),e.translate(s,a),this.mask_canvas&&this.render_from_mask(e,!0),e.fillStyle=window.globAppstate.selected_colors.background,e.fillRect(f,d,u,w)},drawPreviewAboveGrid(e,n,l,r,o,s,a){if(!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas)return;const{rect_x:f,rect_y:d,rect_w:u,rect_h:w}=this.get_rect(n,l);e.scale(o,o),e.translate(s,a);const _=1/o;e.strokeStyle="black",e.lineWidth=_,r?e.strokeRect(f+e.lineWidth/2,d+e.lineWidth/2,u,w):e.strokeRect(f+e.lineWidth/2,d+e.lineWidth/2,u-e.lineWidth,w-e.lineWidth)},pointerdown(){this.mask_canvas=window.globAppstate.mask_layer.canvas},render_from_mask(e,n){e.save(),e.globalCompositeOperation="destination-out",e.drawImage(this.mask_canvas,0,0),e.restore();let l=window.globAppstate.selected_colors.background;on(l)[3]<1&&(l=n?"rgba(255, 0, 0, 0.3)":window.globAppstate.selected_colors.background)},pointerup(){this.mask_canvas&&wt({name:get_language().match(/^en\b/)?this.color_eraser_mode?"Color Eraser":"Eraser":localize("Eraser/Color Eraser"),icon:St(this)},()=>{const e=this.mask_canvas;e.getContext("2d");const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const l=n.getContext("2d");l.drawImage(e,0,0);const r=l.getImageData(0,0,n.width,n.height);for(let a=0;a<r.data.length;a+=4){const f=r.data[a+3]/255;r.data[a+3]=f>0?255:0}l.putImageData(r,0,0),window.globAppstate.main_ctx.save(),window.globAppstate.main_ctx.globalCompositeOperation="destination-out",window.globAppstate.main_ctx.drawImage(n,0,0),window.globAppstate.main_ctx.restore();let o=window.globAppstate.selected_colors.background;on(o)[3]<1||window.globAppstate.main_ctx.drawImage(this.mask_canvas,0,0),this.mask_canvas.ctx.clearRect(0,0,this.mask_canvas.width,this.mask_canvas.height),this.mask_canvas=null})},cancel(){this.mask_canvas.ctx.clearRect(0,0,this.mask_canvas.width,this.mask_canvas.height),this.mask_canvas=null},paint(e,n,l){zn(window.globAppstate.pointer_previous.x,window.globAppstate.pointer_previous.y,window.globAppstate.pointer.x,window.globAppstate.pointer.y,(r,o)=>{this.eraser_paint_iteration(e,r,o)})},eraser_paint_iteration(e,n,l){const{rect_x:r,rect_y:o,rect_w:s,rect_h:a}=this.get_rect(n,l);if(this.color_eraser_mode=window.globAppstate.button!==0,this.color_eraser_mode){const f=on(window.globAppstate.selected_colors.foreground),d=e.getImageData(r,o,s,a),u=this.mask_canvas.ctx.getImageData(r,o,s,a),w=1,_=on(window.globAppstate.selected_colors.background);for(let A=0,b=d.data.length;A<b;A+=4)Math.abs(d.data[A+0]-f[0])<=w&&Math.abs(d.data[A+1]-f[1])<=w&&Math.abs(d.data[A+2]-f[2])<=w&&Math.abs(d.data[A+3]-f[3])<=w&&(u.data[A+0]=_[0],u.data[A+1]=_[1],u.data[A+2]=_[2],u.data[A+3]=_[3]);this.mask_canvas.ctx.putImageData(u,r,o)}else{this.mask_canvas.ctx.fillStyle=window.globAppstate.selected_colors.background;let f=window.globAppstate.selected_colors.background;on(f)[3]<1&&(f="rgba(255, 0, 0, 0.3)",this.mask_canvas.ctx.fillStyle=f),this.mask_canvas.ctx.globalCompositeOperation="destination-out",this.mask_canvas.ctx.fillRect(r,o,s,a),this.mask_canvas.ctx.globalCompositeOperation="source-over",this.mask_canvas.ctx.fillRect(r,o,s,a)}},$options:Mo},{id:Po,name:localize("Fill With Color"),speech_recognition:[],help_icon:"p_paint.gif",description:"Fills an area with the selected drawing color.",cursor:["fill-bucket",[8,22],"crosshair"],pointerdown(e,n,l){window.globAppstate.shift?wt({name:"Replace Color",icon:St(this)},()=>{yo(e,n,l,window.globAppstate.fill_color)}):wt({name:localize("Fill With Color"),icon:St(this)},()=>{wo(e,n,l,window.globAppstate.fill_color)})}},{id:Fo,name:localize("Pick Color"),speech_recognition:[],help_icon:"p_eye.gif",description:localize("Picks up a color from the picture for drawing."),cursor:["eye-dropper",[9,22],"crosshair"],deselect:!0,current_color:"",display_current_color(){this.$options.css({background:this.current_color})},pointerdown(){Ke.one("pointerup",()=>{this.$options.css({background:""})})},paint(e,n,l){if(n>=0&&l>=0&&n<window.globAppstate.main_canvas.width&&l<window.globAppstate.main_canvas.height){const r=e.getImageData(~~n,~~l,1,1),[o,s,a,f]=r.data;this.current_color=`rgba(${o},${s},${a},${f/255})`}else this.current_color="white";this.display_current_color()},pointerup(){window.globAppstate.selected_colors[window.globAppstate.pick_color_slot]=this.current_color,Ke.trigger("option-changed")},$options:$(ht("div"))},{id:Uo,name:localize("Magnifier"),speech_recognition:[],help_icon:"p_zoom.gif",description:localize("Changes the magnification."),cursor:["magnifier",[16,16],"zoom-in"],deselect:!1,getProspectiveMagnification:(e=1)=>{const n={.5:1,1:2,2:3,3:4,4:5,5:6,6:8,8:10,10:12,12:15,15:20,20:25,25:30,30:40,40:50,50:60,60:75,75:100,100:100},l={100:75,75:60,60:50,50:40,40:30,30:25,25:20,20:15,15:12,12:10,10:8,8:6,6:5,5:4,4:3,3:2,2:1,1:.5,.5:.5};function r(o){const s=Object.keys(n).map(Number).sort((a,f)=>a-f);for(let a=s.length-1;a>=0;a--)if(o>=s[a])return s[a];return s[0]}return e==2?l[r(window.globAppstate.magnification)]:n[r(window.globAppstate.magnification)]},drawPreviewAboveGrid(e,n,l,r,o,s,a){if(!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas||window.globAppstate.pointer_active)return;const f=this.getProspectiveMagnification();if(console.log(f,window.globAppstate.magnification),f<window.globAppstate.magnification?window.globApp.$canvas.css({cursor:si("magnifier",[16,16],"zoom-out")}):window.globApp.$canvas.css({cursor:si("magnifier",[16,16],"zoom-in")}),f<window.globAppstate.magnification)return;const d=window.globApp.$canvas_area.width()/f,u=window.globApp.$canvas_area.height()/f;let w=~~(n-d/2),_=~~(l-u/2);w=Math.max(0,w),_=Math.max(0,_),w=Math.min(window.globAppstate.main_canvas.width-d,w),_=Math.min(window.globAppstate.main_canvas.height-u,_);let A=w+d,b=_+u;w=Math.max(0,w),_=Math.max(0,_),A=Math.min(window.globAppstate.main_canvas.width,A),b=Math.min(window.globAppstate.main_canvas.height,b);const C=A-w,R=b-_,L=w,N=_,j=window.globAppstate.main_canvas.ctx.getImageData(L,N,C+1,R+1),P=e.getImageData((L+s)*o,(N+a)*o,C*o+1,R*o+1);function S(h,p){const i=~~(h/o),x=~~(p/o),U=(i+x*j.width)*4,G=(h+p*P.width)*4;P.data[G+0]=255-j.data[U+0],P.data[G+1]=255-j.data[U+1],P.data[G+2]=255-j.data[U+2],P.data[G+3]=255}for(let h=0,p=P.width;h<p;h+=1)S(h,0),S(h,P.height-1);for(let h=1,p=P.height-1;h<p;h+=1)S(0,h),S(P.width-1,h);e.putImageData(P,(L+s)*o,(N+a)*o)},pointerdown(e,n,l){const r=window.globAppstate.magnification,o=this.getProspectiveMagnification(window.globAppstate.button);if(hi(o),window.globAppstate.magnification>r){const s=window.globApp.$canvas_area.width()/window.globAppstate.magnification,a=window.globApp.$canvas_area.height()/window.globAppstate.magnification;window.globApp.$canvas_area.scrollLeft((n-s/2)*window.globAppstate.magnification),window.globApp.$canvas_area.scrollTop((l-a/2)*window.globAppstate.magnification),window.globApp.$canvas_area.trigger("scroll")}},$options:Wi},{id:$o,name:localize("Pencil"),speech_recognition:[],help_icon:"p_pencil.gif",description:localize("Draws a free-form line one pixel wide."),cursor:["pencil",[13,23],"crosshair"],stroke_only:!0,get_brush(){return{size:window.globAppstate.pencil_size,shape:"circle"}}},{id:Bo,name:localize("Brush"),speech_recognition:[],help_icon:"p_brush.gif",description:localize("Draws using a brush with the selected shape and size."),cursor:["precise-dotted",[16,16],"crosshair"],dynamic_preview_cursor:!0,get_brush(){return{size:window.globAppstate.brush_size,shape:window.globAppstate.brush_shape}},$options:Lo},{id:jo,name:localize("Airbrush"),speech_recognition:[],help_icon:"p_airb.gif",description:localize("Draws using an airbrush of the selected size."),cursor:["airbrush",[7,22],"crosshair"],paint_on_time_interval:5,paint_mask(e,n,l){const r=window.globAppstate.airbrush_size/2;for(let o=0;o<6+r/5;o++){const s=(Math.random()*2-1)*r,a=(Math.random()*2-1)*r;s*s+a*a<=r*r&&e.fillRect(n+~~s,l+~~a,1,1)}Dt()},$options:Do},{id:zo,name:localize("Line"),speech_recognition:["line","line segment","straight line","lines","line segments","straight lines"],help_icon:"p_line.gif",description:localize("Draws a straight line with the selected line width."),cursor:["precise",[16,16],"crosshair"],stroke_only:!0,shape(e,n,l,r,o){Gi(window.globAppstate.stroke_size),Zn(e,n,l,n+r,l+o,window.globAppstate.stroke_size)},$options:Pr},{id:ta,name:localize("Curve"),speech_recognition:["curve","curved line","curvy","curvy line","Bezier","Bezier curve","spline","curves","splines","curved","curving","wave","wavy line","rounded line","round line","oscilloscope","sine wave","cosine","cosine wave"],help_icon:"p_curve.gif",description:localize("Draws a curved line with the selected line width."),cursor:["precise",[16,16],"crosshair"],stroke_only:!0,points:[],preview_canvas:null,pointerup(e,n,l){this.points.length>=4&&(wt({name:localize("Curve"),icon:St(this)},()=>{e.drawImage(this.preview_canvas,0,0)}),this.points=[])},pointerdown(e,n,l){this.points.length<1?(this.preview_canvas=et(window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),this.points.push({x:n,y:l}),$("body").hasClass("eye-gaze-mode")||this.points.push({x:n,y:l})):this.points.push({x:n,y:l})},paint(e,n,l){if(this.points.length<1)return;Gi(window.globAppstate.stroke_size);const r=this.points.length-1;this.points[r].x=n,this.points[r].y=l,this.preview_canvas.ctx.clearRect(0,0,this.preview_canvas.width,this.preview_canvas.height),this.preview_canvas.ctx.strokeStyle=window.globAppstate.stroke_color,this.points.length===4?Xr(this.preview_canvas.ctx,this.points[0].x,this.points[0].y,this.points[2].x,this.points[2].y,this.points[3].x,this.points[3].y,this.points[1].x,this.points[1].y,window.globAppstate.stroke_size):this.points.length===3?So(this.preview_canvas.ctx,this.points[0].x,this.points[0].y,this.points[2].x,this.points[2].y,this.points[1].x,this.points[1].y,window.globAppstate.stroke_size):this.points.length===2?Zn(this.preview_canvas.ctx,this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,window.globAppstate.stroke_size):Zn(this.preview_canvas.ctx,this.points[0].x,this.points[0].y,this.points[0].x,this.points[0].y,window.globAppstate.stroke_size),n-this.points[0].x,l-this.points[0].y},drawPreviewUnderGrid(e,n,l,r,o,s,a){this.preview_canvas&&(e.scale(o,o),e.translate(s,a),this.points.length>=1&&e.drawImage(this.preview_canvas,0,0))},cancel(){this.points=[]},end(){this.points=[],Dt()},$options:Pr},{id:Ho,name:localize("Rectangle"),speech_recognition:["rectangle","square","box","rect","sharp rectangle","sharp square","sharp box","sharp rect","sharp corners rectangle","sharp corners square","sharp corners box","sharp corners rect","sharp cornered rectangle","sharp cornered square","sharp cornered box","sharp cornered rect","rectangle with sharp corners","square with sharp corners","box with sharp corners","rect with sharp corners","rectangles","squares","boxes","rects","sharp rectangles","sharp squares","sharp boxes","sharp rects","sharp corners rectangles","sharp corners squares","sharp corners boxes","sharp corners rects","sharp cornered rectangles","sharp cornered squares","sharp cornered boxes","sharp cornered rects","rectangles with sharp corners","squares with sharp corners","boxes with sharp corners","rects with sharp corners"],help_icon:"p_rect.gif",description:localize("Draws a rectangle with the selected fill style."),cursor:["precise",[16,16],"crosshair"],shape(e,n,l,r,o){r<0&&(n+=r,r=-r),o<0&&(l+=o,o=-o),this.$options.fill&&e.fillRect(n,l,r,o),this.$options.stroke&&(r<window.globAppstate.stroke_size*2||o<window.globAppstate.stroke_size*2?(e.save(),e.fillStyle=e.strokeStyle,e.fillRect(n,l,r,o),e.restore()):(e.save(),e.fillStyle=e.strokeStyle,e.fillRect(n,l,window.globAppstate.stroke_size,o),e.fillRect(n+r-window.globAppstate.stroke_size,l,window.globAppstate.stroke_size,o),e.fillRect(n,l,r,window.globAppstate.stroke_size),e.fillRect(n,l+o-window.globAppstate.stroke_size,r,window.globAppstate.stroke_size),e.restore()))},$options:ti()},{id:na,name:localize("Polygon"),speech_recognition:["polygon","poly","shape","n-gon","free-form polygon","freeform polygon","free form polygon","triangle","quadrangle","pentagon","hexagon","heptagon","octagon","nonagon","decagon","undecagon","dodecagon","polygons","polys","shapes","n-gons","free-form polygons","freeform polygons","free form polygons","triangles","quadrangles","pentagons","hexagons","heptagons","octagons","nonagons","decagons","undecagons","dodecagons"],help_icon:"p_poly.gif",description:localize("Draws a polygon with the selected fill style."),cursor:["precise",[16,16],"crosshair"],last_click_pointerdown:{x:-1/0,y:-1/0,time:-1/0},last_click_pointerup:{x:-1/0,y:-1/0,time:-1/0},points:[],preview_canvas:null,pointerup(e,n,l){if(this.points.length<1)return;const r=this.points.length-1;this.points[r].x=n,this.points[r].y=l;const o=this.points[r].x-this.points[0].x,s=this.points[r].y-this.points[0].y,a=Math.sqrt(o*o+s*s);$("body").hasClass("eye-gaze-mode")?this.points.length>=3&&a<window.globAppstate.stroke_size*10+20&&this.complete(e):a<window.globAppstate.stroke_size*5.1010101&&this.complete(e),this.last_click_pointerup={x:n,y:l,time:+new Date},this.updateStatus()},pointerdown(e,n,l){if(this.points.length<1)this.preview_canvas=et(window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),this.points.push({x:n,y:l}),$("body").hasClass("eye-gaze-mode")||this.points.push({x:n,y:l});else{const r=this.last_click_pointerdown.x,o=this.last_click_pointerdown.y,s=this.last_click_pointerdown.time,a=n-r,f=l-o,d=+new Date-s;Math.sqrt(a*a+f*f)<4.1010101&&d<250?this.complete(e):this.points.push({x:n,y:l})}this.last_click_pointerdown={x:n,y:l,time:+new Date}},paint(e,n,l){if(this.points.length<1)return;const r=this.points.length-1;if(this.points[r].x=n,this.points[r].y=l,this.preview_canvas.ctx.clearRect(0,0,this.preview_canvas.width,this.preview_canvas.height),this.$options.fill&&!this.$options.stroke){this.preview_canvas.ctx.drawImage(window.globAppstate.main_canvas,0,0),this.preview_canvas.ctx.strokeStyle="white",this.preview_canvas.ctx.globalCompositeOperation="difference";var o=window.globAppstate.stroke_size;window.globAppstate.stroke_size=2,Or(this.preview_canvas.ctx,this.points),window.globAppstate.stroke_size=o}else this.points.length>1?(this.preview_canvas.ctx.strokeStyle=window.globAppstate.stroke_color,Or(this.preview_canvas.ctx,this.points)):Zn(this.preview_canvas.ctx,this.points[0].x,this.points[0].y,this.points[0].x,this.points[0].y,window.globAppstate.stroke_size);this.updateStatus()},drawPreviewUnderGrid(e,n,l,r,o,s,a){this.preview_canvas&&(e.scale(o,o),e.translate(s,a),e.drawImage(this.preview_canvas,0,0))},complete(e){this.points.length>=3&&wt({name:localize("Polygon"),icon:St(this)},()=>{e.fillStyle=window.globAppstate.fill_color,e.strokeStyle=window.globAppstate.stroke_color;var n=window.globAppstate.stroke_size;this.$options.fill&&!this.$options.stroke&&(window.globAppstate.stroke_size=2,e.strokeStyle=window.globAppstate.fill_color),di(e,this.points,this.$options.stroke||this.$options.fill&&!this.$options.stroke,this.$options.fill),window.globAppstate.stroke_size=n}),this.reset()},cancel(){this.reset()},end(e){this.complete(e),Dt()},updateStatus(){let e=1/0,n=-1/0,l=1/0,r=-1/0;for(const o of this.points)e=Math.min(o.x,e),n=Math.max(o.x,n),l=Math.min(o.y,l),r=Math.max(o.y,r)},reset(){this.points=[],this.last_click_pointerdown={x:-1/0,y:-1/0,time:-1/0},this.last_click_pointerup={x:-1/0,y:-1/0,time:-1/0},this.preview_canvas&&(this.preview_canvas.width=1,this.preview_canvas.height=1)},shape_colors:!0,$options:ti()},{id:Go,name:localize("Ellipse"),speech_recognition:["ellipse","circle","oval","ovoid","ovaloid","oviform","elliptical","oblong circle","stretched circle","ball","sphere","round tool","rounded tool","ellipses","circles","ovals","ovoids","ovaloids","oviforms","ellipticals","oblong circles","stretched circles","balls","spheres"],help_icon:"p_oval.gif",description:localize("Draws an ellipse with the selected fill style."),cursor:["precise",[16,16],"crosshair"],shape(e,n,l,r,o){r<0&&(n+=r,r=-r),o<0&&(l+=o,o=-o),r<window.globAppstate.stroke_size||o<window.globAppstate.stroke_size?(e.fillStyle=e.strokeStyle,Hi(e,n,l,r,o,!1,!0)):Hi(e,n+~~(window.globAppstate.stroke_size/2),l+~~(window.globAppstate.stroke_size/2),r-window.globAppstate.stroke_size,o-window.globAppstate.stroke_size,this.$options.stroke,this.$options.fill)},$options:ti()},{id:qo,name:localize("Rounded Rectangle"),speech_recognition:["rounded rectangle","rounded square","rounded box","round rectangle","round square","round box","rounded corners rectangle","rounded corners square","rounded corners box","round cornered rectangle","round cornered square","round cornered box","rounded cornered rectangle","rounded cornered square","rounded cornered box","rounded corner rectangle","rounded corner square","rounded corner box","rectangle with round corners","square with round corners","box with round corners","rectangle with rounded corners","square with rounded corners","box with rounded corners","soft rectangle","soft square","soft box","soft corners rectangle","soft corners square","soft corners box","soft cornered rectangle","soft cornered square","soft cornered box","soft corner rectangle","soft corner square","soft corner box","rectangle with soft corners","square with soft corners","box with soft corners","round rect","roundrect","rounded rectangles","rounded squares","rounded boxes","round rectangles","round squares","round boxes","rounded corners rectangles","rounded corners squares","rounded corners boxes","round cornered rectangles","round cornered squares","round cornered boxes","rounded cornered rectangles","rounded cornered squares","rounded cornered boxes","rounded corner rectangles","rounded corner squares","rounded corner boxes","rectangles with round corners","squares with round corners","boxes with round corners","rectangles with rounded corners","squares with rounded corners","boxes with rounded corners","soft rectangles","soft squares","soft boxes","soft corners rectangles","soft corners squares","soft corners boxes","soft cornered rectangles","soft cornered squares","soft cornered boxes","soft corner rectangles","soft corner squares","soft corner boxes","rectangles with soft corners","squares with soft corners","boxes with soft corners","round rects","roundrects"],help_icon:"p_rrect.gif",description:localize("Draws a rounded rectangle with the selected fill style."),cursor:["precise",[16,16],"crosshair"],shape(e,n,l,r,o){if(r<0&&(n+=r,r=-r),o<0&&(l+=o,o=-o),r<window.globAppstate.stroke_size||o<window.globAppstate.stroke_size){e.fillStyle=e.strokeStyle;const s=Math.min(8,r/2,o/2);Rr(e,n,l,r,o,s,s,!1,!0)}else{const s=Math.min(8,(r-window.globAppstate.stroke_size)/2,(o-window.globAppstate.stroke_size)/2);Rr(e,n+~~(window.globAppstate.stroke_size/2),l+~~(window.globAppstate.stroke_size/2),r-window.globAppstate.stroke_size,o-window.globAppstate.stroke_size,s,s,this.$options.stroke,this.$options.fill)}},$options:ti()}];sn.forEach(e=>{if(e.selectBox){let n=0,l=0,r=!1,o=0,s=0,a=0,f=0;e.pointerdown=()=>{n=window.globAppstate.pointer.x,l=window.globAppstate.pointer.y,r=!1,Ke.one("pointermove",()=>{r=!0}),window.globAppstate.selection&&li(),window.globApp.canvas_handles.hide()},e.paint=()=>{o=~~Math.max(0,Math.min(n,window.globAppstate.pointer.x)),s=~~Math.max(0,Math.min(l,window.globAppstate.pointer.y)),a=~~Math.min(window.globAppstate.main_canvas.width,Math.max(n,window.globAppstate.pointer.x)+1)-o,f=~~Math.min(window.globAppstate.main_canvas.height,Math.max(l,window.globAppstate.pointer.y+1))-s},e.pointerup=()=>{window.globApp.canvas_handles.show(),e.selectBox(o,s,a,f)},e.cancel=()=>{window.globApp.canvas_handles.show()},e.drawPreviewUnderGrid=(d,u,w,_,A,b,C)=>{window.globAppstate.pointer_active&&r&&(d.scale(A,A),d.translate(b,C),d.drawImage(window.globAppstate.main_canvas,0,0))},e.drawPreviewAboveGrid=(d,u,w,_,A,b,C)=>{window.globAppstate.pointer_active&&r&&Jr(d,o,s,a,f,A,b,C)}}e.shape&&(e.shape_canvas=null,e.pointerdown=()=>{e.shape_canvas=et(window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height)},e.paint=()=>{e.shape_canvas.ctx.clearRect(0,0,e.shape_canvas.width,e.shape_canvas.height),e.shape_canvas.ctx.fillStyle=window.globAppstate.main_ctx.fillStyle,e.shape_canvas.ctx.strokeStyle=window.globAppstate.main_ctx.strokeStyle,e.shape_canvas.ctx.lineWidth=window.globAppstate.main_ctx.lineWidth,e.shape(e.shape_canvas.ctx,window.globAppstate.pointer_start.x,window.globAppstate.pointer_start.y,window.globAppstate.pointer.x-window.globAppstate.pointer_start.x,window.globAppstate.pointer.y-window.globAppstate.pointer_start.y),window.globAppstate.pointer.x-window.globAppstate.pointer_start.x,window.globAppstate.pointer.y-window.globAppstate.pointer_start.y},e.pointerup=()=>{e.shape_canvas&&wt({name:e.name,icon:St(e)},()=>{window.globAppstate.main_ctx.drawImage(e.shape_canvas,0,0),e.shape_canvas=null})},e.drawPreviewUnderGrid=(n,l,r,o,s,a,f)=>{window.globAppstate.pointer_active&&e.shape_canvas&&(n.scale(s,s),n.translate(a,f),n.drawImage(e.shape_canvas,0,0))}),e.paint_mask&&(e.mask_canvas=null,e.pointerdown=(n,l,r)=>{e.mask_canvas||(e.mask_canvas=et(window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height)),e.mask_canvas.width!==window.globAppstate.main_canvas.width&&(e.mask_canvas.width=window.globAppstate.main_canvas.width),e.mask_canvas.height!==window.globAppstate.main_canvas.height&&(e.mask_canvas.height=window.globAppstate.main_canvas.height),e.mask_canvas.ctx.disable_image_smoothing()},e.pointerup=()=>{e.mask_canvas&&wt({name:e.name,icon:St(e)},()=>{e.render_from_mask(window.globAppstate.main_ctx),e.mask_canvas.width=1,e.mask_canvas.height=1})},e.paint=(n,l,r)=>{e.paint_mask(e.mask_canvas.ctx,l,r)},e.cancel=()=>{e.mask_canvas&&(e.mask_canvas.width=1,e.mask_canvas.height=1)},e.render_from_mask=(n,l)=>{n.save(),n.globalCompositeOperation="destination-out",n.drawImage(e.mask_canvas,0,0),n.restore();let r=window.globAppstate.stroke_color;const o=et(e.mask_canvas);return Zt(o.ctx,r,0,0),n.drawImage(o,0,0),!0},e.drawPreviewUnderGrid=(n,l,r,o,s,a,f)=>{!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas||(n.scale(s,s),n.translate(a,f),e.mask_canvas&&e.render_from_mask(n,!0)&&requestAnimationFrame(()=>{Dt()}))}),e.get_brush&&(e.mask_canvas=null,e.init_mask_canvas=(n,l,r)=>{e.mask_canvas||(e.mask_canvas=window.globAppstate.mask_layer.canvas),e.mask_canvas.width!==window.globAppstate.main_canvas.width&&(e.mask_canvas.width=window.globAppstate.main_canvas.width),e.mask_canvas.height!==window.globAppstate.main_canvas.height&&(e.mask_canvas.height=window.globAppstate.main_canvas.height),e.mask_canvas.ctx.disable_image_smoothing()},e.pointerdown=(n,l,r)=>{e.init_mask_canvas()},e.pointerup=()=>{wt({name:e.name,icon:St(e)},()=>{window.globAppstate.main_ctx.drawImage(e.mask_canvas,0,0),e.mask_canvas.width=1,e.mask_canvas.height=1})},e.paint=()=>{const n=e.get_brush(),l=Vr(n.shape,n.size);e.mask_canvas.ctx.fillStyle=window.globAppstate.stroke_color,(n.size>1?po:zn)(window.globAppstate.pointer_previous.x,window.globAppstate.pointer_previous.y,window.globAppstate.pointer.x,window.globAppstate.pointer.y,(o,s)=>{for(const a of l)e.mask_canvas.ctx.fillStyle=window.globAppstate.stroke_color,e.mask_canvas.ctx.globalCompositeOperation="destination-out",e.mask_canvas.ctx.fillRect(o+a.x,s+a.y,1,1),e.mask_canvas.ctx.globalCompositeOperation="source-over",e.mask_canvas.ctx.fillRect(o+a.x,s+a.y,1,1)}),ii(e.mask_canvas.ctx,window.globAppstate.pointer_previous.x,window.globAppstate.pointer_previous.y,n.shape,n.size,window.globAppstate.stroke_color),ii(e.mask_canvas.ctx,window.globAppstate.pointer.x,window.globAppstate.pointer.y,n.shape,n.size,window.globAppstate.stroke_color)},e.cancel=()=>{e.mask_canvas&&(e.mask_canvas.width=1,e.mask_canvas.height=1)},e.render_from_mask=(n,l)=>{if(l&&e.dynamic_preview_cursor){const r=e.get_brush();ii(n,window.globAppstate.pointer.x,window.globAppstate.pointer.y,r.shape,r.size,window.globAppstate.stroke_color)}return!0},e.drawPreviewUnderGrid=(n,l,r,o,s,a,f)=>{if(!window.globAppstate.pointer_active&&!window.globAppstate.pointer_over_canvas)return;n.scale(s,s),n.translate(a,f),e.init_mask_canvas(),e.render_from_mask(n,!0)&&requestAnimationFrame(()=>{Dt()})})});console.log("JS 실행:","OnCanvasSelection.js");class Cn extends Yi{constructor(n,l,r,o,s){super(n,l,r,o,!0),this.$el.addClass("selection");let a=window.globAppstate.tool_transparent_mode,f=window.globAppstate.selected_colors.background;this._on_option_changed=()=>{this.source_canvas&&(a!==window.globAppstate.tool_transparent_mode||f!==window.globAppstate.selected_colors.background)&&(a=window.globAppstate.tool_transparent_mode,f=window.globAppstate.selected_colors.background,this.update_tool_transparent_mode())},$(window).on("option-changed",this._on_option_changed),this.instantiate(s)}position(){super.position(!0),Dt()}instantiate(n){this.$el.css({cursor:si("move",[8,8],"move"),touchAction:"none"}),this.position(),(()=>{n?(this.source_canvas=et(n),this.source_canvas.width!==this.width&&(this.source_canvas.width=this.width),this.source_canvas.height!==this.height&&(this.source_canvas.height=this.height),this.canvas=et(this.source_canvas)):(this.source_canvas=et(this.width,this.height),this.source_canvas.ctx.drawImage(window.globAppstate.main_canvas,this.x,this.y,this.width,this.height,0,0,this.width,this.height),this.canvas=et(this.source_canvas),this.cut_out_background()),this.$el.append(this.canvas),this.handles=new co({$handles_container:this.$el,$object_container:window.globApp.$canvas_area,outset:2,get_rect:()=>({x:this.x,y:this.y,width:this.width,height:this.height}),set_rect:({x:a,y:f,width:d,height:u})=>{wt({name:"Resize Selection",icon:St(Mt($t)),soft:!0},()=>{this.x=a,this.y=f,this.width=d,this.height=u,this.position(),this.resize()})},get_ghost_offset_left:()=>parseFloat(window.globApp.$canvas_area.css("padding-left"))+1,get_ghost_offset_top:()=>parseFloat(window.globApp.$canvas_area.css("padding-top"))+1});let r,o;const s=a=>{ps({match:f=>a.shiftKey&&/^(Smear|Stamp|Move) Selection$/.test(f.name)||!a.shiftKey&&/^Move Selection$/.test(f.name),name:a.shiftKey?"Smear Selection":"Move Selection",update_name:!0,icon:St(Mt($t)),soft:!0},()=>{const f=Vi(a);this.x=Math.max(Math.min(f.x-r,window.globAppstate.main_canvas.width),-this.width),this.y=Math.max(Math.min(f.y-o,window.globAppstate.main_canvas.height),-this.height),this.position(),a.shiftKey&&this.draw()})};this.canvas_pointerdown=a=>{a.preventDefault();const f=this.canvas.getBoundingClientRect(),d=a.clientX-f.left,u=a.clientY-f.top;r=~~(d/f.width*this.canvas.width),o=~~(u/f.height*this.canvas.height),$(window).on("pointermove",s),this.dragging=!0,Dt(),$(window).one("pointerup",()=>{$(window).off("pointermove",s),this.dragging=!1,Dt()}),a.shiftKey?wt({name:"Stamp Selection",icon:St(Mt($t)),soft:!0},()=>{this.draw()}):a.ctrlKey&&wt({name:"Stamp Selection",icon:St(Mt($t)),soft:!0},()=>{this.draw()})},$(this.canvas).on("pointerdown",this.canvas_pointerdown),window.globApp.$canvas_area.trigger("resize")})()}cut_out_background(){const n=this.canvas,l=window.globAppstate.main_ctx.getImageData(this.x,this.y,this.width,this.height),r=n.ctx.getImageData(0,0,this.width,this.height),o=et(n);Zt(o.ctx,window.globAppstate.selected_colors.background,this.x,this.y);for(let s=0;s<r.data.length;s+=4)r.data[s+3]>0?(r.data[s+0]=l.data[s+0],r.data[s+1]=l.data[s+1],r.data[s+2]=l.data[s+2],r.data[s+3]=l.data[s+3],l.data[s+0]=0,l.data[s+1]=0,l.data[s+2]=0,l.data[s+3]=0):(r.data[s+0]=0,r.data[s+1]=0,r.data[s+2]=0,r.data[s+3]=0);window.globAppstate.main_ctx.putImageData(l,this.x,this.y),n.ctx.putImageData(r,0,0),this.update_tool_transparent_mode(),(!window.globAppstate.transparency||window.globAppstate.tool_transparent_mode)&&window.globAppstate.main_ctx.drawImage(o,this.x,this.y),$(window).triggerHandler("session-update"),Dt()}update_tool_transparent_mode(){const n=this.source_canvas.ctx.getImageData(0,0,this.width,this.height),l=this.canvas.ctx.createImageData(this.width,this.height),r=on(window.globAppstate.selected_colors.background),o=1;for(let s=0;s<l.data.length;s+=4){let a=n.data[s+3]>1;window.globAppstate.tool_transparent_mode&&Math.abs(n.data[s+0]-r[0])<=o&&Math.abs(n.data[s+1]-r[1])<=o&&Math.abs(n.data[s+2]-r[2])<=o&&Math.abs(n.data[s+3]-r[3])<=o&&(a=!1),a&&(l.data[s+0]=n.data[s+0],l.data[s+1]=n.data[s+1],l.data[s+2]=n.data[s+2],l.data[s+3]=n.data[s+3])}this.canvas.ctx.putImageData(l,0,0),Dt()}replace_source_canvas(n){this.source_canvas=n;const l=et(n);$(this.canvas).replaceWith(l),this.canvas=l;const r=this.x+this.width/2,o=this.y+this.height/2,s=l.width,a=l.height;this.x=~~(r-s/2),this.y=~~(o-a/2),this.width=s,this.height=a,this.position(),$(this.canvas).on("pointerdown",this.canvas_pointerdown),this.$el.triggerHandler("resize"),this.update_tool_transparent_mode()}resize(){const n=et(this.width,this.height);n.ctx.drawImage(this.source_canvas,0,0,this.width,this.height),this.replace_source_canvas(n)}scale(n){const l=Math.max(1,this.width*n),r=Math.max(1,this.height*n),o=et(l,r);o.ctx.drawImage(this.source_canvas,0,0,o.width,o.height),this.replace_source_canvas(o)}draw(){try{window.globAppstate.main_ctx.drawImage(this.canvas,this.x,this.y)}catch{}}destroy(){super.destroy(),$(window).off("option-changed",this._on_option_changed),Dt()}}console.log("JS 실행:","color-data.js");const Wo=["rgb(0,0,0)","rgb(128,128,128)","rgb(128,0,0)","rgb(128,128,0)","rgb(0,128,0)","rgb(0,128,128)","rgb(0,0,128)","rgb(128,0,128)","rgb(128,128,64)","rgb(0,64,64)","rgb(0,128,255)","rgb(0,64,128)","rgb(64,0,255)","rgb(128,64,0)","rgb(128,64,0,0.1)","rgb(128,64,0,0.2)","rgb(255,255,255)","rgb(192,192,192)","rgb(255,0,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,255)","rgb(0,0,255)","rgb(255,0,255)","rgb(255,255,128)","rgb(0,255,128)","rgb(128,255,255)","rgb(128,128,255)","rgb(255,0,128)","rgb(255,128,64)","rgb(128,64,0,0.3)","rgb(128,64,0,0)"];console.log("JS 실행:","file-format-data.js");let In=[];const en=(e,n,l=In)=>{const r={formatID:e,mimeType:e,name:localize(n).replace(/\s+\([^(]+$/,""),nameWithExtensions:localize(n),extensions:[]},o=/\*\.([^);,]+)/g;if(get_direction()==="rtl"){const a="‏",f="‎";r.nameWithExtensions=r.nameWithExtensions.replace(o,`${a}*.${f}$1${a}`)}let s;for(;s=o.exec(n);){const a=s[1];r.extensions.push(a)}l.push(r)};en("image/png","PNG (*.png)");en("image/webp","WebP (*.webp)");en("image/gif","GIF (*.gif)");en("image/tiff","TIFF (*.tif;*.tiff)");en("image/jpeg","JPEG (*.jpg;*.jpeg;*.jpe;*.jfif)");en("image/x-bmp-1bpp","Monochrome Bitmap (*.bmp;*.dib)");en("image/x-bmp-4bpp","16 Color Bitmap (*.bmp;*.dib)");en("image/x-bmp-8bpp","256 Color Bitmap (*.bmp;*.dib)");en("image/bmp","24-bit Bitmap (*.bmp;*.dib)");const ia=[];console.log("AnyPalette:",ui);for(const[e,n]of Object.entries(ui.formats))if(n.write){const l=n.fileExtensions.map(r=>`*.${r}`).join(";");ia.push({formatID:e,name:n.name,nameWithExtensions:`${n.name} (${l})`,extensions:n.fileExtensions})}ia.sort((e,n)=>+(n.formatID==="RIFF_PALETTE")-+(e.formatID==="RIFF_PALETTE")||+(n.formatID==="GIMP_PALETTE")-+(e.formatID==="GIMP_PALETTE")||0);console.log("JS 실행:","storage.js");const Ko={get(e,n){let l;try{if(typeof e=="string"){const r=e,o=localStorage.getItem(r);o&&(l=JSON.parse(o))}else if(l={},Array.isArray(e)){const r=e;for(let o=0,s=r.length;o<s;o++){const a=r[o],f=localStorage.getItem(a);f&&(l[a]=JSON.parse(f))}}else{const r=e;for(const o in r){let s=r[o];const a=localStorage.getItem(o);a?l[o]=JSON.parse(a):l[o]=s}}}catch(r){n(r);return}n(null,l)},set(e,n,l){let r={};if(typeof e=="string")r={[e]:n};else{if(Array.isArray(e))throw new TypeError("Cannot set an array of keys (to what?)");r=e,l=n}for(const o in r){const s=r[o];try{localStorage.setItem(o,JSON.stringify(s))}catch(a){a.quotaExceeded=a.code===22||a.name==="NS_ERROR_DOM_QUOTA_REACHED"||a.number===-2147024882,l(a);return}}return l(null)}};var Vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ra={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(e){(function(n,l){e.exports=n.document?l(n,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return l(r)}})(typeof window<"u"?window:Vo,function(n,l){var r=[],o=Object.getPrototypeOf,s=r.slice,a=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},f=r.push,d=r.indexOf,u={},w=u.toString,_=u.hasOwnProperty,A=_.toString,b=A.call(Object),C={},R=function(c){return typeof c=="function"&&typeof c.nodeType!="number"&&typeof c.item!="function"},L=function(c){return c!=null&&c===c.window},N=n.document,j={type:!0,src:!0,nonce:!0,noModule:!0};function P(t,c,g){g=g||N;var m,I,k=g.createElement("script");if(k.text=t,c)for(m in j)I=c[m]||c.getAttribute&&c.getAttribute(m),I&&k.setAttribute(m,I);g.head.appendChild(k).parentNode.removeChild(k)}function S(t){return t==null?t+"":typeof t=="object"||typeof t=="function"?u[w.call(t)]||"object":typeof t}var h="3.7.1",p=/HTML$/i,i=function(t,c){return new i.fn.init(t,c)};i.fn=i.prototype={jquery:h,constructor:i,length:0,toArray:function(){return s.call(this)},get:function(t){return t==null?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var c=i.merge(this.constructor(),t);return c.prevObject=this,c},each:function(t){return i.each(this,t)},map:function(t){return this.pushStack(i.map(this,function(c,g){return t.call(c,g,c)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(i.grep(this,function(t,c){return(c+1)%2}))},odd:function(){return this.pushStack(i.grep(this,function(t,c){return c%2}))},eq:function(t){var c=this.length,g=+t+(t<0?c:0);return this.pushStack(g>=0&&g<c?[this[g]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:r.sort,splice:r.splice},i.extend=i.fn.extend=function(){var t,c,g,m,I,k,O=arguments[0]||{},Q=1,J=arguments.length,ie=!1;for(typeof O=="boolean"&&(ie=O,O=arguments[Q]||{},Q++),typeof O!="object"&&!R(O)&&(O={}),Q===J&&(O=this,Q--);Q<J;Q++)if((t=arguments[Q])!=null)for(c in t)m=t[c],!(c==="__proto__"||O===m)&&(ie&&m&&(i.isPlainObject(m)||(I=Array.isArray(m)))?(g=O[c],I&&!Array.isArray(g)?k=[]:!I&&!i.isPlainObject(g)?k={}:k=g,I=!1,O[c]=i.extend(ie,k,m)):m!==void 0&&(O[c]=m));return O},i.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var c,g;return!t||w.call(t)!=="[object Object]"?!1:(c=o(t),c?(g=_.call(c,"constructor")&&c.constructor,typeof g=="function"&&A.call(g)===b):!0)},isEmptyObject:function(t){var c;for(c in t)return!1;return!0},globalEval:function(t,c,g){P(t,{nonce:c&&c.nonce},g)},each:function(t,c){var g,m=0;if(x(t))for(g=t.length;m<g&&c.call(t[m],m,t[m])!==!1;m++);else for(m in t)if(c.call(t[m],m,t[m])===!1)break;return t},text:function(t){var c,g="",m=0,I=t.nodeType;if(!I)for(;c=t[m++];)g+=i.text(c);return I===1||I===11?t.textContent:I===9?t.documentElement.textContent:I===3||I===4?t.nodeValue:g},makeArray:function(t,c){var g=c||[];return t!=null&&(x(Object(t))?i.merge(g,typeof t=="string"?[t]:t):f.call(g,t)),g},inArray:function(t,c,g){return c==null?-1:d.call(c,t,g)},isXMLDoc:function(t){var c=t&&t.namespaceURI,g=t&&(t.ownerDocument||t).documentElement;return!p.test(c||g&&g.nodeName||"HTML")},merge:function(t,c){for(var g=+c.length,m=0,I=t.length;m<g;m++)t[I++]=c[m];return t.length=I,t},grep:function(t,c,g){for(var m,I=[],k=0,O=t.length,Q=!g;k<O;k++)m=!c(t[k],k),m!==Q&&I.push(t[k]);return I},map:function(t,c,g){var m,I,k=0,O=[];if(x(t))for(m=t.length;k<m;k++)I=c(t[k],k,g),I!=null&&O.push(I);else for(k in t)I=c(t[k],k,g),I!=null&&O.push(I);return a(O)},guid:1,support:C}),typeof Symbol=="function"&&(i.fn[Symbol.iterator]=r[Symbol.iterator]),i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,c){u["[object "+c+"]"]=c.toLowerCase()});function x(t){var c=!!t&&"length"in t&&t.length,g=S(t);return R(t)||L(t)?!1:g==="array"||c===0||typeof c=="number"&&c>0&&c-1 in t}function U(t,c){return t.nodeName&&t.nodeName.toLowerCase()===c.toLowerCase()}var G=r.pop,Z=r.sort,q=r.splice,re="[\\x20\\t\\r\\n\\f]",pe=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g");i.contains=function(t,c){var g=c&&c.parentNode;return t===g||!!(g&&g.nodeType===1&&(t.contains?t.contains(g):t.compareDocumentPosition&&t.compareDocumentPosition(g)&16))};var de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ve(t,c){return c?t==="\0"?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}i.escapeSelector=function(t){return(t+"").replace(de,ve)};var Ie=N,De=f;(function(){var t,c,g,m,I,k=De,O,Q,J,ie,le,fe=i.expando,oe=0,be=0,$e=Yn(),Ze=Yn(),We=Yn(),xt=Yn(),At=function(W,te){return W===te&&(I=!0),0},qt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Wt="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Qe="\\["+re+"*("+Wt+")(?:"+re+"*([*^$|!~]?=)"+re+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Wt+"))|)"+re+"*\\]",fn=":("+Wt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Qe+")*)|.*)\\)|)",nt=new RegExp(re+"+","g"),bt=new RegExp("^"+re+"*,"+re+"*"),Mn=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),Ri=new RegExp(re+"|>"),Kt=new RegExp(fn),Dn=new RegExp("^"+Wt+"$"),Vt={ID:new RegExp("^#("+Wt+")"),CLASS:new RegExp("^\\.("+Wt+")"),TAG:new RegExp("^("+Wt+"|[*])"),ATTR:new RegExp("^"+Qe),PSEUDO:new RegExp("^"+fn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+qt+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},tn=/^(?:input|select|textarea|button)$/i,nn=/^h\d$/i,Pt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ki=/[+~]/,Xt=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),Jt=function(W,te){var ae="0x"+W.slice(1)-65536;return te||(ae<0?String.fromCharCode(ae+65536):String.fromCharCode(ae>>10|55296,ae&1023|56320))},Ya=function(){rn()},Xa=Jn(function(W){return W.disabled===!0&&U(W,"fieldset")},{dir:"parentNode",next:"legend"});function Ja(){try{return O.activeElement}catch{}}try{k.apply(r=s.call(Ie.childNodes),Ie.childNodes),r[Ie.childNodes.length].nodeType}catch{k={apply:function(te,ae){De.apply(te,s.call(ae))},call:function(te){De.apply(te,s.call(arguments,1))}}}function ct(W,te,ae,se){var ue,Ae,xe,Ce,Te,Xe,Fe,ze=te&&te.ownerDocument,Je=te?te.nodeType:9;if(ae=ae||[],typeof W!="string"||!W||Je!==1&&Je!==9&&Je!==11)return ae;if(!se&&(rn(te),te=te||O,J)){if(Je!==11&&(Te=Pt.exec(W)))if(ue=Te[1]){if(Je===9)if(xe=te.getElementById(ue)){if(xe.id===ue)return k.call(ae,xe),ae}else return ae;else if(ze&&(xe=ze.getElementById(ue))&&ct.contains(te,xe)&&xe.id===ue)return k.call(ae,xe),ae}else{if(Te[2])return k.apply(ae,te.getElementsByTagName(W)),ae;if((ue=Te[3])&&te.getElementsByClassName)return k.apply(ae,te.getElementsByClassName(ue)),ae}if(!xt[W+" "]&&(!ie||!ie.test(W))){if(Fe=W,ze=te,Je===1&&(Ri.test(W)||Mn.test(W))){for(ze=ki.test(W)&&Ni(te.parentNode)||te,(ze!=te||!C.scope)&&((Ce=te.getAttribute("id"))?Ce=i.escapeSelector(Ce):te.setAttribute("id",Ce=fe)),Xe=On(W),Ae=Xe.length;Ae--;)Xe[Ae]=(Ce?"#"+Ce:":scope")+" "+Xn(Xe[Ae]);Fe=Xe.join(",")}try{return k.apply(ae,ze.querySelectorAll(Fe)),ae}catch{xt(W,!0)}finally{Ce===fe&&te.removeAttribute("id")}}}return Sr(W.replace(pe,"$1"),te,ae,se)}function Yn(){var W=[];function te(ae,se){return W.push(ae+" ")>c.cacheLength&&delete te[W.shift()],te[ae+" "]=se}return te}function jt(W){return W[fe]=!0,W}function xn(W){var te=O.createElement("fieldset");try{return!!W(te)}catch{return!1}finally{te.parentNode&&te.parentNode.removeChild(te),te=null}}function Qa(W){return function(te){return U(te,"input")&&te.type===W}}function Za(W){return function(te){return(U(te,"input")||U(te,"button"))&&te.type===W}}function xr(W){return function(te){return"form"in te?te.parentNode&&te.disabled===!1?"label"in te?"label"in te.parentNode?te.parentNode.disabled===W:te.disabled===W:te.isDisabled===W||te.isDisabled!==!W&&Xa(te)===W:te.disabled===W:"label"in te?te.disabled===W:!1}}function dn(W){return jt(function(te){return te=+te,jt(function(ae,se){for(var ue,Ae=W([],ae.length,te),xe=Ae.length;xe--;)ae[ue=Ae[xe]]&&(ae[ue]=!(se[ue]=ae[ue]))})})}function Ni(W){return W&&typeof W.getElementsByTagName<"u"&&W}function rn(W){var te,ae=W?W.ownerDocument||W:Ie;return ae==O||ae.nodeType!==9||!ae.documentElement||(O=ae,Q=O.documentElement,J=!i.isXMLDoc(O),le=Q.matches||Q.webkitMatchesSelector||Q.msMatchesSelector,Q.msMatchesSelector&&Ie!=O&&(te=O.defaultView)&&te.top!==te&&te.addEventListener("unload",Ya),C.getById=xn(function(se){return Q.appendChild(se).id=i.expando,!O.getElementsByName||!O.getElementsByName(i.expando).length}),C.disconnectedMatch=xn(function(se){return le.call(se,"*")}),C.scope=xn(function(){return O.querySelectorAll(":scope")}),C.cssHas=xn(function(){try{return O.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),C.getById?(c.filter.ID=function(se){var ue=se.replace(Xt,Jt);return function(Ae){return Ae.getAttribute("id")===ue}},c.find.ID=function(se,ue){if(typeof ue.getElementById<"u"&&J){var Ae=ue.getElementById(se);return Ae?[Ae]:[]}}):(c.filter.ID=function(se){var ue=se.replace(Xt,Jt);return function(Ae){var xe=typeof Ae.getAttributeNode<"u"&&Ae.getAttributeNode("id");return xe&&xe.value===ue}},c.find.ID=function(se,ue){if(typeof ue.getElementById<"u"&&J){var Ae,xe,Ce,Te=ue.getElementById(se);if(Te){if(Ae=Te.getAttributeNode("id"),Ae&&Ae.value===se)return[Te];for(Ce=ue.getElementsByName(se),xe=0;Te=Ce[xe++];)if(Ae=Te.getAttributeNode("id"),Ae&&Ae.value===se)return[Te]}return[]}}),c.find.TAG=function(se,ue){return typeof ue.getElementsByTagName<"u"?ue.getElementsByTagName(se):ue.querySelectorAll(se)},c.find.CLASS=function(se,ue){if(typeof ue.getElementsByClassName<"u"&&J)return ue.getElementsByClassName(se)},ie=[],xn(function(se){var ue;Q.appendChild(se).innerHTML="<a id='"+fe+"' href='' disabled='disabled'></a><select id='"+fe+"-\r\\' disabled='disabled'><option selected=''></option></select>",se.querySelectorAll("[selected]").length||ie.push("\\["+re+"*(?:value|"+qt+")"),se.querySelectorAll("[id~="+fe+"-]").length||ie.push("~="),se.querySelectorAll("a#"+fe+"+*").length||ie.push(".#.+[+~]"),se.querySelectorAll(":checked").length||ie.push(":checked"),ue=O.createElement("input"),ue.setAttribute("type","hidden"),se.appendChild(ue).setAttribute("name","D"),Q.appendChild(se).disabled=!0,se.querySelectorAll(":disabled").length!==2&&ie.push(":enabled",":disabled"),ue=O.createElement("input"),ue.setAttribute("name",""),se.appendChild(ue),se.querySelectorAll("[name='']").length||ie.push("\\["+re+"*name"+re+"*="+re+`*(?:''|"")`)}),C.cssHas||ie.push(":has"),ie=ie.length&&new RegExp(ie.join("|")),At=function(se,ue){if(se===ue)return I=!0,0;var Ae=!se.compareDocumentPosition-!ue.compareDocumentPosition;return Ae||(Ae=(se.ownerDocument||se)==(ue.ownerDocument||ue)?se.compareDocumentPosition(ue):1,Ae&1||!C.sortDetached&&ue.compareDocumentPosition(se)===Ae?se===O||se.ownerDocument==Ie&&ct.contains(Ie,se)?-1:ue===O||ue.ownerDocument==Ie&&ct.contains(Ie,ue)?1:m?d.call(m,se)-d.call(m,ue):0:Ae&4?-1:1)}),O}ct.matches=function(W,te){return ct(W,null,null,te)},ct.matchesSelector=function(W,te){if(rn(W),J&&!xt[te+" "]&&(!ie||!ie.test(te)))try{var ae=le.call(W,te);if(ae||C.disconnectedMatch||W.document&&W.document.nodeType!==11)return ae}catch{xt(te,!0)}return ct(te,O,null,[W]).length>0},ct.contains=function(W,te){return(W.ownerDocument||W)!=O&&rn(W),i.contains(W,te)},ct.attr=function(W,te){(W.ownerDocument||W)!=O&&rn(W);var ae=c.attrHandle[te.toLowerCase()],se=ae&&_.call(c.attrHandle,te.toLowerCase())?ae(W,te,!J):void 0;return se!==void 0?se:W.getAttribute(te)},ct.error=function(W){throw new Error("Syntax error, unrecognized expression: "+W)},i.uniqueSort=function(W){var te,ae=[],se=0,ue=0;if(I=!C.sortStable,m=!C.sortStable&&s.call(W,0),Z.call(W,At),I){for(;te=W[ue++];)te===W[ue]&&(se=ae.push(ue));for(;se--;)q.call(W,ae[se],1)}return m=null,W},i.fn.uniqueSort=function(){return this.pushStack(i.uniqueSort(s.apply(this)))},c=i.expr={cacheLength:50,createPseudo:jt,match:Vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(W){return W[1]=W[1].replace(Xt,Jt),W[3]=(W[3]||W[4]||W[5]||"").replace(Xt,Jt),W[2]==="~="&&(W[3]=" "+W[3]+" "),W.slice(0,4)},CHILD:function(W){return W[1]=W[1].toLowerCase(),W[1].slice(0,3)==="nth"?(W[3]||ct.error(W[0]),W[4]=+(W[4]?W[5]+(W[6]||1):2*(W[3]==="even"||W[3]==="odd")),W[5]=+(W[7]+W[8]||W[3]==="odd")):W[3]&&ct.error(W[0]),W},PSEUDO:function(W){var te,ae=!W[6]&&W[2];return Vt.CHILD.test(W[0])?null:(W[3]?W[2]=W[4]||W[5]||"":ae&&Kt.test(ae)&&(te=On(ae,!0))&&(te=ae.indexOf(")",ae.length-te)-ae.length)&&(W[0]=W[0].slice(0,te),W[2]=ae.slice(0,te)),W.slice(0,3))}},filter:{TAG:function(W){var te=W.replace(Xt,Jt).toLowerCase();return W==="*"?function(){return!0}:function(ae){return U(ae,te)}},CLASS:function(W){var te=$e[W+" "];return te||(te=new RegExp("(^|"+re+")"+W+"("+re+"|$)"))&&$e(W,function(ae){return te.test(typeof ae.className=="string"&&ae.className||typeof ae.getAttribute<"u"&&ae.getAttribute("class")||"")})},ATTR:function(W,te,ae){return function(se){var ue=ct.attr(se,W);return ue==null?te==="!=":te?(ue+="",te==="="?ue===ae:te==="!="?ue!==ae:te==="^="?ae&&ue.indexOf(ae)===0:te==="*="?ae&&ue.indexOf(ae)>-1:te==="$="?ae&&ue.slice(-ae.length)===ae:te==="~="?(" "+ue.replace(nt," ")+" ").indexOf(ae)>-1:te==="|="?ue===ae||ue.slice(0,ae.length+1)===ae+"-":!1):!0}},CHILD:function(W,te,ae,se,ue){var Ae=W.slice(0,3)!=="nth",xe=W.slice(-4)!=="last",Ce=te==="of-type";return se===1&&ue===0?function(Te){return!!Te.parentNode}:function(Te,Xe,Fe){var ze,Je,Le,gt,Nt,Ct=Ae!==xe?"nextSibling":"previousSibling",Ft=Te.parentNode,Yt=Ce&&Te.nodeName.toLowerCase(),Tn=!Fe&&!Ce,Rt=!1;if(Ft){if(Ae){for(;Ct;){for(Le=Te;Le=Le[Ct];)if(Ce?U(Le,Yt):Le.nodeType===1)return!1;Nt=Ct=W==="only"&&!Nt&&"nextSibling"}return!0}if(Nt=[xe?Ft.firstChild:Ft.lastChild],xe&&Tn){for(Je=Ft[fe]||(Ft[fe]={}),ze=Je[W]||[],gt=ze[0]===oe&&ze[1],Rt=gt&&ze[2],Le=gt&&Ft.childNodes[gt];Le=++gt&&Le&&Le[Ct]||(Rt=gt=0)||Nt.pop();)if(Le.nodeType===1&&++Rt&&Le===Te){Je[W]=[oe,gt,Rt];break}}else if(Tn&&(Je=Te[fe]||(Te[fe]={}),ze=Je[W]||[],gt=ze[0]===oe&&ze[1],Rt=gt),Rt===!1)for(;(Le=++gt&&Le&&Le[Ct]||(Rt=gt=0)||Nt.pop())&&!((Ce?U(Le,Yt):Le.nodeType===1)&&++Rt&&(Tn&&(Je=Le[fe]||(Le[fe]={}),Je[W]=[oe,Rt]),Le===Te)););return Rt-=ue,Rt===se||Rt%se===0&&Rt/se>=0}}},PSEUDO:function(W,te){var ae,se=c.pseudos[W]||c.setFilters[W.toLowerCase()]||ct.error("unsupported pseudo: "+W);return se[fe]?se(te):se.length>1?(ae=[W,W,"",te],c.setFilters.hasOwnProperty(W.toLowerCase())?jt(function(ue,Ae){for(var xe,Ce=se(ue,te),Te=Ce.length;Te--;)xe=d.call(ue,Ce[Te]),ue[xe]=!(Ae[xe]=Ce[Te])}):function(ue){return se(ue,0,ae)}):se}},pseudos:{not:jt(function(W){var te=[],ae=[],se=Oi(W.replace(pe,"$1"));return se[fe]?jt(function(ue,Ae,xe,Ce){for(var Te,Xe=se(ue,null,Ce,[]),Fe=ue.length;Fe--;)(Te=Xe[Fe])&&(ue[Fe]=!(Ae[Fe]=Te))}):function(ue,Ae,xe){return te[0]=ue,se(te,null,xe,ae),te[0]=null,!ae.pop()}}),has:jt(function(W){return function(te){return ct(W,te).length>0}}),contains:jt(function(W){return W=W.replace(Xt,Jt),function(te){return(te.textContent||i.text(te)).indexOf(W)>-1}}),lang:jt(function(W){return Dn.test(W||"")||ct.error("unsupported lang: "+W),W=W.replace(Xt,Jt).toLowerCase(),function(te){var ae;do if(ae=J?te.lang:te.getAttribute("xml:lang")||te.getAttribute("lang"))return ae=ae.toLowerCase(),ae===W||ae.indexOf(W+"-")===0;while((te=te.parentNode)&&te.nodeType===1);return!1}}),target:function(W){var te=n.location&&n.location.hash;return te&&te.slice(1)===W.id},root:function(W){return W===Q},focus:function(W){return W===Ja()&&O.hasFocus()&&!!(W.type||W.href||~W.tabIndex)},enabled:xr(!1),disabled:xr(!0),checked:function(W){return U(W,"input")&&!!W.checked||U(W,"option")&&!!W.selected},selected:function(W){return W.parentNode&&W.parentNode.selectedIndex,W.selected===!0},empty:function(W){for(W=W.firstChild;W;W=W.nextSibling)if(W.nodeType<6)return!1;return!0},parent:function(W){return!c.pseudos.empty(W)},header:function(W){return nn.test(W.nodeName)},input:function(W){return tn.test(W.nodeName)},button:function(W){return U(W,"input")&&W.type==="button"||U(W,"button")},text:function(W){var te;return U(W,"input")&&W.type==="text"&&((te=W.getAttribute("type"))==null||te.toLowerCase()==="text")},first:dn(function(){return[0]}),last:dn(function(W,te){return[te-1]}),eq:dn(function(W,te,ae){return[ae<0?ae+te:ae]}),even:dn(function(W,te){for(var ae=0;ae<te;ae+=2)W.push(ae);return W}),odd:dn(function(W,te){for(var ae=1;ae<te;ae+=2)W.push(ae);return W}),lt:dn(function(W,te,ae){var se;for(ae<0?se=ae+te:ae>te?se=te:se=ae;--se>=0;)W.push(se);return W}),gt:dn(function(W,te,ae){for(var se=ae<0?ae+te:ae;++se<te;)W.push(se);return W})}},c.pseudos.nth=c.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[t]=Qa(t);for(t in{submit:!0,reset:!0})c.pseudos[t]=Za(t);function Tr(){}Tr.prototype=c.filters=c.pseudos,c.setFilters=new Tr;function On(W,te){var ae,se,ue,Ae,xe,Ce,Te,Xe=Ze[W+" "];if(Xe)return te?0:Xe.slice(0);for(xe=W,Ce=[],Te=c.preFilter;xe;){(!ae||(se=bt.exec(xe)))&&(se&&(xe=xe.slice(se[0].length)||xe),Ce.push(ue=[])),ae=!1,(se=Mn.exec(xe))&&(ae=se.shift(),ue.push({value:ae,type:se[0].replace(pe," ")}),xe=xe.slice(ae.length));for(Ae in c.filter)(se=Vt[Ae].exec(xe))&&(!Te[Ae]||(se=Te[Ae](se)))&&(ae=se.shift(),ue.push({value:ae,type:Ae,matches:se}),xe=xe.slice(ae.length));if(!ae)break}return te?xe.length:xe?ct.error(W):Ze(W,Ce).slice(0)}function Xn(W){for(var te=0,ae=W.length,se="";te<ae;te++)se+=W[te].value;return se}function Jn(W,te,ae){var se=te.dir,ue=te.next,Ae=ue||se,xe=ae&&Ae==="parentNode",Ce=be++;return te.first?function(Te,Xe,Fe){for(;Te=Te[se];)if(Te.nodeType===1||xe)return W(Te,Xe,Fe);return!1}:function(Te,Xe,Fe){var ze,Je,Le=[oe,Ce];if(Fe){for(;Te=Te[se];)if((Te.nodeType===1||xe)&&W(Te,Xe,Fe))return!0}else for(;Te=Te[se];)if(Te.nodeType===1||xe)if(Je=Te[fe]||(Te[fe]={}),ue&&U(Te,ue))Te=Te[se]||Te;else{if((ze=Je[Ae])&&ze[0]===oe&&ze[1]===Ce)return Le[2]=ze[2];if(Je[Ae]=Le,Le[2]=W(Te,Xe,Fe))return!0}return!1}}function Li(W){return W.length>1?function(te,ae,se){for(var ue=W.length;ue--;)if(!W[ue](te,ae,se))return!1;return!0}:W[0]}function eo(W,te,ae){for(var se=0,ue=te.length;se<ue;se++)ct(W,te[se],ae);return ae}function Qn(W,te,ae,se,ue){for(var Ae,xe=[],Ce=0,Te=W.length,Xe=te!=null;Ce<Te;Ce++)(Ae=W[Ce])&&(!ae||ae(Ae,se,ue))&&(xe.push(Ae),Xe&&te.push(Ce));return xe}function Mi(W,te,ae,se,ue,Ae){return se&&!se[fe]&&(se=Mi(se)),ue&&!ue[fe]&&(ue=Mi(ue,Ae)),jt(function(xe,Ce,Te,Xe){var Fe,ze,Je,Le,gt=[],Nt=[],Ct=Ce.length,Ft=xe||eo(te||"*",Te.nodeType?[Te]:Te,[]),Yt=W&&(xe||!te)?Qn(Ft,gt,W,Te,Xe):Ft;if(ae?(Le=ue||(xe?W:Ct||se)?[]:Ce,ae(Yt,Le,Te,Xe)):Le=Yt,se)for(Fe=Qn(Le,Nt),se(Fe,[],Te,Xe),ze=Fe.length;ze--;)(Je=Fe[ze])&&(Le[Nt[ze]]=!(Yt[Nt[ze]]=Je));if(xe){if(ue||W){if(ue){for(Fe=[],ze=Le.length;ze--;)(Je=Le[ze])&&Fe.push(Yt[ze]=Je);ue(null,Le=[],Fe,Xe)}for(ze=Le.length;ze--;)(Je=Le[ze])&&(Fe=ue?d.call(xe,Je):gt[ze])>-1&&(xe[Fe]=!(Ce[Fe]=Je))}}else Le=Qn(Le===Ce?Le.splice(Ct,Le.length):Le),ue?ue(null,Ce,Le,Xe):k.apply(Ce,Le)})}function Di(W){for(var te,ae,se,ue=W.length,Ae=c.relative[W[0].type],xe=Ae||c.relative[" "],Ce=Ae?1:0,Te=Jn(function(ze){return ze===te},xe,!0),Xe=Jn(function(ze){return d.call(te,ze)>-1},xe,!0),Fe=[function(ze,Je,Le){var gt=!Ae&&(Le||Je!=g)||((te=Je).nodeType?Te(ze,Je,Le):Xe(ze,Je,Le));return te=null,gt}];Ce<ue;Ce++)if(ae=c.relative[W[Ce].type])Fe=[Jn(Li(Fe),ae)];else{if(ae=c.filter[W[Ce].type].apply(null,W[Ce].matches),ae[fe]){for(se=++Ce;se<ue&&!c.relative[W[se].type];se++);return Mi(Ce>1&&Li(Fe),Ce>1&&Xn(W.slice(0,Ce-1).concat({value:W[Ce-2].type===" "?"*":""})).replace(pe,"$1"),ae,Ce<se&&Di(W.slice(Ce,se)),se<ue&&Di(W=W.slice(se)),se<ue&&Xn(W))}Fe.push(ae)}return Li(Fe)}function to(W,te){var ae=te.length>0,se=W.length>0,ue=function(Ae,xe,Ce,Te,Xe){var Fe,ze,Je,Le=0,gt="0",Nt=Ae&&[],Ct=[],Ft=g,Yt=Ae||se&&c.find.TAG("*",Xe),Tn=oe+=Ft==null?1:Math.random()||.1,Rt=Yt.length;for(Xe&&(g=xe==O||xe||Xe);gt!==Rt&&(Fe=Yt[gt])!=null;gt++){if(se&&Fe){for(ze=0,!xe&&Fe.ownerDocument!=O&&(rn(Fe),Ce=!J);Je=W[ze++];)if(Je(Fe,xe||O,Ce)){k.call(Te,Fe);break}Xe&&(oe=Tn)}ae&&((Fe=!Je&&Fe)&&Le--,Ae&&Nt.push(Fe))}if(Le+=gt,ae&&gt!==Le){for(ze=0;Je=te[ze++];)Je(Nt,Ct,xe,Ce);if(Ae){if(Le>0)for(;gt--;)Nt[gt]||Ct[gt]||(Ct[gt]=G.call(Te));Ct=Qn(Ct)}k.apply(Te,Ct),Xe&&!Ae&&Ct.length>0&&Le+te.length>1&&i.uniqueSort(Te)}return Xe&&(oe=Tn,g=Ft),Nt};return ae?jt(ue):ue}function Oi(W,te){var ae,se=[],ue=[],Ae=We[W+" "];if(!Ae){for(te||(te=On(W)),ae=te.length;ae--;)Ae=Di(te[ae]),Ae[fe]?se.push(Ae):ue.push(Ae);Ae=We(W,to(ue,se)),Ae.selector=W}return Ae}function Sr(W,te,ae,se){var ue,Ae,xe,Ce,Te,Xe=typeof W=="function"&&W,Fe=!se&&On(W=Xe.selector||W);if(ae=ae||[],Fe.length===1){if(Ae=Fe[0]=Fe[0].slice(0),Ae.length>2&&(xe=Ae[0]).type==="ID"&&te.nodeType===9&&J&&c.relative[Ae[1].type]){if(te=(c.find.ID(xe.matches[0].replace(Xt,Jt),te)||[])[0],te)Xe&&(te=te.parentNode);else return ae;W=W.slice(Ae.shift().value.length)}for(ue=Vt.needsContext.test(W)?0:Ae.length;ue--&&(xe=Ae[ue],!c.relative[Ce=xe.type]);)if((Te=c.find[Ce])&&(se=Te(xe.matches[0].replace(Xt,Jt),ki.test(Ae[0].type)&&Ni(te.parentNode)||te))){if(Ae.splice(ue,1),W=se.length&&Xn(Ae),!W)return k.apply(ae,se),ae;break}}return(Xe||Oi(W,Fe))(se,te,!J,ae,!te||ki.test(W)&&Ni(te.parentNode)||te),ae}C.sortStable=fe.split("").sort(At).join("")===fe,rn(),C.sortDetached=xn(function(W){return W.compareDocumentPosition(O.createElement("fieldset"))&1}),i.find=ct,i.expr[":"]=i.expr.pseudos,i.unique=i.uniqueSort,ct.compile=Oi,ct.select=Sr,ct.setDocument=rn,ct.tokenize=On,ct.escape=i.escapeSelector,ct.getText=i.text,ct.isXML=i.isXMLDoc,ct.selectors=i.expr,ct.support=i.support,ct.uniqueSort=i.uniqueSort})();var Ye=function(t,c,g){for(var m=[],I=g!==void 0;(t=t[c])&&t.nodeType!==9;)if(t.nodeType===1){if(I&&i(t).is(g))break;m.push(t)}return m},Re=function(t,c){for(var g=[];t;t=t.nextSibling)t.nodeType===1&&t!==c&&g.push(t);return g},Ue=i.expr.match.needsContext,Ge=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Me(t,c,g){return R(c)?i.grep(t,function(m,I){return!!c.call(m,I,m)!==g}):c.nodeType?i.grep(t,function(m){return m===c!==g}):typeof c!="string"?i.grep(t,function(m){return d.call(c,m)>-1!==g}):i.filter(c,t,g)}i.filter=function(t,c,g){var m=c[0];return g&&(t=":not("+t+")"),c.length===1&&m.nodeType===1?i.find.matchesSelector(m,t)?[m]:[]:i.find.matches(t,i.grep(c,function(I){return I.nodeType===1}))},i.fn.extend({find:function(t){var c,g,m=this.length,I=this;if(typeof t!="string")return this.pushStack(i(t).filter(function(){for(c=0;c<m;c++)if(i.contains(I[c],this))return!0}));for(g=this.pushStack([]),c=0;c<m;c++)i.find(t,I[c],g);return m>1?i.uniqueSort(g):g},filter:function(t){return this.pushStack(Me(this,t||[],!1))},not:function(t){return this.pushStack(Me(this,t||[],!0))},is:function(t){return!!Me(this,typeof t=="string"&&Ue.test(t)?i(t):t||[],!1).length}});var Ne,rt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,pt=i.fn.init=function(t,c,g){var m,I;if(!t)return this;if(g=g||Ne,typeof t=="string")if(t[0]==="<"&&t[t.length-1]===">"&&t.length>=3?m=[null,t,null]:m=rt.exec(t),m&&(m[1]||!c))if(m[1]){if(c=c instanceof i?c[0]:c,i.merge(this,i.parseHTML(m[1],c&&c.nodeType?c.ownerDocument||c:N,!0)),Ge.test(m[1])&&i.isPlainObject(c))for(m in c)R(this[m])?this[m](c[m]):this.attr(m,c[m]);return this}else return I=N.getElementById(m[2]),I&&(this[0]=I,this.length=1),this;else return!c||c.jquery?(c||g).find(t):this.constructor(c).find(t);else{if(t.nodeType)return this[0]=t,this.length=1,this;if(R(t))return g.ready!==void 0?g.ready(t):t(i)}return i.makeArray(t,this)};pt.prototype=i.fn,Ne=i(N);var ut=/^(?:parents|prev(?:Until|All))/,je={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(t){var c=i(t,this),g=c.length;return this.filter(function(){for(var m=0;m<g;m++)if(i.contains(this,c[m]))return!0})},closest:function(t,c){var g,m=0,I=this.length,k=[],O=typeof t!="string"&&i(t);if(!Ue.test(t)){for(;m<I;m++)for(g=this[m];g&&g!==c;g=g.parentNode)if(g.nodeType<11&&(O?O.index(g)>-1:g.nodeType===1&&i.find.matchesSelector(g,t))){k.push(g);break}}return this.pushStack(k.length>1?i.uniqueSort(k):k)},index:function(t){return t?typeof t=="string"?d.call(i(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,c){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(t,c))))},addBack:function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});function yt(t,c){for(;(t=t[c])&&t.nodeType!==1;);return t}i.each({parent:function(t){var c=t.parentNode;return c&&c.nodeType!==11?c:null},parents:function(t){return Ye(t,"parentNode")},parentsUntil:function(t,c,g){return Ye(t,"parentNode",g)},next:function(t){return yt(t,"nextSibling")},prev:function(t){return yt(t,"previousSibling")},nextAll:function(t){return Ye(t,"nextSibling")},prevAll:function(t){return Ye(t,"previousSibling")},nextUntil:function(t,c,g){return Ye(t,"nextSibling",g)},prevUntil:function(t,c,g){return Ye(t,"previousSibling",g)},siblings:function(t){return Re((t.parentNode||{}).firstChild,t)},children:function(t){return Re(t.firstChild)},contents:function(t){return t.contentDocument!=null&&o(t.contentDocument)?t.contentDocument:(U(t,"template")&&(t=t.content||t),i.merge([],t.childNodes))}},function(t,c){i.fn[t]=function(g,m){var I=i.map(this,c,g);return t.slice(-5)!=="Until"&&(m=g),m&&typeof m=="string"&&(I=i.filter(m,I)),this.length>1&&(je[t]||i.uniqueSort(I),ut.test(t)&&I.reverse()),this.pushStack(I)}});var F=/[^\x20\t\r\n\f]+/g;function T(t){var c={};return i.each(t.match(F)||[],function(g,m){c[m]=!0}),c}i.Callbacks=function(t){t=typeof t=="string"?T(t):i.extend({},t);var c,g,m,I,k=[],O=[],Q=-1,J=function(){for(I=I||t.once,m=c=!0;O.length;Q=-1)for(g=O.shift();++Q<k.length;)k[Q].apply(g[0],g[1])===!1&&t.stopOnFalse&&(Q=k.length,g=!1);t.memory||(g=!1),c=!1,I&&(g?k=[]:k="")},ie={add:function(){return k&&(g&&!c&&(Q=k.length-1,O.push(g)),function le(fe){i.each(fe,function(oe,be){R(be)?(!t.unique||!ie.has(be))&&k.push(be):be&&be.length&&S(be)!=="string"&&le(be)})}(arguments),g&&!c&&J()),this},remove:function(){return i.each(arguments,function(le,fe){for(var oe;(oe=i.inArray(fe,k,oe))>-1;)k.splice(oe,1),oe<=Q&&Q--}),this},has:function(le){return le?i.inArray(le,k)>-1:k.length>0},empty:function(){return k&&(k=[]),this},disable:function(){return I=O=[],k=g="",this},disabled:function(){return!k},lock:function(){return I=O=[],!g&&!c&&(k=g=""),this},locked:function(){return!!I},fireWith:function(le,fe){return I||(fe=fe||[],fe=[le,fe.slice?fe.slice():fe],O.push(fe),c||J()),this},fire:function(){return ie.fireWith(this,arguments),this},fired:function(){return!!m}};return ie};function Y(t){return t}function X(t){throw t}function ye(t,c,g,m){var I;try{t&&R(I=t.promise)?I.call(t).done(c).fail(g):t&&R(I=t.then)?I.call(t,c,g):c.apply(void 0,[t].slice(m))}catch(k){g.apply(void 0,[k])}}i.extend({Deferred:function(t){var c=[["notify","progress",i.Callbacks("memory"),i.Callbacks("memory"),2],["resolve","done",i.Callbacks("once memory"),i.Callbacks("once memory"),0,"resolved"],["reject","fail",i.Callbacks("once memory"),i.Callbacks("once memory"),1,"rejected"]],g="pending",m={state:function(){return g},always:function(){return I.done(arguments).fail(arguments),this},catch:function(k){return m.then(null,k)},pipe:function(){var k=arguments;return i.Deferred(function(O){i.each(c,function(Q,J){var ie=R(k[J[4]])&&k[J[4]];I[J[1]](function(){var le=ie&&ie.apply(this,arguments);le&&R(le.promise)?le.promise().progress(O.notify).done(O.resolve).fail(O.reject):O[J[0]+"With"](this,ie?[le]:arguments)})}),k=null}).promise()},then:function(k,O,Q){var J=0;function ie(le,fe,oe,be){return function(){var $e=this,Ze=arguments,We=function(){var At,qt;if(!(le<J)){if(At=oe.apply($e,Ze),At===fe.promise())throw new TypeError("Thenable self-resolution");qt=At&&(typeof At=="object"||typeof At=="function")&&At.then,R(qt)?be?qt.call(At,ie(J,fe,Y,be),ie(J,fe,X,be)):(J++,qt.call(At,ie(J,fe,Y,be),ie(J,fe,X,be),ie(J,fe,Y,fe.notifyWith))):(oe!==Y&&($e=void 0,Ze=[At]),(be||fe.resolveWith)($e,Ze))}},xt=be?We:function(){try{We()}catch(At){i.Deferred.exceptionHook&&i.Deferred.exceptionHook(At,xt.error),le+1>=J&&(oe!==X&&($e=void 0,Ze=[At]),fe.rejectWith($e,Ze))}};le?xt():(i.Deferred.getErrorHook?xt.error=i.Deferred.getErrorHook():i.Deferred.getStackHook&&(xt.error=i.Deferred.getStackHook()),n.setTimeout(xt))}}return i.Deferred(function(le){c[0][3].add(ie(0,le,R(Q)?Q:Y,le.notifyWith)),c[1][3].add(ie(0,le,R(k)?k:Y)),c[2][3].add(ie(0,le,R(O)?O:X))}).promise()},promise:function(k){return k!=null?i.extend(k,m):m}},I={};return i.each(c,function(k,O){var Q=O[2],J=O[5];m[O[1]]=Q.add,J&&Q.add(function(){g=J},c[3-k][2].disable,c[3-k][3].disable,c[0][2].lock,c[0][3].lock),Q.add(O[3].fire),I[O[0]]=function(){return I[O[0]+"With"](this===I?void 0:this,arguments),this},I[O[0]+"With"]=Q.fireWith}),m.promise(I),t&&t.call(I,I),I},when:function(t){var c=arguments.length,g=c,m=Array(g),I=s.call(arguments),k=i.Deferred(),O=function(Q){return function(J){m[Q]=this,I[Q]=arguments.length>1?s.call(arguments):J,--c||k.resolveWith(m,I)}};if(c<=1&&(ye(t,k.done(O(g)).resolve,k.reject,!c),k.state()==="pending"||R(I[g]&&I[g].then)))return k.then();for(;g--;)ye(I[g],O(g),k.reject);return k.promise()}});var Se=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;i.Deferred.exceptionHook=function(t,c){n.console&&n.console.warn&&t&&Se.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,c)},i.readyException=function(t){n.setTimeout(function(){throw t})};var z=i.Deferred();i.fn.ready=function(t){return z.then(t).catch(function(c){i.readyException(c)}),this},i.extend({isReady:!1,readyWait:1,ready:function(t){(t===!0?--i.readyWait:i.isReady)||(i.isReady=!0,!(t!==!0&&--i.readyWait>0)&&z.resolveWith(N,[i]))}}),i.ready.then=z.then;function K(){N.removeEventListener("DOMContentLoaded",K),n.removeEventListener("load",K),i.ready()}N.readyState==="complete"||N.readyState!=="loading"&&!N.documentElement.doScroll?n.setTimeout(i.ready):(N.addEventListener("DOMContentLoaded",K),n.addEventListener("load",K));var M=function(t,c,g,m,I,k,O){var Q=0,J=t.length,ie=g==null;if(S(g)==="object"){I=!0;for(Q in g)M(t,c,Q,g[Q],!0,k,O)}else if(m!==void 0&&(I=!0,R(m)||(O=!0),ie&&(O?(c.call(t,m),c=null):(ie=c,c=function(le,fe,oe){return ie.call(i(le),oe)})),c))for(;Q<J;Q++)c(t[Q],g,O?m:m.call(t[Q],Q,c(t[Q],g)));return I?t:ie?c.call(t):J?c(t[0],g):k},v=/^-ms-/,E=/-([a-z])/g;function H(t,c){return c.toUpperCase()}function ne(t){return t.replace(v,"ms-").replace(E,H)}var he=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};function we(){this.expando=i.expando+we.uid++}we.uid=1,we.prototype={cache:function(t){var c=t[this.expando];return c||(c={},he(t)&&(t.nodeType?t[this.expando]=c:Object.defineProperty(t,this.expando,{value:c,configurable:!0}))),c},set:function(t,c,g){var m,I=this.cache(t);if(typeof c=="string")I[ne(c)]=g;else for(m in c)I[ne(m)]=c[m];return I},get:function(t,c){return c===void 0?this.cache(t):t[this.expando]&&t[this.expando][ne(c)]},access:function(t,c,g){return c===void 0||c&&typeof c=="string"&&g===void 0?this.get(t,c):(this.set(t,c,g),g!==void 0?g:c)},remove:function(t,c){var g,m=t[this.expando];if(m!==void 0){if(c!==void 0)for(Array.isArray(c)?c=c.map(ne):(c=ne(c),c=c in m?[c]:c.match(F)||[]),g=c.length;g--;)delete m[c[g]];(c===void 0||i.isEmptyObject(m))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var c=t[this.expando];return c!==void 0&&!i.isEmptyObject(c)}};var _e=new we,Pe=new we,it=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ft=/[A-Z]/g;function at(t){return t==="true"?!0:t==="false"?!1:t==="null"?null:t===+t+""?+t:it.test(t)?JSON.parse(t):t}function It(t,c,g){var m;if(g===void 0&&t.nodeType===1)if(m="data-"+c.replace(ft,"-$&").toLowerCase(),g=t.getAttribute(m),typeof g=="string"){try{g=at(g)}catch{}Pe.set(t,c,g)}else g=void 0;return g}i.extend({hasData:function(t){return Pe.hasData(t)||_e.hasData(t)},data:function(t,c,g){return Pe.access(t,c,g)},removeData:function(t,c){Pe.remove(t,c)},_data:function(t,c,g){return _e.access(t,c,g)},_removeData:function(t,c){_e.remove(t,c)}}),i.fn.extend({data:function(t,c){var g,m,I,k=this[0],O=k&&k.attributes;if(t===void 0){if(this.length&&(I=Pe.get(k),k.nodeType===1&&!_e.get(k,"hasDataAttrs"))){for(g=O.length;g--;)O[g]&&(m=O[g].name,m.indexOf("data-")===0&&(m=ne(m.slice(5)),It(k,m,I[m])));_e.set(k,"hasDataAttrs",!0)}return I}return typeof t=="object"?this.each(function(){Pe.set(this,t)}):M(this,function(Q){var J;if(k&&Q===void 0)return J=Pe.get(k,t),J!==void 0||(J=It(k,t),J!==void 0)?J:void 0;this.each(function(){Pe.set(this,t,Q)})},null,c,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Pe.remove(this,t)})}}),i.extend({queue:function(t,c,g){var m;if(t)return c=(c||"fx")+"queue",m=_e.get(t,c),g&&(!m||Array.isArray(g)?m=_e.access(t,c,i.makeArray(g)):m.push(g)),m||[]},dequeue:function(t,c){c=c||"fx";var g=i.queue(t,c),m=g.length,I=g.shift(),k=i._queueHooks(t,c),O=function(){i.dequeue(t,c)};I==="inprogress"&&(I=g.shift(),m--),I&&(c==="fx"&&g.unshift("inprogress"),delete k.stop,I.call(t,O,k)),!m&&k&&k.empty.fire()},_queueHooks:function(t,c){var g=c+"queueHooks";return _e.get(t,g)||_e.access(t,g,{empty:i.Callbacks("once memory").add(function(){_e.remove(t,[c+"queue",g])})})}}),i.fn.extend({queue:function(t,c){var g=2;return typeof t!="string"&&(c=t,t="fx",g--),arguments.length<g?i.queue(this[0],t):c===void 0?this:this.each(function(){var m=i.queue(this,t,c);i._queueHooks(this,t),t==="fx"&&m[0]!=="inprogress"&&i.dequeue(this,t)})},dequeue:function(t){return this.each(function(){i.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,c){var g,m=1,I=i.Deferred(),k=this,O=this.length,Q=function(){--m||I.resolveWith(k,[k])};for(typeof t!="string"&&(c=t,t=void 0),t=t||"fx";O--;)g=_e.get(k[O],t+"queueHooks"),g&&g.empty&&(m++,g.empty.add(Q));return Q(),I.promise(c)}});var st=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+st+")([a-z%]*)$","i"),y=["Top","Right","Bottom","Left"],D=N.documentElement,B=function(t){return i.contains(t.ownerDocument,t)},V={composed:!0};D.getRootNode&&(B=function(t){return i.contains(t.ownerDocument,t)||t.getRootNode(V)===t.ownerDocument});var ee=function(t,c){return t=c||t,t.style.display==="none"||t.style.display===""&&B(t)&&i.css(t,"display")==="none"};function ce(t,c,g,m){var I,k,O=20,Q=m?function(){return m.cur()}:function(){return i.css(t,c,"")},J=Q(),ie=g&&g[3]||(i.cssNumber[c]?"":"px"),le=t.nodeType&&(i.cssNumber[c]||ie!=="px"&&+J)&&dt.exec(i.css(t,c));if(le&&le[3]!==ie){for(J=J/2,ie=ie||le[3],le=+J||1;O--;)i.style(t,c,le+ie),(1-k)*(1-(k=Q()/J||.5))<=0&&(O=0),le=le/k;le=le*2,i.style(t,c,le+ie),g=g||[]}return g&&(le=+le||+J||0,I=g[1]?le+(g[1]+1)*g[2]:+g[2],m&&(m.unit=ie,m.start=le,m.end=I)),I}var ge={};function Ee(t){var c,g=t.ownerDocument,m=t.nodeName,I=ge[m];return I||(c=g.body.appendChild(g.createElement(m)),I=i.css(c,"display"),c.parentNode.removeChild(c),I==="none"&&(I="block"),ge[m]=I,I)}function ke(t,c){for(var g,m,I=[],k=0,O=t.length;k<O;k++)m=t[k],m.style&&(g=m.style.display,c?(g==="none"&&(I[k]=_e.get(m,"display")||null,I[k]||(m.style.display="")),m.style.display===""&&ee(m)&&(I[k]=Ee(m))):g!=="none"&&(I[k]="none",_e.set(m,"display",g)));for(k=0;k<O;k++)I[k]!=null&&(t[k].style.display=I[k]);return t}i.fn.extend({show:function(){return ke(this,!0)},hide:function(){return ke(this)},toggle:function(t){return typeof t=="boolean"?t?this.show():this.hide():this.each(function(){ee(this)?i(this).show():i(this).hide()})}});var Oe=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,lt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var t=N.createDocumentFragment(),c=t.appendChild(N.createElement("div")),g=N.createElement("input");g.setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),c.appendChild(g),C.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,c.innerHTML="<textarea>x</textarea>",C.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue,c.innerHTML="<option></option>",C.option=!!c.lastChild})();var Ve={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,Ve.th=Ve.td,C.option||(Ve.optgroup=Ve.option=[1,"<select multiple='multiple'>","</select>"]);function tt(t,c){var g;return typeof t.getElementsByTagName<"u"?g=t.getElementsByTagName(c||"*"):typeof t.querySelectorAll<"u"?g=t.querySelectorAll(c||"*"):g=[],c===void 0||c&&U(t,c)?i.merge([t],g):g}function qe(t,c){for(var g=0,m=t.length;g<m;g++)_e.set(t[g],"globalEval",!c||_e.get(c[g],"globalEval"))}var _t=/<|&#?\w+;/;function Zi(t,c,g,m,I){for(var k,O,Q,J,ie,le,fe=c.createDocumentFragment(),oe=[],be=0,$e=t.length;be<$e;be++)if(k=t[be],k||k===0)if(S(k)==="object")i.merge(oe,k.nodeType?[k]:k);else if(!_t.test(k))oe.push(c.createTextNode(k));else{for(O=O||fe.appendChild(c.createElement("div")),Q=(mt.exec(k)||["",""])[1].toLowerCase(),J=Ve[Q]||Ve._default,O.innerHTML=J[1]+i.htmlPrefilter(k)+J[2],le=J[0];le--;)O=O.lastChild;i.merge(oe,O.childNodes),O=fe.firstChild,O.textContent=""}for(fe.textContent="",be=0;k=oe[be++];){if(m&&i.inArray(k,m)>-1){I&&I.push(k);continue}if(ie=B(k),O=tt(fe.appendChild(k),"script"),ie&&qe(O),g)for(le=0;k=O[le++];)lt.test(k.type||"")&&g.push(k)}return fe}var er=/^([^.]*)(?:\.(.+)|)/;function vn(){return!0}function yn(){return!1}function wi(t,c,g,m,I,k){var O,Q;if(typeof c=="object"){typeof g!="string"&&(m=m||g,g=void 0);for(Q in c)wi(t,Q,g,m,c[Q],k);return t}if(m==null&&I==null?(I=g,m=g=void 0):I==null&&(typeof g=="string"?(I=m,m=void 0):(I=m,m=g,g=void 0)),I===!1)I=yn;else if(!I)return t;return k===1&&(O=I,I=function(J){return i().off(J),O.apply(this,arguments)},I.guid=O.guid||(O.guid=i.guid++)),t.each(function(){i.event.add(this,c,I,m,g)})}i.event={global:{},add:function(t,c,g,m,I){var k,O,Q,J,ie,le,fe,oe,be,$e,Ze,We=_e.get(t);if(he(t))for(g.handler&&(k=g,g=k.handler,I=k.selector),I&&i.find.matchesSelector(D,I),g.guid||(g.guid=i.guid++),(J=We.events)||(J=We.events=Object.create(null)),(O=We.handle)||(O=We.handle=function(xt){return typeof i<"u"&&i.event.triggered!==xt.type?i.event.dispatch.apply(t,arguments):void 0}),c=(c||"").match(F)||[""],ie=c.length;ie--;)Q=er.exec(c[ie])||[],be=Ze=Q[1],$e=(Q[2]||"").split(".").sort(),be&&(fe=i.event.special[be]||{},be=(I?fe.delegateType:fe.bindType)||be,fe=i.event.special[be]||{},le=i.extend({type:be,origType:Ze,data:m,handler:g,guid:g.guid,selector:I,needsContext:I&&i.expr.match.needsContext.test(I),namespace:$e.join(".")},k),(oe=J[be])||(oe=J[be]=[],oe.delegateCount=0,(!fe.setup||fe.setup.call(t,m,$e,O)===!1)&&t.addEventListener&&t.addEventListener(be,O)),fe.add&&(fe.add.call(t,le),le.handler.guid||(le.handler.guid=g.guid)),I?oe.splice(oe.delegateCount++,0,le):oe.push(le),i.event.global[be]=!0)},remove:function(t,c,g,m,I){var k,O,Q,J,ie,le,fe,oe,be,$e,Ze,We=_e.hasData(t)&&_e.get(t);if(!(!We||!(J=We.events))){for(c=(c||"").match(F)||[""],ie=c.length;ie--;){if(Q=er.exec(c[ie])||[],be=Ze=Q[1],$e=(Q[2]||"").split(".").sort(),!be){for(be in J)i.event.remove(t,be+c[ie],g,m,!0);continue}for(fe=i.event.special[be]||{},be=(m?fe.delegateType:fe.bindType)||be,oe=J[be]||[],Q=Q[2]&&new RegExp("(^|\\.)"+$e.join("\\.(?:.*\\.|)")+"(\\.|$)"),O=k=oe.length;k--;)le=oe[k],(I||Ze===le.origType)&&(!g||g.guid===le.guid)&&(!Q||Q.test(le.namespace))&&(!m||m===le.selector||m==="**"&&le.selector)&&(oe.splice(k,1),le.selector&&oe.delegateCount--,fe.remove&&fe.remove.call(t,le));O&&!oe.length&&((!fe.teardown||fe.teardown.call(t,$e,We.handle)===!1)&&i.removeEvent(t,be,We.handle),delete J[be])}i.isEmptyObject(J)&&_e.remove(t,"handle events")}},dispatch:function(t){var c,g,m,I,k,O,Q=new Array(arguments.length),J=i.event.fix(t),ie=(_e.get(this,"events")||Object.create(null))[J.type]||[],le=i.event.special[J.type]||{};for(Q[0]=J,c=1;c<arguments.length;c++)Q[c]=arguments[c];if(J.delegateTarget=this,!(le.preDispatch&&le.preDispatch.call(this,J)===!1)){for(O=i.event.handlers.call(this,J,ie),c=0;(I=O[c++])&&!J.isPropagationStopped();)for(J.currentTarget=I.elem,g=0;(k=I.handlers[g++])&&!J.isImmediatePropagationStopped();)(!J.rnamespace||k.namespace===!1||J.rnamespace.test(k.namespace))&&(J.handleObj=k,J.data=k.data,m=((i.event.special[k.origType]||{}).handle||k.handler).apply(I.elem,Q),m!==void 0&&(J.result=m)===!1&&(J.preventDefault(),J.stopPropagation()));return le.postDispatch&&le.postDispatch.call(this,J),J.result}},handlers:function(t,c){var g,m,I,k,O,Q=[],J=c.delegateCount,ie=t.target;if(J&&ie.nodeType&&!(t.type==="click"&&t.button>=1)){for(;ie!==this;ie=ie.parentNode||this)if(ie.nodeType===1&&!(t.type==="click"&&ie.disabled===!0)){for(k=[],O={},g=0;g<J;g++)m=c[g],I=m.selector+" ",O[I]===void 0&&(O[I]=m.needsContext?i(I,this).index(ie)>-1:i.find(I,this,null,[ie]).length),O[I]&&k.push(m);k.length&&Q.push({elem:ie,handlers:k})}}return ie=this,J<c.length&&Q.push({elem:ie,handlers:c.slice(J)}),Q},addProp:function(t,c){Object.defineProperty(i.Event.prototype,t,{enumerable:!0,configurable:!0,get:R(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(g){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:g})}})},fix:function(t){return t[i.expando]?t:new i.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var c=this||t;return Oe.test(c.type)&&c.click&&U(c,"input")&&qn(c,"click",!0),!1},trigger:function(t){var c=this||t;return Oe.test(c.type)&&c.click&&U(c,"input")&&qn(c,"click"),!0},_default:function(t){var c=t.target;return Oe.test(c.type)&&c.click&&U(c,"input")&&_e.get(c,"click")||U(c,"a")}},beforeunload:{postDispatch:function(t){t.result!==void 0&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}};function qn(t,c,g){if(!g){_e.get(t,c)===void 0&&i.event.add(t,c,vn);return}_e.set(t,c,!1),i.event.add(t,c,{namespace:!1,handler:function(m){var I,k=_e.get(this,c);if(m.isTrigger&1&&this[c]){if(k)(i.event.special[c]||{}).delegateType&&m.stopPropagation();else if(k=s.call(arguments),_e.set(this,c,k),this[c](),I=_e.get(this,c),_e.set(this,c,!1),k!==I)return m.stopImmediatePropagation(),m.preventDefault(),I}else k&&(_e.set(this,c,i.event.trigger(k[0],k.slice(1),this)),m.stopPropagation(),m.isImmediatePropagationStopped=vn)}})}i.removeEvent=function(t,c,g){t.removeEventListener&&t.removeEventListener(c,g)},i.Event=function(t,c){if(!(this instanceof i.Event))return new i.Event(t,c);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===void 0&&t.returnValue===!1?vn:yn,this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,c&&i.extend(this,c),this.timeStamp=t&&t.timeStamp||Date.now(),this[i.expando]=!0},i.Event.prototype={constructor:i.Event,isDefaultPrevented:yn,isPropagationStopped:yn,isImmediatePropagationStopped:yn,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=vn,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=vn,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=vn,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},i.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},i.event.addProp),i.each({focus:"focusin",blur:"focusout"},function(t,c){function g(m){if(N.documentMode){var I=_e.get(this,"handle"),k=i.event.fix(m);k.type=m.type==="focusin"?"focus":"blur",k.isSimulated=!0,I(m),k.target===k.currentTarget&&I(k)}else i.event.simulate(c,m.target,i.event.fix(m))}i.event.special[t]={setup:function(){var m;if(qn(this,t,!0),N.documentMode)m=_e.get(this,c),m||this.addEventListener(c,g),_e.set(this,c,(m||0)+1);else return!1},trigger:function(){return qn(this,t),!0},teardown:function(){var m;if(N.documentMode)m=_e.get(this,c)-1,m?_e.set(this,c,m):(this.removeEventListener(c,g),_e.remove(this,c));else return!1},_default:function(m){return _e.get(m.target,t)},delegateType:c},i.event.special[c]={setup:function(){var m=this.ownerDocument||this.document||this,I=N.documentMode?this:m,k=_e.get(I,c);k||(N.documentMode?this.addEventListener(c,g):m.addEventListener(t,g,!0)),_e.set(I,c,(k||0)+1)},teardown:function(){var m=this.ownerDocument||this.document||this,I=N.documentMode?this:m,k=_e.get(I,c)-1;k?_e.set(I,c,k):(N.documentMode?this.removeEventListener(c,g):m.removeEventListener(t,g,!0),_e.remove(I,c))}}}),i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,c){i.event.special[t]={delegateType:c,bindType:c,handle:function(g){var m,I=this,k=g.relatedTarget,O=g.handleObj;return(!k||k!==I&&!i.contains(I,k))&&(g.type=O.origType,m=O.handler.apply(this,arguments),g.type=c),m}}}),i.fn.extend({on:function(t,c,g,m){return wi(this,t,c,g,m)},one:function(t,c,g,m){return wi(this,t,c,g,m,1)},off:function(t,c,g){var m,I;if(t&&t.preventDefault&&t.handleObj)return m=t.handleObj,i(t.delegateTarget).off(m.namespace?m.origType+"."+m.namespace:m.origType,m.selector,m.handler),this;if(typeof t=="object"){for(I in t)this.off(I,c,t[I]);return this}return(c===!1||typeof c=="function")&&(g=c,c=void 0),g===!1&&(g=yn),this.each(function(){i.event.remove(this,t,g,c)})}});var wa=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,_a=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function tr(t,c){return U(t,"table")&&U(c.nodeType!==11?c:c.firstChild,"tr")&&i(t).children("tbody")[0]||t}function ba(t){return t.type=(t.getAttribute("type")!==null)+"/"+t.type,t}function va(t){return(t.type||"").slice(0,5)==="true/"?t.type=t.type.slice(5):t.removeAttribute("type"),t}function nr(t,c){var g,m,I,k,O,Q,J;if(c.nodeType===1){if(_e.hasData(t)&&(k=_e.get(t),J=k.events,J)){_e.remove(c,"handle events");for(I in J)for(g=0,m=J[I].length;g<m;g++)i.event.add(c,I,J[I][g])}Pe.hasData(t)&&(O=Pe.access(t),Q=i.extend({},O),Pe.set(c,Q))}}function ya(t,c){var g=c.nodeName.toLowerCase();g==="input"&&Oe.test(t.type)?c.checked=t.checked:(g==="input"||g==="textarea")&&(c.defaultValue=t.defaultValue)}function An(t,c,g,m){c=a(c);var I,k,O,Q,J,ie,le=0,fe=t.length,oe=fe-1,be=c[0],$e=R(be);if($e||fe>1&&typeof be=="string"&&!C.checkClone&&ma.test(be))return t.each(function(Ze){var We=t.eq(Ze);$e&&(c[0]=be.call(this,Ze,We.html())),An(We,c,g,m)});if(fe&&(I=Zi(c,t[0].ownerDocument,!1,t,m),k=I.firstChild,I.childNodes.length===1&&(I=k),k||m)){for(O=i.map(tt(I,"script"),ba),Q=O.length;le<fe;le++)J=I,le!==oe&&(J=i.clone(J,!0,!0),Q&&i.merge(O,tt(J,"script"))),g.call(t[le],J,le);if(Q)for(ie=O[O.length-1].ownerDocument,i.map(O,va),le=0;le<Q;le++)J=O[le],lt.test(J.type||"")&&!_e.access(J,"globalEval")&&i.contains(ie,J)&&(J.src&&(J.type||"").toLowerCase()!=="module"?i._evalUrl&&!J.noModule&&i._evalUrl(J.src,{nonce:J.nonce||J.getAttribute("nonce")},ie):P(J.textContent.replace(_a,""),J,ie))}return t}function ir(t,c,g){for(var m,I=c?i.filter(c,t):t,k=0;(m=I[k])!=null;k++)!g&&m.nodeType===1&&i.cleanData(tt(m)),m.parentNode&&(g&&B(m)&&qe(tt(m,"script")),m.parentNode.removeChild(m));return t}i.extend({htmlPrefilter:function(t){return t},clone:function(t,c,g){var m,I,k,O,Q=t.cloneNode(!0),J=B(t);if(!C.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!i.isXMLDoc(t))for(O=tt(Q),k=tt(t),m=0,I=k.length;m<I;m++)ya(k[m],O[m]);if(c)if(g)for(k=k||tt(t),O=O||tt(Q),m=0,I=k.length;m<I;m++)nr(k[m],O[m]);else nr(t,Q);return O=tt(Q,"script"),O.length>0&&qe(O,!J&&tt(t,"script")),Q},cleanData:function(t){for(var c,g,m,I=i.event.special,k=0;(g=t[k])!==void 0;k++)if(he(g)){if(c=g[_e.expando]){if(c.events)for(m in c.events)I[m]?i.event.remove(g,m):i.removeEvent(g,m,c.handle);g[_e.expando]=void 0}g[Pe.expando]&&(g[Pe.expando]=void 0)}}}),i.fn.extend({detach:function(t){return ir(this,t,!0)},remove:function(t){return ir(this,t)},text:function(t){return M(this,function(c){return c===void 0?i.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=c)})},null,t,arguments.length)},append:function(){return An(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=tr(this,t);c.appendChild(t)}})},prepend:function(){return An(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var c=tr(this,t);c.insertBefore(t,c.firstChild)}})},before:function(){return An(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return An(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,c=0;(t=this[c])!=null;c++)t.nodeType===1&&(i.cleanData(tt(t,!1)),t.textContent="");return this},clone:function(t,c){return t=t??!1,c=c??t,this.map(function(){return i.clone(this,t,c)})},html:function(t){return M(this,function(c){var g=this[0]||{},m=0,I=this.length;if(c===void 0&&g.nodeType===1)return g.innerHTML;if(typeof c=="string"&&!wa.test(c)&&!Ve[(mt.exec(c)||["",""])[1].toLowerCase()]){c=i.htmlPrefilter(c);try{for(;m<I;m++)g=this[m]||{},g.nodeType===1&&(i.cleanData(tt(g,!1)),g.innerHTML=c);g=0}catch{}}g&&this.empty().append(c)},null,t,arguments.length)},replaceWith:function(){var t=[];return An(this,arguments,function(c){var g=this.parentNode;i.inArray(this,t)<0&&(i.cleanData(tt(this)),g&&g.replaceChild(c,this))},t)}}),i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){i.fn[t]=function(g){for(var m,I=[],k=i(g),O=k.length-1,Q=0;Q<=O;Q++)m=Q===O?this:this.clone(!0),i(k[Q])[c](m),f.apply(I,m.get());return this.pushStack(I)}});var mi=new RegExp("^("+st+")(?!px)[a-z%]+$","i"),_i=/^--/,Wn=function(t){var c=t.ownerDocument.defaultView;return(!c||!c.opener)&&(c=n),c.getComputedStyle(t)},rr=function(t,c,g){var m,I,k={};for(I in c)k[I]=t.style[I],t.style[I]=c[I];m=g.call(t);for(I in c)t.style[I]=k[I];return m},Aa=new RegExp(y.join("|"),"i");(function(){function t(){if(ie){J.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ie.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",D.appendChild(J).appendChild(ie);var le=n.getComputedStyle(ie);g=le.top!=="1%",Q=c(le.marginLeft)===12,ie.style.right="60%",k=c(le.right)===36,m=c(le.width)===36,ie.style.position="absolute",I=c(ie.offsetWidth/3)===12,D.removeChild(J),ie=null}}function c(le){return Math.round(parseFloat(le))}var g,m,I,k,O,Q,J=N.createElement("div"),ie=N.createElement("div");ie.style&&(ie.style.backgroundClip="content-box",ie.cloneNode(!0).style.backgroundClip="",C.clearCloneStyle=ie.style.backgroundClip==="content-box",i.extend(C,{boxSizingReliable:function(){return t(),m},pixelBoxStyles:function(){return t(),k},pixelPosition:function(){return t(),g},reliableMarginLeft:function(){return t(),Q},scrollboxSize:function(){return t(),I},reliableTrDimensions:function(){var le,fe,oe,be;return O==null&&(le=N.createElement("table"),fe=N.createElement("tr"),oe=N.createElement("div"),le.style.cssText="position:absolute;left:-11111px;border-collapse:separate",fe.style.cssText="box-sizing:content-box;border:1px solid",fe.style.height="1px",oe.style.height="9px",oe.style.display="block",D.appendChild(le).appendChild(fe).appendChild(oe),be=n.getComputedStyle(fe),O=parseInt(be.height,10)+parseInt(be.borderTopWidth,10)+parseInt(be.borderBottomWidth,10)===fe.offsetHeight,D.removeChild(le)),O}}))})();function Rn(t,c,g){var m,I,k,O,Q=_i.test(c),J=t.style;return g=g||Wn(t),g&&(O=g.getPropertyValue(c)||g[c],Q&&O&&(O=O.replace(pe,"$1")||void 0),O===""&&!B(t)&&(O=i.style(t,c)),!C.pixelBoxStyles()&&mi.test(O)&&Aa.test(c)&&(m=J.width,I=J.minWidth,k=J.maxWidth,J.minWidth=J.maxWidth=J.width=O,O=g.width,J.width=m,J.minWidth=I,J.maxWidth=k)),O!==void 0?O+"":O}function ar(t,c){return{get:function(){if(t()){delete this.get;return}return(this.get=c).apply(this,arguments)}}}var or=["Webkit","Moz","ms"],sr=N.createElement("div").style,lr={};function Ea(t){for(var c=t[0].toUpperCase()+t.slice(1),g=or.length;g--;)if(t=or[g]+c,t in sr)return t}function bi(t){var c=i.cssProps[t]||lr[t];return c||(t in sr?t:lr[t]=Ea(t)||t)}var xa=/^(none|table(?!-c[ea]).+)/,Ta={position:"absolute",visibility:"hidden",display:"block"},cr={letterSpacing:"0",fontWeight:"400"};function ur(t,c,g){var m=dt.exec(c);return m?Math.max(0,m[2]-(g||0))+(m[3]||"px"):c}function vi(t,c,g,m,I,k){var O=c==="width"?1:0,Q=0,J=0,ie=0;if(g===(m?"border":"content"))return 0;for(;O<4;O+=2)g==="margin"&&(ie+=i.css(t,g+y[O],!0,I)),m?(g==="content"&&(J-=i.css(t,"padding"+y[O],!0,I)),g!=="margin"&&(J-=i.css(t,"border"+y[O]+"Width",!0,I))):(J+=i.css(t,"padding"+y[O],!0,I),g!=="padding"?J+=i.css(t,"border"+y[O]+"Width",!0,I):Q+=i.css(t,"border"+y[O]+"Width",!0,I));return!m&&k>=0&&(J+=Math.max(0,Math.ceil(t["offset"+c[0].toUpperCase()+c.slice(1)]-k-J-Q-.5))||0),J+ie}function fr(t,c,g){var m=Wn(t),I=!C.boxSizingReliable()||g,k=I&&i.css(t,"boxSizing",!1,m)==="border-box",O=k,Q=Rn(t,c,m),J="offset"+c[0].toUpperCase()+c.slice(1);if(mi.test(Q)){if(!g)return Q;Q="auto"}return(!C.boxSizingReliable()&&k||!C.reliableTrDimensions()&&U(t,"tr")||Q==="auto"||!parseFloat(Q)&&i.css(t,"display",!1,m)==="inline")&&t.getClientRects().length&&(k=i.css(t,"boxSizing",!1,m)==="border-box",O=J in t,O&&(Q=t[J])),Q=parseFloat(Q)||0,Q+vi(t,c,g||(k?"border":"content"),O,m,Q)+"px"}i.extend({cssHooks:{opacity:{get:function(t,c){if(c){var g=Rn(t,"opacity");return g===""?"1":g}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,c,g,m){if(!(!t||t.nodeType===3||t.nodeType===8||!t.style)){var I,k,O,Q=ne(c),J=_i.test(c),ie=t.style;if(J||(c=bi(Q)),O=i.cssHooks[c]||i.cssHooks[Q],g!==void 0){if(k=typeof g,k==="string"&&(I=dt.exec(g))&&I[1]&&(g=ce(t,c,I),k="number"),g==null||g!==g)return;k==="number"&&!J&&(g+=I&&I[3]||(i.cssNumber[Q]?"":"px")),!C.clearCloneStyle&&g===""&&c.indexOf("background")===0&&(ie[c]="inherit"),(!O||!("set"in O)||(g=O.set(t,g,m))!==void 0)&&(J?ie.setProperty(c,g):ie[c]=g)}else return O&&"get"in O&&(I=O.get(t,!1,m))!==void 0?I:ie[c]}},css:function(t,c,g,m){var I,k,O,Q=ne(c),J=_i.test(c);return J||(c=bi(Q)),O=i.cssHooks[c]||i.cssHooks[Q],O&&"get"in O&&(I=O.get(t,!0,g)),I===void 0&&(I=Rn(t,c,m)),I==="normal"&&c in cr&&(I=cr[c]),g===""||g?(k=parseFloat(I),g===!0||isFinite(k)?k||0:I):I}}),i.each(["height","width"],function(t,c){i.cssHooks[c]={get:function(g,m,I){if(m)return xa.test(i.css(g,"display"))&&(!g.getClientRects().length||!g.getBoundingClientRect().width)?rr(g,Ta,function(){return fr(g,c,I)}):fr(g,c,I)},set:function(g,m,I){var k,O=Wn(g),Q=!C.scrollboxSize()&&O.position==="absolute",J=Q||I,ie=J&&i.css(g,"boxSizing",!1,O)==="border-box",le=I?vi(g,c,I,ie,O):0;return ie&&Q&&(le-=Math.ceil(g["offset"+c[0].toUpperCase()+c.slice(1)]-parseFloat(O[c])-vi(g,c,"border",!1,O)-.5)),le&&(k=dt.exec(m))&&(k[3]||"px")!=="px"&&(g.style[c]=m,m=i.css(g,c)),ur(g,m,le)}}}),i.cssHooks.marginLeft=ar(C.reliableMarginLeft,function(t,c){if(c)return(parseFloat(Rn(t,"marginLeft"))||t.getBoundingClientRect().left-rr(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),i.each({margin:"",padding:"",border:"Width"},function(t,c){i.cssHooks[t+c]={expand:function(g){for(var m=0,I={},k=typeof g=="string"?g.split(" "):[g];m<4;m++)I[t+y[m]+c]=k[m]||k[m-2]||k[0];return I}},t!=="margin"&&(i.cssHooks[t+c].set=ur)}),i.fn.extend({css:function(t,c){return M(this,function(g,m,I){var k,O,Q={},J=0;if(Array.isArray(m)){for(k=Wn(g),O=m.length;J<O;J++)Q[m[J]]=i.css(g,m[J],!1,k);return Q}return I!==void 0?i.style(g,m,I):i.css(g,m)},t,c,arguments.length>1)}});function kt(t,c,g,m,I){return new kt.prototype.init(t,c,g,m,I)}i.Tween=kt,kt.prototype={constructor:kt,init:function(t,c,g,m,I,k){this.elem=t,this.prop=g,this.easing=I||i.easing._default,this.options=c,this.start=this.now=this.cur(),this.end=m,this.unit=k||(i.cssNumber[g]?"":"px")},cur:function(){var t=kt.propHooks[this.prop];return t&&t.get?t.get(this):kt.propHooks._default.get(this)},run:function(t){var c,g=kt.propHooks[this.prop];return this.options.duration?this.pos=c=i.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=c=t,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):kt.propHooks._default.set(this),this}},kt.prototype.init.prototype=kt.prototype,kt.propHooks={_default:{get:function(t){var c;return t.elem.nodeType!==1||t.elem[t.prop]!=null&&t.elem.style[t.prop]==null?t.elem[t.prop]:(c=i.css(t.elem,t.prop,""),!c||c==="auto"?0:c)},set:function(t){i.fx.step[t.prop]?i.fx.step[t.prop](t):t.elem.nodeType===1&&(i.cssHooks[t.prop]||t.elem.style[bi(t.prop)]!=null)?i.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},kt.propHooks.scrollTop=kt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},i.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"},i.fx=kt.prototype.init,i.fx.step={};var En,Kn,Sa=/^(?:toggle|show|hide)$/,Ca=/queueHooks$/;function yi(){Kn&&(N.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(yi):n.setTimeout(yi,i.fx.interval),i.fx.tick())}function dr(){return n.setTimeout(function(){En=void 0}),En=Date.now()}function Vn(t,c){var g,m=0,I={height:t};for(c=c?1:0;m<4;m+=2-c)g=y[m],I["margin"+g]=I["padding"+g]=t;return c&&(I.opacity=I.width=t),I}function hr(t,c,g){for(var m,I=(Bt.tweeners[c]||[]).concat(Bt.tweeners["*"]),k=0,O=I.length;k<O;k++)if(m=I[k].call(g,c,t))return m}function Ia(t,c,g){var m,I,k,O,Q,J,ie,le,fe="width"in c||"height"in c,oe=this,be={},$e=t.style,Ze=t.nodeType&&ee(t),We=_e.get(t,"fxshow");g.queue||(O=i._queueHooks(t,"fx"),O.unqueued==null&&(O.unqueued=0,Q=O.empty.fire,O.empty.fire=function(){O.unqueued||Q()}),O.unqueued++,oe.always(function(){oe.always(function(){O.unqueued--,i.queue(t,"fx").length||O.empty.fire()})}));for(m in c)if(I=c[m],Sa.test(I)){if(delete c[m],k=k||I==="toggle",I===(Ze?"hide":"show"))if(I==="show"&&We&&We[m]!==void 0)Ze=!0;else continue;be[m]=We&&We[m]||i.style(t,m)}if(J=!i.isEmptyObject(c),!(!J&&i.isEmptyObject(be))){fe&&t.nodeType===1&&(g.overflow=[$e.overflow,$e.overflowX,$e.overflowY],ie=We&&We.display,ie==null&&(ie=_e.get(t,"display")),le=i.css(t,"display"),le==="none"&&(ie?le=ie:(ke([t],!0),ie=t.style.display||ie,le=i.css(t,"display"),ke([t]))),(le==="inline"||le==="inline-block"&&ie!=null)&&i.css(t,"float")==="none"&&(J||(oe.done(function(){$e.display=ie}),ie==null&&(le=$e.display,ie=le==="none"?"":le)),$e.display="inline-block")),g.overflow&&($e.overflow="hidden",oe.always(function(){$e.overflow=g.overflow[0],$e.overflowX=g.overflow[1],$e.overflowY=g.overflow[2]})),J=!1;for(m in be)J||(We?"hidden"in We&&(Ze=We.hidden):We=_e.access(t,"fxshow",{display:ie}),k&&(We.hidden=!Ze),Ze&&ke([t],!0),oe.done(function(){Ze||ke([t]),_e.remove(t,"fxshow");for(m in be)i.style(t,m,be[m])})),J=hr(Ze?We[m]:0,m,oe),m in We||(We[m]=J.start,Ze&&(J.end=J.start,J.start=0))}}function Ra(t,c){var g,m,I,k,O;for(g in t)if(m=ne(g),I=c[m],k=t[g],Array.isArray(k)&&(I=k[1],k=t[g]=k[0]),g!==m&&(t[m]=k,delete t[g]),O=i.cssHooks[m],O&&"expand"in O){k=O.expand(k),delete t[m];for(g in k)g in t||(t[g]=k[g],c[g]=I)}else c[m]=I}function Bt(t,c,g){var m,I,k=0,O=Bt.prefilters.length,Q=i.Deferred().always(function(){delete J.elem}),J=function(){if(I)return!1;for(var fe=En||dr(),oe=Math.max(0,ie.startTime+ie.duration-fe),be=oe/ie.duration||0,$e=1-be,Ze=0,We=ie.tweens.length;Ze<We;Ze++)ie.tweens[Ze].run($e);return Q.notifyWith(t,[ie,$e,oe]),$e<1&&We?oe:(We||Q.notifyWith(t,[ie,1,0]),Q.resolveWith(t,[ie]),!1)},ie=Q.promise({elem:t,props:i.extend({},c),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},g),originalProperties:c,originalOptions:g,startTime:En||dr(),duration:g.duration,tweens:[],createTween:function(fe,oe){var be=i.Tween(t,ie.opts,fe,oe,ie.opts.specialEasing[fe]||ie.opts.easing);return ie.tweens.push(be),be},stop:function(fe){var oe=0,be=fe?ie.tweens.length:0;if(I)return this;for(I=!0;oe<be;oe++)ie.tweens[oe].run(1);return fe?(Q.notifyWith(t,[ie,1,0]),Q.resolveWith(t,[ie,fe])):Q.rejectWith(t,[ie,fe]),this}}),le=ie.props;for(Ra(le,ie.opts.specialEasing);k<O;k++)if(m=Bt.prefilters[k].call(ie,t,le,ie.opts),m)return R(m.stop)&&(i._queueHooks(ie.elem,ie.opts.queue).stop=m.stop.bind(m)),m;return i.map(le,hr,ie),R(ie.opts.start)&&ie.opts.start.call(t,ie),ie.progress(ie.opts.progress).done(ie.opts.done,ie.opts.complete).fail(ie.opts.fail).always(ie.opts.always),i.fx.timer(i.extend(J,{elem:t,anim:ie,queue:ie.opts.queue})),ie}i.Animation=i.extend(Bt,{tweeners:{"*":[function(t,c){var g=this.createTween(t,c);return ce(g.elem,t,dt.exec(c),g),g}]},tweener:function(t,c){R(t)?(c=t,t=["*"]):t=t.match(F);for(var g,m=0,I=t.length;m<I;m++)g=t[m],Bt.tweeners[g]=Bt.tweeners[g]||[],Bt.tweeners[g].unshift(c)},prefilters:[Ia],prefilter:function(t,c){c?Bt.prefilters.unshift(t):Bt.prefilters.push(t)}}),i.speed=function(t,c,g){var m=t&&typeof t=="object"?i.extend({},t):{complete:g||!g&&c||R(t)&&t,duration:t,easing:g&&c||c&&!R(c)&&c};return i.fx.off?m.duration=0:typeof m.duration!="number"&&(m.duration in i.fx.speeds?m.duration=i.fx.speeds[m.duration]:m.duration=i.fx.speeds._default),(m.queue==null||m.queue===!0)&&(m.queue="fx"),m.old=m.complete,m.complete=function(){R(m.old)&&m.old.call(this),m.queue&&i.dequeue(this,m.queue)},m},i.fn.extend({fadeTo:function(t,c,g,m){return this.filter(ee).css("opacity",0).show().end().animate({opacity:c},t,g,m)},animate:function(t,c,g,m){var I=i.isEmptyObject(t),k=i.speed(c,g,m),O=function(){var Q=Bt(this,i.extend({},t),k);(I||_e.get(this,"finish"))&&Q.stop(!0)};return O.finish=O,I||k.queue===!1?this.each(O):this.queue(k.queue,O)},stop:function(t,c,g){var m=function(I){var k=I.stop;delete I.stop,k(g)};return typeof t!="string"&&(g=c,c=t,t=void 0),c&&this.queue(t||"fx",[]),this.each(function(){var I=!0,k=t!=null&&t+"queueHooks",O=i.timers,Q=_e.get(this);if(k)Q[k]&&Q[k].stop&&m(Q[k]);else for(k in Q)Q[k]&&Q[k].stop&&Ca.test(k)&&m(Q[k]);for(k=O.length;k--;)O[k].elem===this&&(t==null||O[k].queue===t)&&(O[k].anim.stop(g),I=!1,O.splice(k,1));(I||!g)&&i.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var c,g=_e.get(this),m=g[t+"queue"],I=g[t+"queueHooks"],k=i.timers,O=m?m.length:0;for(g.finish=!0,i.queue(this,t,[]),I&&I.stop&&I.stop.call(this,!0),c=k.length;c--;)k[c].elem===this&&k[c].queue===t&&(k[c].anim.stop(!0),k.splice(c,1));for(c=0;c<O;c++)m[c]&&m[c].finish&&m[c].finish.call(this);delete g.finish})}}),i.each(["toggle","show","hide"],function(t,c){var g=i.fn[c];i.fn[c]=function(m,I,k){return m==null||typeof m=="boolean"?g.apply(this,arguments):this.animate(Vn(c,!0),m,I,k)}}),i.each({slideDown:Vn("show"),slideUp:Vn("hide"),slideToggle:Vn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){i.fn[t]=function(g,m,I){return this.animate(c,g,m,I)}}),i.timers=[],i.fx.tick=function(){var t,c=0,g=i.timers;for(En=Date.now();c<g.length;c++)t=g[c],!t()&&g[c]===t&&g.splice(c--,1);g.length||i.fx.stop(),En=void 0},i.fx.timer=function(t){i.timers.push(t),i.fx.start()},i.fx.interval=13,i.fx.start=function(){Kn||(Kn=!0,yi())},i.fx.stop=function(){Kn=null},i.fx.speeds={slow:600,fast:200,_default:400},i.fn.delay=function(t,c){return t=i.fx&&i.fx.speeds[t]||t,c=c||"fx",this.queue(c,function(g,m){var I=n.setTimeout(g,t);m.stop=function(){n.clearTimeout(I)}})},function(){var t=N.createElement("input"),c=N.createElement("select"),g=c.appendChild(N.createElement("option"));t.type="checkbox",C.checkOn=t.value!=="",C.optSelected=g.selected,t=N.createElement("input"),t.value="t",t.type="radio",C.radioValue=t.value==="t"}();var pr,kn=i.expr.attrHandle;i.fn.extend({attr:function(t,c){return M(this,i.attr,t,c,arguments.length>1)},removeAttr:function(t){return this.each(function(){i.removeAttr(this,t)})}}),i.extend({attr:function(t,c,g){var m,I,k=t.nodeType;if(!(k===3||k===8||k===2)){if(typeof t.getAttribute>"u")return i.prop(t,c,g);if((k!==1||!i.isXMLDoc(t))&&(I=i.attrHooks[c.toLowerCase()]||(i.expr.match.bool.test(c)?pr:void 0)),g!==void 0){if(g===null){i.removeAttr(t,c);return}return I&&"set"in I&&(m=I.set(t,g,c))!==void 0?m:(t.setAttribute(c,g+""),g)}return I&&"get"in I&&(m=I.get(t,c))!==null?m:(m=i.find.attr(t,c),m??void 0)}},attrHooks:{type:{set:function(t,c){if(!C.radioValue&&c==="radio"&&U(t,"input")){var g=t.value;return t.setAttribute("type",c),g&&(t.value=g),c}}}},removeAttr:function(t,c){var g,m=0,I=c&&c.match(F);if(I&&t.nodeType===1)for(;g=I[m++];)t.removeAttribute(g)}}),pr={set:function(t,c,g){return c===!1?i.removeAttr(t,g):t.setAttribute(g,g),g}},i.each(i.expr.match.bool.source.match(/\w+/g),function(t,c){var g=kn[c]||i.find.attr;kn[c]=function(m,I,k){var O,Q,J=I.toLowerCase();return k||(Q=kn[J],kn[J]=O,O=g(m,I,k)!=null?J:null,kn[J]=Q),O}});var ka=/^(?:input|select|textarea|button)$/i,Na=/^(?:a|area)$/i;i.fn.extend({prop:function(t,c){return M(this,i.prop,t,c,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[i.propFix[t]||t]})}}),i.extend({prop:function(t,c,g){var m,I,k=t.nodeType;if(!(k===3||k===8||k===2))return(k!==1||!i.isXMLDoc(t))&&(c=i.propFix[c]||c,I=i.propHooks[c]),g!==void 0?I&&"set"in I&&(m=I.set(t,g,c))!==void 0?m:t[c]=g:I&&"get"in I&&(m=I.get(t,c))!==null?m:t[c]},propHooks:{tabIndex:{get:function(t){var c=i.find.attr(t,"tabindex");return c?parseInt(c,10):ka.test(t.nodeName)||Na.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),C.optSelected||(i.propHooks.selected={get:function(t){var c=t.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(t){var c=t.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}}),i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});function cn(t){var c=t.match(F)||[];return c.join(" ")}function un(t){return t.getAttribute&&t.getAttribute("class")||""}function Ai(t){return Array.isArray(t)?t:typeof t=="string"?t.match(F)||[]:[]}i.fn.extend({addClass:function(t){var c,g,m,I,k,O;return R(t)?this.each(function(Q){i(this).addClass(t.call(this,Q,un(this)))}):(c=Ai(t),c.length?this.each(function(){if(m=un(this),g=this.nodeType===1&&" "+cn(m)+" ",g){for(k=0;k<c.length;k++)I=c[k],g.indexOf(" "+I+" ")<0&&(g+=I+" ");O=cn(g),m!==O&&this.setAttribute("class",O)}}):this)},removeClass:function(t){var c,g,m,I,k,O;return R(t)?this.each(function(Q){i(this).removeClass(t.call(this,Q,un(this)))}):arguments.length?(c=Ai(t),c.length?this.each(function(){if(m=un(this),g=this.nodeType===1&&" "+cn(m)+" ",g){for(k=0;k<c.length;k++)for(I=c[k];g.indexOf(" "+I+" ")>-1;)g=g.replace(" "+I+" "," ");O=cn(g),m!==O&&this.setAttribute("class",O)}}):this):this.attr("class","")},toggleClass:function(t,c){var g,m,I,k,O=typeof t,Q=O==="string"||Array.isArray(t);return R(t)?this.each(function(J){i(this).toggleClass(t.call(this,J,un(this),c),c)}):typeof c=="boolean"&&Q?c?this.addClass(t):this.removeClass(t):(g=Ai(t),this.each(function(){if(Q)for(k=i(this),I=0;I<g.length;I++)m=g[I],k.hasClass(m)?k.removeClass(m):k.addClass(m);else(t===void 0||O==="boolean")&&(m=un(this),m&&_e.set(this,"__className__",m),this.setAttribute&&this.setAttribute("class",m||t===!1?"":_e.get(this,"__className__")||""))}))},hasClass:function(t){var c,g,m=0;for(c=" "+t+" ";g=this[m++];)if(g.nodeType===1&&(" "+cn(un(g))+" ").indexOf(c)>-1)return!0;return!1}});var La=/\r/g;i.fn.extend({val:function(t){var c,g,m,I=this[0];return arguments.length?(m=R(t),this.each(function(k){var O;this.nodeType===1&&(m?O=t.call(this,k,i(this).val()):O=t,O==null?O="":typeof O=="number"?O+="":Array.isArray(O)&&(O=i.map(O,function(Q){return Q==null?"":Q+""})),c=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],(!c||!("set"in c)||c.set(this,O,"value")===void 0)&&(this.value=O))})):I?(c=i.valHooks[I.type]||i.valHooks[I.nodeName.toLowerCase()],c&&"get"in c&&(g=c.get(I,"value"))!==void 0?g:(g=I.value,typeof g=="string"?g.replace(La,""):g??"")):void 0}}),i.extend({valHooks:{option:{get:function(t){var c=i.find.attr(t,"value");return c??cn(i.text(t))}},select:{get:function(t){var c,g,m,I=t.options,k=t.selectedIndex,O=t.type==="select-one",Q=O?null:[],J=O?k+1:I.length;for(k<0?m=J:m=O?k:0;m<J;m++)if(g=I[m],(g.selected||m===k)&&!g.disabled&&(!g.parentNode.disabled||!U(g.parentNode,"optgroup"))){if(c=i(g).val(),O)return c;Q.push(c)}return Q},set:function(t,c){for(var g,m,I=t.options,k=i.makeArray(c),O=I.length;O--;)m=I[O],(m.selected=i.inArray(i.valHooks.option.get(m),k)>-1)&&(g=!0);return g||(t.selectedIndex=-1),k}}}}),i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(t,c){if(Array.isArray(c))return t.checked=i.inArray(i(t).val(),c)>-1}},C.checkOn||(i.valHooks[this].get=function(t){return t.getAttribute("value")===null?"on":t.value})});var Nn=n.location,gr={guid:Date.now()},Ei=/\?/;i.parseXML=function(t){var c,g;if(!t||typeof t!="string")return null;try{c=new n.DOMParser().parseFromString(t,"text/xml")}catch{}return g=c&&c.getElementsByTagName("parsererror")[0],(!c||g)&&i.error("Invalid XML: "+(g?i.map(g.childNodes,function(m){return m.textContent}).join(`
`):t)),c};var wr=/^(?:focusinfocus|focusoutblur)$/,mr=function(t){t.stopPropagation()};i.extend(i.event,{trigger:function(t,c,g,m){var I,k,O,Q,J,ie,le,fe,oe=[g||N],be=_.call(t,"type")?t.type:t,$e=_.call(t,"namespace")?t.namespace.split("."):[];if(k=fe=O=g=g||N,!(g.nodeType===3||g.nodeType===8)&&!wr.test(be+i.event.triggered)&&(be.indexOf(".")>-1&&($e=be.split("."),be=$e.shift(),$e.sort()),J=be.indexOf(":")<0&&"on"+be,t=t[i.expando]?t:new i.Event(be,typeof t=="object"&&t),t.isTrigger=m?2:3,t.namespace=$e.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+$e.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=g),c=c==null?[t]:i.makeArray(c,[t]),le=i.event.special[be]||{},!(!m&&le.trigger&&le.trigger.apply(g,c)===!1))){if(!m&&!le.noBubble&&!L(g)){for(Q=le.delegateType||be,wr.test(Q+be)||(k=k.parentNode);k;k=k.parentNode)oe.push(k),O=k;O===(g.ownerDocument||N)&&oe.push(O.defaultView||O.parentWindow||n)}for(I=0;(k=oe[I++])&&!t.isPropagationStopped();)fe=k,t.type=I>1?Q:le.bindType||be,ie=(_e.get(k,"events")||Object.create(null))[t.type]&&_e.get(k,"handle"),ie&&ie.apply(k,c),ie=J&&k[J],ie&&ie.apply&&he(k)&&(t.result=ie.apply(k,c),t.result===!1&&t.preventDefault());return t.type=be,!m&&!t.isDefaultPrevented()&&(!le._default||le._default.apply(oe.pop(),c)===!1)&&he(g)&&J&&R(g[be])&&!L(g)&&(O=g[J],O&&(g[J]=null),i.event.triggered=be,t.isPropagationStopped()&&fe.addEventListener(be,mr),g[be](),t.isPropagationStopped()&&fe.removeEventListener(be,mr),i.event.triggered=void 0,O&&(g[J]=O)),t.result}},simulate:function(t,c,g){var m=i.extend(new i.Event,g,{type:t,isSimulated:!0});i.event.trigger(m,null,c)}}),i.fn.extend({trigger:function(t,c){return this.each(function(){i.event.trigger(t,c,this)})},triggerHandler:function(t,c){var g=this[0];if(g)return i.event.trigger(t,c,g,!0)}});var Ma=/\[\]$/,_r=/\r?\n/g,Da=/^(?:submit|button|image|reset|file)$/i,Oa=/^(?:input|select|textarea|keygen)/i;function xi(t,c,g,m){var I;if(Array.isArray(c))i.each(c,function(k,O){g||Ma.test(t)?m(t,O):xi(t+"["+(typeof O=="object"&&O!=null?k:"")+"]",O,g,m)});else if(!g&&S(c)==="object")for(I in c)xi(t+"["+I+"]",c[I],g,m);else m(t,c)}i.param=function(t,c){var g,m=[],I=function(k,O){var Q=R(O)?O():O;m[m.length]=encodeURIComponent(k)+"="+encodeURIComponent(Q??"")};if(t==null)return"";if(Array.isArray(t)||t.jquery&&!i.isPlainObject(t))i.each(t,function(){I(this.name,this.value)});else for(g in t)xi(g,t[g],c,I);return m.join("&")},i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=i.prop(this,"elements");return t?i.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!i(this).is(":disabled")&&Oa.test(this.nodeName)&&!Da.test(t)&&(this.checked||!Oe.test(t))}).map(function(t,c){var g=i(this).val();return g==null?null:Array.isArray(g)?i.map(g,function(m){return{name:c.name,value:m.replace(_r,`\r
`)}}):{name:c.name,value:g.replace(_r,`\r
`)}}).get()}});var Pa=/%20/g,Fa=/#.*$/,Ua=/([?&])_=[^&]*/,$a=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ba=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ja=/^(?:GET|HEAD)$/,za=/^\/\//,br={},Ti={},vr="*/".concat("*"),Si=N.createElement("a");Si.href=Nn.href;function yr(t){return function(c,g){typeof c!="string"&&(g=c,c="*");var m,I=0,k=c.toLowerCase().match(F)||[];if(R(g))for(;m=k[I++];)m[0]==="+"?(m=m.slice(1)||"*",(t[m]=t[m]||[]).unshift(g)):(t[m]=t[m]||[]).push(g)}}function Ar(t,c,g,m){var I={},k=t===Ti;function O(Q){var J;return I[Q]=!0,i.each(t[Q]||[],function(ie,le){var fe=le(c,g,m);if(typeof fe=="string"&&!k&&!I[fe])return c.dataTypes.unshift(fe),O(fe),!1;if(k)return!(J=fe)}),J}return O(c.dataTypes[0])||!I["*"]&&O("*")}function Ci(t,c){var g,m,I=i.ajaxSettings.flatOptions||{};for(g in c)c[g]!==void 0&&((I[g]?t:m||(m={}))[g]=c[g]);return m&&i.extend(!0,t,m),t}function Ha(t,c,g){for(var m,I,k,O,Q=t.contents,J=t.dataTypes;J[0]==="*";)J.shift(),m===void 0&&(m=t.mimeType||c.getResponseHeader("Content-Type"));if(m){for(I in Q)if(Q[I]&&Q[I].test(m)){J.unshift(I);break}}if(J[0]in g)k=J[0];else{for(I in g){if(!J[0]||t.converters[I+" "+J[0]]){k=I;break}O||(O=I)}k=k||O}if(k)return k!==J[0]&&J.unshift(k),g[k]}function Ga(t,c,g,m){var I,k,O,Q,J,ie={},le=t.dataTypes.slice();if(le[1])for(O in t.converters)ie[O.toLowerCase()]=t.converters[O];for(k=le.shift();k;)if(t.responseFields[k]&&(g[t.responseFields[k]]=c),!J&&m&&t.dataFilter&&(c=t.dataFilter(c,t.dataType)),J=k,k=le.shift(),k){if(k==="*")k=J;else if(J!=="*"&&J!==k){if(O=ie[J+" "+k]||ie["* "+k],!O){for(I in ie)if(Q=I.split(" "),Q[1]===k&&(O=ie[J+" "+Q[0]]||ie["* "+Q[0]],O)){O===!0?O=ie[I]:ie[I]!==!0&&(k=Q[0],le.unshift(Q[1]));break}}if(O!==!0)if(O&&t.throws)c=O(c);else try{c=O(c)}catch(fe){return{state:"parsererror",error:O?fe:"No conversion from "+J+" to "+k}}}}return{state:"success",data:c}}i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nn.href,type:"GET",isLocal:Ba.test(Nn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,c){return c?Ci(Ci(t,i.ajaxSettings),c):Ci(i.ajaxSettings,t)},ajaxPrefilter:yr(br),ajaxTransport:yr(Ti),ajax:function(t,c){typeof t=="object"&&(c=t,t=void 0),c=c||{};var g,m,I,k,O,Q,J,ie,le,fe,oe=i.ajaxSetup({},c),be=oe.context||oe,$e=oe.context&&(be.nodeType||be.jquery)?i(be):i.event,Ze=i.Deferred(),We=i.Callbacks("once memory"),xt=oe.statusCode||{},At={},qt={},Wt="canceled",Qe={readyState:0,getResponseHeader:function(nt){var bt;if(J){if(!k)for(k={};bt=$a.exec(I);)k[bt[1].toLowerCase()+" "]=(k[bt[1].toLowerCase()+" "]||[]).concat(bt[2]);bt=k[nt.toLowerCase()+" "]}return bt==null?null:bt.join(", ")},getAllResponseHeaders:function(){return J?I:null},setRequestHeader:function(nt,bt){return J==null&&(nt=qt[nt.toLowerCase()]=qt[nt.toLowerCase()]||nt,At[nt]=bt),this},overrideMimeType:function(nt){return J==null&&(oe.mimeType=nt),this},statusCode:function(nt){var bt;if(nt)if(J)Qe.always(nt[Qe.status]);else for(bt in nt)xt[bt]=[xt[bt],nt[bt]];return this},abort:function(nt){var bt=nt||Wt;return g&&g.abort(bt),fn(0,bt),this}};if(Ze.promise(Qe),oe.url=((t||oe.url||Nn.href)+"").replace(za,Nn.protocol+"//"),oe.type=c.method||c.type||oe.method||oe.type,oe.dataTypes=(oe.dataType||"*").toLowerCase().match(F)||[""],oe.crossDomain==null){Q=N.createElement("a");try{Q.href=oe.url,Q.href=Q.href,oe.crossDomain=Si.protocol+"//"+Si.host!=Q.protocol+"//"+Q.host}catch{oe.crossDomain=!0}}if(oe.data&&oe.processData&&typeof oe.data!="string"&&(oe.data=i.param(oe.data,oe.traditional)),Ar(br,oe,c,Qe),J)return Qe;ie=i.event&&oe.global,ie&&i.active++===0&&i.event.trigger("ajaxStart"),oe.type=oe.type.toUpperCase(),oe.hasContent=!ja.test(oe.type),m=oe.url.replace(Fa,""),oe.hasContent?oe.data&&oe.processData&&(oe.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(oe.data=oe.data.replace(Pa,"+")):(fe=oe.url.slice(m.length),oe.data&&(oe.processData||typeof oe.data=="string")&&(m+=(Ei.test(m)?"&":"?")+oe.data,delete oe.data),oe.cache===!1&&(m=m.replace(Ua,"$1"),fe=(Ei.test(m)?"&":"?")+"_="+gr.guid+++fe),oe.url=m+fe),oe.ifModified&&(i.lastModified[m]&&Qe.setRequestHeader("If-Modified-Since",i.lastModified[m]),i.etag[m]&&Qe.setRequestHeader("If-None-Match",i.etag[m])),(oe.data&&oe.hasContent&&oe.contentType!==!1||c.contentType)&&Qe.setRequestHeader("Content-Type",oe.contentType),Qe.setRequestHeader("Accept",oe.dataTypes[0]&&oe.accepts[oe.dataTypes[0]]?oe.accepts[oe.dataTypes[0]]+(oe.dataTypes[0]!=="*"?", "+vr+"; q=0.01":""):oe.accepts["*"]);for(le in oe.headers)Qe.setRequestHeader(le,oe.headers[le]);if(oe.beforeSend&&(oe.beforeSend.call(be,Qe,oe)===!1||J))return Qe.abort();if(Wt="abort",We.add(oe.complete),Qe.done(oe.success),Qe.fail(oe.error),g=Ar(Ti,oe,c,Qe),!g)fn(-1,"No Transport");else{if(Qe.readyState=1,ie&&$e.trigger("ajaxSend",[Qe,oe]),J)return Qe;oe.async&&oe.timeout>0&&(O=n.setTimeout(function(){Qe.abort("timeout")},oe.timeout));try{J=!1,g.send(At,fn)}catch(nt){if(J)throw nt;fn(-1,nt)}}function fn(nt,bt,Mn,Ri){var Kt,Dn,Vt,tn,nn,Pt=bt;J||(J=!0,O&&n.clearTimeout(O),g=void 0,I=Ri||"",Qe.readyState=nt>0?4:0,Kt=nt>=200&&nt<300||nt===304,Mn&&(tn=Ha(oe,Qe,Mn)),!Kt&&i.inArray("script",oe.dataTypes)>-1&&i.inArray("json",oe.dataTypes)<0&&(oe.converters["text script"]=function(){}),tn=Ga(oe,tn,Qe,Kt),Kt?(oe.ifModified&&(nn=Qe.getResponseHeader("Last-Modified"),nn&&(i.lastModified[m]=nn),nn=Qe.getResponseHeader("etag"),nn&&(i.etag[m]=nn)),nt===204||oe.type==="HEAD"?Pt="nocontent":nt===304?Pt="notmodified":(Pt=tn.state,Dn=tn.data,Vt=tn.error,Kt=!Vt)):(Vt=Pt,(nt||!Pt)&&(Pt="error",nt<0&&(nt=0))),Qe.status=nt,Qe.statusText=(bt||Pt)+"",Kt?Ze.resolveWith(be,[Dn,Pt,Qe]):Ze.rejectWith(be,[Qe,Pt,Vt]),Qe.statusCode(xt),xt=void 0,ie&&$e.trigger(Kt?"ajaxSuccess":"ajaxError",[Qe,oe,Kt?Dn:Vt]),We.fireWith(be,[Qe,Pt]),ie&&($e.trigger("ajaxComplete",[Qe,oe]),--i.active||i.event.trigger("ajaxStop")))}return Qe},getJSON:function(t,c,g){return i.get(t,c,g,"json")},getScript:function(t,c){return i.get(t,void 0,c,"script")}}),i.each(["get","post"],function(t,c){i[c]=function(g,m,I,k){return R(m)&&(k=k||I,I=m,m=void 0),i.ajax(i.extend({url:g,type:c,dataType:k,data:m,success:I},i.isPlainObject(g)&&g))}}),i.ajaxPrefilter(function(t){var c;for(c in t.headers)c.toLowerCase()==="content-type"&&(t.contentType=t.headers[c]||"")}),i._evalUrl=function(t,c,g){return i.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(m){i.globalEval(m,c,g)}})},i.fn.extend({wrapAll:function(t){var c;return this[0]&&(R(t)&&(t=t.call(this[0])),c=i(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var g=this;g.firstElementChild;)g=g.firstElementChild;return g}).append(this)),this},wrapInner:function(t){return R(t)?this.each(function(c){i(this).wrapInner(t.call(this,c))}):this.each(function(){var c=i(this),g=c.contents();g.length?g.wrapAll(t):c.append(t)})},wrap:function(t){var c=R(t);return this.each(function(g){i(this).wrapAll(c?t.call(this,g):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){i(this).replaceWith(this.childNodes)}),this}}),i.expr.pseudos.hidden=function(t){return!i.expr.pseudos.visible(t)},i.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch{}};var qa={0:200,1223:204},Ln=i.ajaxSettings.xhr();C.cors=!!Ln&&"withCredentials"in Ln,C.ajax=Ln=!!Ln,i.ajaxTransport(function(t){var c,g;if(C.cors||Ln&&!t.crossDomain)return{send:function(m,I){var k,O=t.xhr();if(O.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(k in t.xhrFields)O[k]=t.xhrFields[k];t.mimeType&&O.overrideMimeType&&O.overrideMimeType(t.mimeType),!t.crossDomain&&!m["X-Requested-With"]&&(m["X-Requested-With"]="XMLHttpRequest");for(k in m)O.setRequestHeader(k,m[k]);c=function(Q){return function(){c&&(c=g=O.onload=O.onerror=O.onabort=O.ontimeout=O.onreadystatechange=null,Q==="abort"?O.abort():Q==="error"?typeof O.status!="number"?I(0,"error"):I(O.status,O.statusText):I(qa[O.status]||O.status,O.statusText,(O.responseType||"text")!=="text"||typeof O.responseText!="string"?{binary:O.response}:{text:O.responseText},O.getAllResponseHeaders()))}},O.onload=c(),g=O.onerror=O.ontimeout=c("error"),O.onabort!==void 0?O.onabort=g:O.onreadystatechange=function(){O.readyState===4&&n.setTimeout(function(){c&&g()})},c=c("abort");try{O.send(t.hasContent&&t.data||null)}catch(Q){if(c)throw Q}},abort:function(){c&&c()}}}),i.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return i.globalEval(t),t}}}),i.ajaxPrefilter("script",function(t){t.cache===void 0&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),i.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var c,g;return{send:function(m,I){c=i("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",g=function(k){c.remove(),g=null,k&&I(k.type==="error"?404:200,k.type)}),N.head.appendChild(c[0])},abort:function(){g&&g()}}}});var Er=[],Ii=/(=)\?(?=&|$)|\?\?/;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Er.pop()||i.expando+"_"+gr.guid++;return this[t]=!0,t}}),i.ajaxPrefilter("json jsonp",function(t,c,g){var m,I,k,O=t.jsonp!==!1&&(Ii.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ii.test(t.data)&&"data");if(O||t.dataTypes[0]==="jsonp")return m=t.jsonpCallback=R(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,O?t[O]=t[O].replace(Ii,"$1"+m):t.jsonp!==!1&&(t.url+=(Ei.test(t.url)?"&":"?")+t.jsonp+"="+m),t.converters["script json"]=function(){return k||i.error(m+" was not called"),k[0]},t.dataTypes[0]="json",I=n[m],n[m]=function(){k=arguments},g.always(function(){I===void 0?i(n).removeProp(m):n[m]=I,t[m]&&(t.jsonpCallback=c.jsonpCallback,Er.push(m)),k&&R(I)&&I(k[0]),k=I=void 0}),"script"}),C.createHTMLDocument=function(){var t=N.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",t.childNodes.length===2}(),i.parseHTML=function(t,c,g){if(typeof t!="string")return[];typeof c=="boolean"&&(g=c,c=!1);var m,I,k;return c||(C.createHTMLDocument?(c=N.implementation.createHTMLDocument(""),m=c.createElement("base"),m.href=N.location.href,c.head.appendChild(m)):c=N),I=Ge.exec(t),k=!g&&[],I?[c.createElement(I[1])]:(I=Zi([t],c,k),k&&k.length&&i(k).remove(),i.merge([],I.childNodes))},i.fn.load=function(t,c,g){var m,I,k,O=this,Q=t.indexOf(" ");return Q>-1&&(m=cn(t.slice(Q)),t=t.slice(0,Q)),R(c)?(g=c,c=void 0):c&&typeof c=="object"&&(I="POST"),O.length>0&&i.ajax({url:t,type:I||"GET",dataType:"html",data:c}).done(function(J){k=arguments,O.html(m?i("<div>").append(i.parseHTML(J)).find(m):J)}).always(g&&function(J,ie){O.each(function(){g.apply(this,k||[J.responseText,ie,J])})}),this},i.expr.pseudos.animated=function(t){return i.grep(i.timers,function(c){return t===c.elem}).length},i.offset={setOffset:function(t,c,g){var m,I,k,O,Q,J,ie,le=i.css(t,"position"),fe=i(t),oe={};le==="static"&&(t.style.position="relative"),Q=fe.offset(),k=i.css(t,"top"),J=i.css(t,"left"),ie=(le==="absolute"||le==="fixed")&&(k+J).indexOf("auto")>-1,ie?(m=fe.position(),O=m.top,I=m.left):(O=parseFloat(k)||0,I=parseFloat(J)||0),R(c)&&(c=c.call(t,g,i.extend({},Q))),c.top!=null&&(oe.top=c.top-Q.top+O),c.left!=null&&(oe.left=c.left-Q.left+I),"using"in c?c.using.call(t,oe):fe.css(oe)}},i.fn.extend({offset:function(t){if(arguments.length)return t===void 0?this:this.each(function(I){i.offset.setOffset(this,t,I)});var c,g,m=this[0];if(m)return m.getClientRects().length?(c=m.getBoundingClientRect(),g=m.ownerDocument.defaultView,{top:c.top+g.pageYOffset,left:c.left+g.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,c,g,m=this[0],I={top:0,left:0};if(i.css(m,"position")==="fixed")c=m.getBoundingClientRect();else{for(c=this.offset(),g=m.ownerDocument,t=m.offsetParent||g.documentElement;t&&(t===g.body||t===g.documentElement)&&i.css(t,"position")==="static";)t=t.parentNode;t&&t!==m&&t.nodeType===1&&(I=i(t).offset(),I.top+=i.css(t,"borderTopWidth",!0),I.left+=i.css(t,"borderLeftWidth",!0))}return{top:c.top-I.top-i.css(m,"marginTop",!0),left:c.left-I.left-i.css(m,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&i.css(t,"position")==="static";)t=t.offsetParent;return t||D})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,c){var g=c==="pageYOffset";i.fn[t]=function(m){return M(this,function(I,k,O){var Q;if(L(I)?Q=I:I.nodeType===9&&(Q=I.defaultView),O===void 0)return Q?Q[c]:I[k];Q?Q.scrollTo(g?Q.pageXOffset:O,g?O:Q.pageYOffset):I[k]=O},t,m,arguments.length)}}),i.each(["top","left"],function(t,c){i.cssHooks[c]=ar(C.pixelPosition,function(g,m){if(m)return m=Rn(g,c),mi.test(m)?i(g).position()[c]+"px":m})}),i.each({Height:"height",Width:"width"},function(t,c){i.each({padding:"inner"+t,content:c,"":"outer"+t},function(g,m){i.fn[m]=function(I,k){var O=arguments.length&&(g||typeof I!="boolean"),Q=g||(I===!0||k===!0?"margin":"border");return M(this,function(J,ie,le){var fe;return L(J)?m.indexOf("outer")===0?J["inner"+t]:J.document.documentElement["client"+t]:J.nodeType===9?(fe=J.documentElement,Math.max(J.body["scroll"+t],fe["scroll"+t],J.body["offset"+t],fe["offset"+t],fe["client"+t])):le===void 0?i.css(J,ie,Q):i.style(J,ie,le,Q)},c,O?I:void 0,O)}})}),i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,c){i.fn[c]=function(g){return this.on(c,g)}}),i.fn.extend({bind:function(t,c,g){return this.on(t,null,c,g)},unbind:function(t,c){return this.off(t,null,c)},delegate:function(t,c,g,m){return this.on(c,t,g,m)},undelegate:function(t,c,g){return arguments.length===1?this.off(t,"**"):this.off(c,t||"**",g)},hover:function(t,c){return this.on("mouseenter",t).on("mouseleave",c||t)}}),i.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,c){i.fn[c]=function(g,m){return arguments.length>0?this.on(c,null,g,m):this.trigger(c)}});var Wa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;i.proxy=function(t,c){var g,m,I;if(typeof c=="string"&&(g=t[c],c=t,t=g),!!R(t))return m=s.call(arguments,2),I=function(){return t.apply(c||this,m.concat(s.call(arguments)))},I.guid=t.guid=t.guid||i.guid++,I},i.holdReady=function(t){t?i.readyWait++:i.ready(!0)},i.isArray=Array.isArray,i.parseJSON=JSON.parse,i.nodeName=U,i.isFunction=R,i.isWindow=L,i.camelCase=ne,i.type=S,i.now=Date.now,i.isNumeric=function(t){var c=i.type(t);return(c==="number"||c==="string")&&!isNaN(t-parseFloat(t))},i.trim=function(t){return t==null?"":(t+"").replace(Wa,"$1")};var Ka=n.jQuery,Va=n.$;return i.noConflict=function(t){return n.$===i&&(n.$=Va),t&&n.jQuery===i&&(n.jQuery=Ka),i},typeof l>"u"&&(n.jQuery=n.$=i),i})})(ra);var Xo=ra.exports;const Be=Yo(Xo);console.log("JS 실행:","functions.js");const aa={"eye-gaze-mode":"bool","vertical-color-box-mode":"bool","speech-recognition-mode":"bool",local:"string",session:"string",load:"string"},$r=["local","session","load"];function Jo(){const e={};location.hash.replace(/^#/,"").split(/,/).forEach(n=>{const l=n.indexOf(":");if(l===-1){const r=n;e[r]=!0}else{const r=n.slice(0,l),o=n.slice(l+1);e[r]=decodeURIComponent(o)}});for(const[n,l]of Object.entries(aa))l==="bool"&&!e[n]&&(e[n]=!1);return e}function Is(e,n,{replace_history_state:l=!1}={}){Qo({[e]:n},{replace_history_state:l})}function Qo(e,{replace_history_state:n=!1}={}){for(const l of $r)e[l]&&$r.forEach(r=>{r!==l&&(e[r]=null)});Zo(Object.assign({},Jo(),e),{replace_history_state:n})}function Zo(e,{replace_history_state:n=!1}={}){let l="";for(const[s,a]of Object.entries(aa))e[s]&&(l.length&&(l+=","),l+=encodeURIComponent(s),a!=="bool"&&(l+=":"+encodeURIComponent(e[s])));let r=location.search;r.includes("frame_id")||(r="");const o=`${location.origin}${location.pathname}${r}#${l}`;try{n?history.replaceState(null,document.title,o):history.pushState(null,document.title,o)}catch{location.hash=l}Ke.triggerHandler("change-url-params")}function es(){const e=window.devicePixelRatio,l=is(e)/e,r=window.globAppstate.magnification*l;window.globApp.$canvas.css("width",window.globAppstate.main_canvas.width*r),window.globApp.$canvas.css("height",window.globAppstate.main_canvas.height*r),ts()}function ts(){window.globApp.canvas_bounding_client_rect=window.globAppstate.main_canvas.getBoundingClientRect(),Dt()}let Bi=!1,gn;function Dt(e){e&&isFinite(e.clientX)&&(gn={clientX:e.clientX,clientY:e.clientY,devicePixelRatio}),!Bi&&(Bi=!0,requestAnimationFrame(()=>{Bi=!1,ns()}))}function ns(){if(gn){const n=gn.devicePixelRatio/devicePixelRatio;gn.clientX*=n,gn.clientY*=n,gn.devicePixelRatio=devicePixelRatio,window.globAppstate.pointer=Vi(gn)}const e=window.globAppstate.magnification*window.devicePixelRatio;if(window.globAppstate.helper_layer||(window.globAppstate.helper_layer=new so(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height,!1,e)),window.globAppstate.mask_layer||(window.globAppstate.mask_layer=new lo(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height,!1,e)),(window.globAppstate.helper_layer.canvas.width!=window.globAppstate.main_canvas.width||window.globAppstate.helper_layer.canvas.height!=window.globAppstate.main_canvas.height)&&(window.globAppstate.helper_layer.canvas.width=window.globAppstate.main_canvas.width,window.globAppstate.helper_layer.canvas.height=window.globAppstate.main_canvas.height,window.globAppstate.helper_layer.canvas.ctx.disable_image_smoothing(),window.globAppstate.helper_layer.width=window.globAppstate.main_canvas.width,window.globAppstate.helper_layer.height=window.globAppstate.main_canvas.height,window.globAppstate.helper_layer.x=0,window.globAppstate.helper_layer.y=0,window.globAppstate.helper_layer.position()),(window.globAppstate.mask_layer.canvas.width!=window.globAppstate.main_canvas.width||window.globAppstate.mask_layer.canvas.height!=window.globAppstate.main_canvas.height)&&(window.globAppstate.mask_layer.canvas.width=window.globAppstate.main_canvas.width,window.globAppstate.mask_layer.canvas.height=window.globAppstate.main_canvas.height,window.globAppstate.mask_layer.canvas.ctx.disable_image_smoothing(),window.globAppstate.mask_layer.width=window.globAppstate.main_canvas.width,window.globAppstate.mask_layer.height=window.globAppstate.main_canvas.height,window.globAppstate.mask_layer.x=0,window.globAppstate.mask_layer.y=0,window.globAppstate.mask_layer.position()),Br(window.globAppstate.helper_layer.canvas,1,0,0,!0),window.globAppstate.thumbnail_canvas&&window.globAppstate.$thumbnail_window.is(":visible")){const n=parseFloat(window.globApp.$canvas_area.css("padding-left")),l=parseFloat(window.globApp.$canvas_area.css("padding-top")),r=window.globAppstate.main_canvas.clientWidth+n-window.globApp.$canvas_area[0].clientWidth,o=window.globAppstate.main_canvas.clientHeight+l-window.globApp.$canvas_area[0].clientHeight;let s=window.globApp.$canvas_area[0].scrollLeft/Math.max(1,r),a=window.globApp.$canvas_area[0].scrollTop/Math.max(1,o);s=Math.min(s,1),a=Math.min(a,1);let f=Math.floor(Math.max(s*(window.globAppstate.main_canvas.width-window.globAppstate.thumbnail_canvas.width),0)),d=Math.floor(Math.max(a*(window.globAppstate.main_canvas.height-window.globAppstate.thumbnail_canvas.height),0));Br(window.globAppstate.thumbnail_canvas,1,f,d,!1)}}function Br(e,n,l,r,o){window.globApp.update_fill_and_stroke_colors_and_lineWidth(window.globAppstate.selected_tool);const s=window.globAppstate.show_grid&&window.globAppstate.magnification>=4&&window.devicePixelRatio*window.globAppstate.magnification>=4&&o,a=e.ctx;a.clearRect(0,0,e.width,e.height),o||a.drawImage(window.globAppstate.main_canvas,l,r,e.width,e.height,0,0,e.width,e.height);var f=[...window.globAppstate.selected_tools];Be("body").hasClass("dragging")&&!window.globAppstate.pointer_active&&(f=f.filter(u=>u.id===ta||u.id===na)),f.sort((u,w)=>u.selectBox&&!w.selectBox?-1:!u.selectBox&&w.selectBox?1:0);var d=f.findIndex(u=>u.selectBox);d>=0&&(f=f.filter((u,w)=>!u.selectBox||w==d)),f.forEach(u=>{u.drawPreviewUnderGrid&&window.globAppstate.pointer&&window.globAppstate.pointers.length<2&&(a.save(),u.drawPreviewUnderGrid(a,window.globAppstate.pointer.x,window.globAppstate.pointer.y,s,n,-l,-r),a.restore())}),window.globAppstate.selection&&(a.save(),a.scale(n,n),a.translate(-l,-r),a.drawImage(window.globAppstate.selection.canvas,window.globAppstate.selection.x,window.globAppstate.selection.y),a.restore(),!o&&!window.globAppstate.selection.dragging&&Jr(a,window.globAppstate.selection.x,window.globAppstate.selection.y,window.globAppstate.selection.width,window.globAppstate.selection.height,n,-l,-r)),s&&Co(a,n),f.forEach(u=>{u.drawPreviewAboveGrid&&window.globAppstate.pointer&&window.globAppstate.pointers.length<2&&(a.save(),u.drawPreviewAboveGrid(a,window.globAppstate.pointer.x,window.globAppstate.pointer.y,s,n,-l,-r),a.restore())})}function Rs(){window.devicePixelRatio*window.globAppstate.magnification>=1?window.globApp.$canvas_area.addClass("pixeled-canvas").removeClass("smooth-canvas"):window.globApp.$canvas_area.addClass("smooth-canvas").removeClass("pixeled-canvas")}function is(e){const n=[.25,.5,1,2,4,8,16];let l=n[0];for(let r=1;r<n.length;r++)Math.abs(e-n[r])<Math.abs(e-l)&&(l=n[r]);return l}function hi(e,n){n=n??{x:window.globApp.$canvas_area.scrollLeft()/window.globAppstate.magnification,y:window.globApp.$canvas_area.scrollTop()/window.globAppstate.magnification};const l=Cr(n);window.globAppstate.magnification=e,e!==1&&(window.globAppstate.return_to_magnification=e),es();const r=Cr(n);window.globApp.$canvas_area[0].scrollBy({left:r.clientX-l.clientX,top:r.clientY-l.clientY,behavior:"instant"}),Ke.triggerHandler("resize"),Ke.trigger("option-changed"),Ke.trigger("magnification-changed")}function Xi(){window.globAppstate.selected_colors={foreground:"#000000",background:"#ffffff",ternary:""},Ke.trigger("option-changed")}function oa(){window.globAppstate.system_file_handle=null,window.globAppstate.file_name=localize("untitled"),window.globAppstate.file_format="image/png",window.globAppstate.saved=!0,ln()}function sa(){window.globAppstate.undos.length=0,window.globAppstate.redos.length=0,window.globAppstate.current_history_node=window.globAppstate.root_history_node=la({name:localize("New"),icon:Ot("p_blank.png")}),window.globAppstate.history_node_to_cancel_to=null,console.log("캔버스 리셋!"),window.globAppstate.main_canvas.width=Math.max(1,window.globAppstate.my_canvas_width),window.globAppstate.main_canvas.height=Math.max(1,window.globAppstate.my_canvas_height),window.globAppstate.main_ctx.disable_image_smoothing(),window.globAppstate.main_ctx.fillStyle=window.globAppstate.selected_colors.background,window.globAppstate.main_ctx.fillRect(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),window.globAppstate.current_history_node.image_data=window.globAppstate.main_ctx.getImageData(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),window.globApp.$canvas_area.trigger("resize"),Ke.triggerHandler("history-update")}function la({parent:e=null,futures:n=[],timestamp:l=Date.now(),soft:r=!1,image_data:o=null,selection_image_data:s=null,selection_x:a,selection_y:f,text_tool_font:d=null,tool_transparent_mode:u=!1,foreground_color:w,background_color:_,ternary_color:A,name:b,icon:C=null}){return{parent:e,futures:n,timestamp:l,soft:r,image_data:o,selection_image_data:s,selection_x:a,selection_y:f,text_tool_font:d,tool_transparent_mode:u,foreground_color:w,background_color:_,ternary_color:A,name:b,icon:C}}function ln(){document.title=`${window.globAppstate.file_name} - ${zi?"June Solidarity ":""}${localize("Paint")}`,zi&&Be("link[rel~='icon']").attr("href","./images/icons/gay-es-paint-16x16-light-outline.png"),window.setRepresentedFilename&&window.setRepresentedFilename(window.globAppstate.system_file_handle??""),window.setDocumentEdited&&window.setDocumentEdited(!window.globAppstate.saved)}function rs(e){const n=e.split(/[\n\r]+/).filter(r=>r[0]!=="#"&&r);if(n.length>15)return[];const l=[];for(let r=0;r<n.length;r++)try{const o=new URL(n[r]);l.push(o.href)}catch{}return l}async function as(e){const n=e.match(/^blob:/i),l=!e.match(/^(blob|data|file):/i),r=e.match(/^(http|https):\/\/((127\.0\.0\.1|localhost)|.*(\.(local|localdomain|domain|lan|home|host|corp|invalid)))\b/i);if(n&&e.indexOf(`blob:${location.origin}`)===-1){const f=new Error("can't load blob: URI from another domain");throw f.code="cross-origin-blob-uri",f}const o=l&&!r?[e,`https://cors.bridged.cc/${e}`,`https://jspaint-cors-proxy.herokuapp.com/${e}`,`https://web.archive.org/${e}`]:[e],s=[];for(let f=0;f<o.length;f+=1){const d=o[f];try{const u=({loaded:C,total:R})=>{};l&&console.log(`Try loading image from URI (${f+1}/${o.length}): "${d}"`);const w=await fetch(d);let _=w;if(!w.ok){s.push({status:w.status,statusText:w.statusText,url:d});continue}if(!w.body)l&&console.log("ReadableStream not yet supported in this browser. Progress won't be shown for image requests.");else{const C=w.headers.get("content-encoding"),R=w.headers.get(C?"x-file-size":"content-length");if(R===null)l&&console.log("Response size header unavailable. Progress won't be shown for this image request.");else{const L=parseInt(R,10);let N=0;_=new Response(new ReadableStream({start(j){const P=w.body.getReader();S();function S(){P.read().then(({done:h,value:p})=>{if(h){j.close();return}N+=p.byteLength,u({loaded:N,total:L}),j.enqueue(p),S()}).catch(h=>{console.error(h),j.error(h)})}}}))}}const A=await _.blob();return l&&console.log("Download complete."),await new Promise((C,R)=>{gi(A,(L,N)=>{L?R(L):C(N)})})}catch(u){s.push({url:d,error:u})}}const a=new Error(`failed to fetch image from any of ${o.length} URI(s):
  ${s.map(f=>(f.statusText?`${f.status} ${f.statusText} `:"")+f.url+(f.error?`
    ${f.error}`:"")).join(`
  `)}`);throw a.code="access-failure",a.fails=s,a}function os(e,n,l,r,o){Ji(({canvas_modified_while_loading:s}={})=>{Gt(),Gn(),r||(Ke.triggerHandler("session-update"),new_local_session()),oa(),Xi(),sa(),hi(window.globAppstate.default_magnification),window.globAppstate.main_ctx.copy(e.image||e.image_data),ca(e),window.globAppstate.transparency=ha(window.globAppstate.main_ctx),window.globApp.$canvas_area.trigger("resize"),window.globAppstate.current_history_node.name=localize("Open"),window.globAppstate.current_history_node.image_data=window.globAppstate.main_ctx.getImageData(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),window.globAppstate.current_history_node.icon=Ot("p_open.png"),(s||!o)&&Ke.triggerHandler("session-update"),Ke.triggerHandler("history-update"),e.source_blob instanceof File&&(window.globAppstate.file_name=e.source_blob.name,window.globAppstate.system_file_handle=e.source_blob.path),e.source_file_handle&&(window.globAppstate.system_file_handle=e.source_file_handle),window.globAppstate.saved=!0,ln(),n==null||n()},l,o)}function ss(e,n){if(e instanceof File&&e.name.match(/\.theme(pack)?$/i)){e.text().then(ls,l=>{ot(localize("Paint cannot open this file."),l)});return}gi(e,(l,r)=>{if(l){ui.loadPalette(e,(o,s)=>{var a;if(o){ua({as_image_error:l,as_palette_error:o});return}window.globAppstate.palette=s.map(f=>f.toString()),(a=window.console)==null||a.log(`Loaded palette: ${window.globAppstate.palette.map(()=>"%c█").join("")}`,...window.globAppstate.palette.map(f=>`color: ${f};`))});return}r.source_file_handle=n,os(r)})}function ca(e){var n;window.globAppstate.file_format=e.file_format,window.globAppstate.enable_palette_loading_from_indexed_images&&(e.palette?((n=window.console)==null||n.log(`Loaded palette from image file: ${e.palette.map(()=>"%c█").join("")}`,...e.palette.map(l=>`color: ${l};`)),window.globAppstate.palette=e.palette,window.globAppstate.selected_colors.foreground=window.globAppstate.palette[0],window.globAppstate.selected_colors.background=window.globAppstate.palette.length===14*2?window.globAppstate.palette[14]:window.globAppstate.palette[1],Ke.trigger("option-changed")):monochrome&&!e.monochrome&&(window.globAppstate.palette=Wo,Xi()),monochrome=e.monochrome)}function ls(e){var n=parseThemeFileString(e);if(!n){ot(localize("Paint cannot open this file."));return}applyCSSProperties(n,{recurseIntoIframes:!0}),window.themeCSSProperties=n,Ke.triggerHandler("theme-load")}function ks(){Ji(()=>{Gt(),Gn(),Ke.triggerHandler("session-update"),new_local_session(),oa(),Xi(),sa(),hi(window.globAppstate.default_magnification),Ke.triggerHandler("session-update")})}async function Ns(){const{file:e,fileHandle:n}=await systemHooks.showOpenFileDialog({formats:In});ss(e,n)}let jr=!1;const cs="jspaint confirmed overwrite capable";try{jr=localStorage[cs]==="true"}catch{jr=Date.now()>=2e12}function zr(e=()=>{},n=!0){Gt();const l=window.globAppstate.system_file_handle;if(!l||window.globAppstate.file_name.match(/\.(svg|pdf)$/i))return us(e,n);Qi(window.globAppstate.main_canvas,window.globAppstate.file_format,async r=>{const o=await systemHooks.writeBlobToHandle(l,r);o===!0&&(window.globAppstate.saved=!0,ln()),o!==!1&&(n&&ga(r),e())})}function us(e=()=>{},n=!0){Gt(),systemHooks.showSaveFileDialog({dialogTitle:localize("Save As"),formats:In,defaultFileName:window.globAppstate.file_name,defaultPath:typeof window.globAppstate.system_file_handle=="string"?window.globAppstate.system_file_handle:null,defaultFileFormatID:window.globAppstate.file_format,getBlob:l=>new Promise(r=>{Qi(window.globAppstate.main_canvas,l,o=>{r(o)})}),savedCallbackUnreliable:({newFileName:l,newFileFormatID:r,newFileHandle:o,newBlob:s})=>{window.globAppstate.saved=!0,window.globAppstate.system_file_handle=o,window.globAppstate.file_name=l,window.globAppstate.file_format=r,ln(),e(),n&&ga(s)}})}function Ji(e,n,l){window.globAppstate.saved?e():l?mn({message:localize(`You've modified the document while an existing document was loading.
Save the new document?`,window.globAppstate.file_name),buttons:[{label:localize("Yes"),value:"save",default:!0},{label:localize("No"),value:"discard"}]}).then(r=>{r==="save"?zr(()=>{e()},!1):r==="discard"?e({canvas_modified_while_loading:!0}):e()}):mn({message:localize("Save changes to %1?",window.globAppstate.file_name),buttons:[{label:localize("Yes"),value:"save",default:!0},{label:localize("No"),value:"discard"},{label:localize("Cancel"),value:"cancel"}]}).then(r=>{r==="save"?zr(()=>{e()},!1):r==="discard"?e():n==null||n()})}function ot(e,n){var r,o,s,a;const{$message:l}=mn({iconID:"error",message:e});if(n){const f=Be("<details><summary><span>Details</span></summary></details>").appendTo(l),d=n;let u=d.stack;if(u)d.message&&u.indexOf(d.message)===-1?u=`${n.toString()}

${u}`:d.name&&u.indexOf(d.name)===-1&&(u=`${d.name}

${u}`);else if(u=n.toString(),u==="[object Object]")try{u=JSON.stringify(n,null,2)}catch(w){u="Error details could not be stringified: "+w}Be(ht("pre")).text(u).appendTo(f).css({background:"white",color:"#333",fontFamily:"monospace",width:"500px",maxWidth:"100%",overflow:"auto"})}n?(o=(r=window.console)==null?void 0:r.error)==null||o.call(r,e,n):(a=(s=window.console)==null?void 0:s.error)==null||a.call(s,e)}function fs(e){const{$window:n,$message:l}=mn({}),r=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;e.code==="cross-origin-blob-uri"?l.html(`
			<p>Can't load image from address starting with "blob:".</p>
			${r?'<p>Try "Copy Image" instead of "Copy Image Location".</p>':'<p>Try "Copy image" instead of "Copy image address".</p>'}
		`):e.code==="html-not-image"?l.html(`
			<p>Address points to a web page, not an image file.</p>
			<p>Try copying and pasting an image instead of a URL.</p>
		`):e.code==="decoding-failure"?l.html(`
			<p>Address doesn't point to an image file of a supported format.</p>
			<p>Try copying and pasting an image instead of a URL.</p>
		`):e.code==="access-failure"?navigator.onLine?(l.html(`
				<p>Failed to download image.</p>
				<p>Try copying and pasting an image instead of a URL.</p>
			`),e.fails&&Be("<ul>").append(e.fails.map(({status:o,statusText:s,url:a})=>Be("<li>").text(a).prepend(Be("<b>").text(`${o||""} ${s||"Failed"} `)))).appendTo(l)):l.html(`
				<p>Failed to download image.</p>
				<p>You're offline. Connect to the internet and try again.</p>
				<p>Or copy and paste an image instead of a URL, if possible.</p>
			`):l.html(`
			<p>Failed to load image from URL.</p>
			<p>Check your browser's devtools for details.</p>
		`),l.css({maxWidth:"500px"}),n.center()}function ua({as_image_error:e,as_palette_error:n}){let l=`
		<p>${localize("Paint cannot open this file.")}</p>
	`;e&&(l+=`
			<details>
				<summary>${localize("Bitmap Image")}</summary>
				<p>${localize("This is not a valid bitmap file, or its format is not currently supported.")}</p>
			</details>
		`);var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};const o=f=>String(f).replace(/[&<>"'`=/]/g,d=>r[d]),s=f=>f.charAt(0).toUpperCase()+f.slice(1),a=n&&!e;if(n){let f="";"errors"in n?f=`<ul dir="ltr">${n.errors.map(d=>{const u=d.__PATCHED_LIB_TO_ADD_THIS__format;return u&&d.error?`<li><b>${o(`${u.name}`)}</b>: ${o(s(d.error.message))}</li>`:`<li>${o(d.message||d)}</li>`}).join(`
`)}</ul>`:f=`<p>${o(n.message||n)}</p>`,l+=`
			<details>
				<summary>${a?"Details":localize("Palette|*.pal|").split("|")[0]}</summary>
				<p>${localize("Unexpected file format.")}</p>
				${f}
			</details>
		`}mn({messageHTML:l})}let Qt;const ds=Be("#about-paint"),$n=Be("#news");let ni=$n;location.origin!=="https://jspaint.app"&&$n.prepend(Be("<p>For the latest news, visit <a href='https://jspaint.app'>jspaint.app</a></p>").css({padding:"8px 15px"}));function Ls(){Qt&&Qt.close(),Qt=$Window({title:localize("About Paint"),resizable:!1,maximizeButton:!1,minimizeButton:!1}),Qt.addClass("about-paint squish"),zi&&Be("#about-paint-icon").attr("src","./images/icons/gay-es-paint-128x128.png"),Qt.$content.append(ds.show()).css({padding:"15px"}),Be("#jspaint-update-status-area").removeAttr("hidden"),Be("#failed-to-check-if-outdated").attr("hidden","hidden"),Be("#outdated").attr("hidden","hidden"),Qt.$Button(localize("OK"),()=>{Qt.close()}).attr("id","close-about-paint").focus().css({float:"right",marginBottom:"10px"}),Be("#refresh-to-update").on("click",n=>{n.preventDefault(),Ji(()=>{hs(),location.reload()})}),Qt.css({left:-innerWidth,top:-innerHeight}),Qt.center(),Be("#checking-for-updates").removeAttr("hidden");const e="https://jspaint.app/?news";fetch(e).then(n=>n.text()).then(n=>{const r=new DOMParser().parseFromString(n,"text/html");ni=Be(r).find("#news");const o=ni.find(".news-entry"),s=$n.find(".news-entry");if(!o.length)throw ni=$n,new Error(`No news found at fetched site (${e})`);function a(u,w){return u.get().some(_=>w===_.id)}const f=o.get().filter(u=>!a(s,u.id)),d=s.get().filter(u=>!a(o,u.id));f.length>0?Be("#outdated").removeAttr("hidden"):d.length>0&&(ni=$n),Be("#checking-for-updates").attr("hidden","hidden"),Hr()}).catch(n=>{var l;Be("#failed-to-check-if-outdated").removeAttr("hidden"),Be("#checking-for-updates").attr("hidden","hidden"),Hr(),(l=window.console)==null||l.log("Couldn't check for updates.",n)})}function hs(){if(Be("body").hasClass("ios"))try{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}catch{}}function Hr(){Be(".on-dev-host, .on-third-party-host, .on-official-host").hide(),location.hostname.match(/localhost|127.0.0.1/)?Be(".on-dev-host").show():location.hostname.match(/jspaint.app/)?Be(".on-official-host").show():Be(".on-third-party-host").show(),Be(".navigator-online, .navigator-offline").hide(),navigator.onLine?Be(".navigator-online").show():Be(".navigator-offline").show()}function fa(e){gi(e,(n,l)=>{if(n){ua({as_image_error:n});return}da(l.image||et(l.image_data))})}async function Ms(){const{file:e}=await systemHooks.showOpenFileDialog({formats:In});if(e.type.match(/^image|application\/pdf/)){fa(e);return}ot(localize("This is not a valid bitmap file, or its format is not currently supported."))}function da(e){pa(Math.max(window.globAppstate.main_canvas.width,e.width),Math.max(window.globAppstate.main_canvas.height,e.height),{name:"Enlarge Canvas For Paste",icon:Ot("p_stretch_both.png")}),n(),window.globApp.$canvas_area.trigger("resize");function n(){Gt(),ci(Mt($t));const l=Math.max(0,Math.ceil(window.globApp.$canvas_area.scrollLeft()/window.globAppstate.magnification)),r=Math.max(0,Math.ceil(window.globApp.$canvas_area.scrollTop()/window.globAppstate.magnification));wt({name:localize("Paste"),icon:Ot("p_paste.png"),soft:!0},()=>{window.globAppstate.selection=new Cn(l,r,e.width,e.height,e)})}}function pi(e,n){var a;const l=window.globAppstate.current_history_node;if(!e.image_data){n||(ot("History entry has no image data."),(a=window.console)==null||a.log("Target history entry has no image data:",e));return}window.globAppstate.current_history_node=e,Gt(!0),n||Gn(!0),window.globAppstate.saved=!1,ln(),window.globAppstate.main_ctx.copy(e.image_data),e.selection_image_data&&(window.globAppstate.selection&&window.globAppstate.selection.destroy(),e.name===localize("Free-Form Select")?ci(Mt(ai)):ci(Mt($t)),window.globAppstate.selection=new Cn(e.selection_x,e.selection_y,e.selection_image_data.width,e.selection_image_data.height,e.selection_image_data));const r=oi(e);window.globAppstate.undos=[...r],window.globAppstate.undos.reverse();const o=window.globAppstate.redos.length>0?[window.globAppstate.redos[0],...oi(window.globAppstate.redos[0])]:[l,...oi(l)];window.globAppstate.redos.length=0;let s=e;for(;s.futures.length>0;){const f=[...s.futures];f.sort((d,u)=>o.indexOf(d)>-1?-1:o.indexOf(u)>-1?1:0),s=f[0],window.globAppstate.redos.unshift(s)}window.globApp.$canvas_area.trigger("resize"),Ke.triggerHandler("session-update"),Ke.triggerHandler("history-update")}function wt({name:e,icon:n,use_loose_canvas_changes:l,soft:r,assume_saved:o},s){var u;o||(window.globAppstate.saved=!1,ln());const a=window.globAppstate.current_history_node;s==null||s(),window.globAppstate.current_history_node!==a&&(ot(`History node switched during undoable callback for ${e}. This shouldn't happen.`),(u=window.console)==null||u.log(`History node switched during undoable callback for ${e}, from`,a,"to",window.globAppstate.current_history_node));const f=window.globAppstate.main_ctx.getImageData(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height);window.globAppstate.redos.length=0,window.globAppstate.undos.push(window.globAppstate.current_history_node);const d=la({image_data:f,selection_image_data:window.globAppstate.selection&&window.globAppstate.selection.canvas.ctx.getImageData(0,0,window.globAppstate.selection.canvas.width,window.globAppstate.selection.canvas.height),selection_x:window.globAppstate.selection&&window.globAppstate.selection.x,selection_y:window.globAppstate.selection&&window.globAppstate.selection.y,text_tool_font:JSON.parse(JSON.stringify(window.globAppstate.text_tool_font)),tool_transparent_mode:window.globAppstate.tool_transparent_mode,foreground_color:window.globAppstate.selected_colors.foreground,background_color:window.globAppstate.selected_colors.background,ternary_color:window.globAppstate.selected_colors.ternary,parent:window.globAppstate.current_history_node,name:e,icon:n,soft:r});window.globAppstate.current_history_node.futures.push(d),window.globAppstate.current_history_node=d,Ke.triggerHandler("history-update"),Ke.triggerHandler("session-update")}function ps(e,n){window.globAppstate.current_history_node.futures.length===0&&e.match(window.globAppstate.current_history_node)?(n(),window.globAppstate.current_history_node.image_data=window.globAppstate.main_ctx.getImageData(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),window.globAppstate.current_history_node.selection_image_data=window.globAppstate.selection&&window.globAppstate.selection.canvas.ctx.getImageData(0,0,window.globAppstate.selection.canvas.width,window.globAppstate.selection.canvas.height),window.globAppstate.current_history_node.selection_x=window.globAppstate.selection&&window.globAppstate.selection.x,window.globAppstate.current_history_node.selection_y=window.globAppstate.selection&&window.globAppstate.selection.y,e.update_name&&(window.globAppstate.current_history_node.name=e.name),Ke.triggerHandler("history-update")):wt(e,n)}function Ds(){if(window.globAppstate.undos.length<1)return!1;window.globAppstate.redos.push(window.globAppstate.current_history_node);let e=window.globAppstate.undos.pop();for(;e.soft&&window.globAppstate.undos.length;)window.globAppstate.redos.push(e),e=window.globAppstate.undos.pop();return pi(e),!0}let Bn;function Os(){if(window.globAppstate.redos.length<1)return Bn&&Bn.close(),(!jn||jn.closed)&&(Bn=mn({title:"Redo",messageHTML:"To view all branches of the history tree, click <b>Edit > History</b>.",iconID:"info"}).$window),!1;window.globAppstate.undos.push(window.globAppstate.current_history_node);let e=window.globAppstate.redos.pop();for(;e.soft&&window.globAppstate.redos.length;)window.globAppstate.undos.push(e),e=window.globAppstate.redos.pop();return pi(e),!0}function oi(e){const n=[];for(e=e.parent;e;e=e.parent)n.push(e);return n}let jn;function Ps(){Bn&&Bn.close(),jn&&jn.close();const e=jn=$Window({title:"Document History",resizable:!1,maximizeButton:!1,minimizeButton:!1});e.addClass("history-window squish"),e.$content.html(`
		<label>
			<select id="history-view-mode" class="inset-deep">
				<option value="linear">Linear timeline</option>
				<option value="tree">Tree</option>
			</select>
		</label>
		<div class="history-view" tabIndex="0"></div>
	`);const n=e.$content.find(".history-view");n.focus();let l=0,r=[],o,s=e.$content.find("#history-view-mode");s.css({margin:"10px"});let a=s.val();s.on("change",()=>{a=s.val(),d()});function f(w){const _=Be(`
			<div class="history-entry">
				<div class="history-entry-icon-area"></div>
				<div class="history-entry-name"></div>
			</div>
		`);if(_.find(".history-entry-name").text((w.name||"Unknown")+(w===window.globAppstate.root_history_node?" (Start of History)":"")),_.find(".history-entry-icon-area").append(w.icon),a==="tree"){let A=0;for(let b=w.parent;b;b=b.parent)A++;_.css({marginInlineStart:`${A*8}px`})}w===window.globAppstate.current_history_node?(_.addClass("current"),o=_,requestAnimationFrame(()=>{n[0].scrollTop=Math.min(_[0].offsetTop,Math.max(l,_[0].offsetTop-n[0].clientHeight+_.outerHeight()))})):oi(window.globAppstate.current_history_node).indexOf(w)>-1&&_.addClass("ancestor-of-current");for(const A of w.futures)f(A);_.on("click",()=>{pi(w)}),_.history_node=w,r.push(_)}const d=()=>{l=n.scrollTop(),n.empty(),r=[],f(window.globAppstate.root_history_node),a==="linear"?r.sort((w,_)=>w.history_node.timestamp<_.history_node.timestamp?-1:_.history_node.timestamp<w.history_node.timestamp?1:0):r.reverse(),r.forEach(w=>{n.append(w)})};d();const u=w=>{const A=r.indexOf(o)+w;r[A]&&r[A].click()};n.on("keydown",w=>{!w.ctrlKey&&!w.altKey&&!w.shiftKey&&!w.metaKey&&(w.key==="ArrowDown"||w.key==="Down"?(u(1),w.preventDefault()):(w.key==="ArrowUp"||w.key==="Up")&&(u(-1),w.preventDefault()))}),Ke.on("history-update",d),e.on("close",()=>{Ke.off("history-update",d)}),e.center()}function Gn(e,n){var r;if(!window.globAppstate.history_node_to_cancel_to)return;const l=n&&window.globAppstate.current_history_node.parent&&window.globAppstate.current_history_node!==window.globAppstate.history_node_to_cancel_to&&window.globAppstate.current_history_node.futures.length===0?window.globAppstate.current_history_node:null;Ke.triggerHandler("pointerup",["canceling",n]);for(const o of window.globAppstate.selected_tools)(r=o.cancel)==null||r.call(o);if(!e&&(pi(window.globAppstate.history_node_to_cancel_to,!0),l)){const o=l.parent.futures.indexOf(l);o===-1?(ot("History node not found. Please report this bug."),console.log("history_node_to_discard",l),console.log("window.globAppstate.current_history_node",window.globAppstate.current_history_node),console.log("history_node_to_discard.parent",l.parent)):(l.parent.futures.splice(o,1),Ke.triggerHandler("history-update"))}window.globAppstate.history_node_to_cancel_to=null,Dt()}function li(e){window.globAppstate.selection.draw(),window.globAppstate.selection.destroy(),window.globAppstate.selection=null,e||wt({name:"Deselect",icon:St(Mt($t)),use_loose_canvas_changes:!0},()=>{})}function Gt(e){var n;window.globAppstate.selection&&li(e);for(const l of window.globAppstate.selected_tools)(n=l.end)==null||n.call(l,window.globAppstate.main_ctx)}function gs(e={}){window.globAppstate.selection&&wt({name:e.name||localize("Clear Selection"),icon:e.icon||Ot("p_delete.png")},()=>{window.globAppstate.selection.destroy(),window.globAppstate.selection=null})}function Fs(){Gt(),ci(Mt($t)),wt({name:localize("Select All"),icon:St(Mt($t)),soft:!0},()=>{window.globAppstate.selection=new Cn(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height)})}const ji=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?"⌘":"Ctrl",_n=`Please use the keyboard: ${ji}+C to copy, ${ji}+X to cut, ${ji}+V to paste. If keyboard is not an option, try using Chrome version 76 or higher.`;function Hn(e){if(document.queryCommandEnabled(e)){if(document.execCommand(e),!navigator.userAgent.includes("Firefox")||e==="paste")return ot(`That ${e} probably didn't work. ${_n}`)}else return ot(`Cannot perform ${e}. ${_n}`)}function ws(){const e=document.activeElement,n=e?e.tagName.toLowerCase():null;if(n=="textarea"||n=="input"&&/^(?:text|search|password|tel|url)$/i.test(e.type)){const l=e;if(typeof l.selectionStart=="number")return l.value.slice(l.selectionStart,l.selectionEnd)}return window.getSelection?window.getSelection().toString():""}function ms(e){const n=ws();if(n.length>0){if(!navigator.clipboard||!navigator.clipboard.writeText){if(e)return Hn("copy");ot(`${localize("Error getting the Clipboard Data!")} ${_n}`);return}navigator.clipboard.writeText(n)}else if(window.globAppstate.selection&&window.globAppstate.selection.canvas){if(!navigator.clipboard||!navigator.clipboard.write){if(e)return Hn("copy");ot(`${localize("Error getting the Clipboard Data!")} ${_n}`);return}window.globAppstate.selection.canvas.toBlob(l=>{Fn(l,()=>{navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},l.type,{value:l,enumerable:!0}))]).then(()=>{var r;(r=window.console)==null||r.log("Copied image to the clipboard.")},r=>{ot("Failed to copy to the Clipboard.",r)})})})}}function Us(e){if(!navigator.clipboard||!navigator.clipboard.write){if(e)return Hn("cut");ot(`${localize("Error getting the Clipboard Data!")} ${_n}`);return}ms(),gs({name:localize("Cut"),icon:Ot("p_cut.png")})}async function $s(e){if(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement){if(!navigator.clipboard||!navigator.clipboard.readText){if(e)return Hn("paste");ot(`${localize("Error getting the Clipboard Data!")} ${_n}`);return}const n=await navigator.clipboard.readText();document.execCommand("InsertText",!1,n);return}if(!navigator.clipboard||!navigator.clipboard.read){if(e)return Hn("paste");ot(`${localize("Error getting the Clipboard Data!")} ${_n}`);return}try{const l=await(await navigator.clipboard.read())[0].getType("image/png");fa(l)}catch(n){if(n.name==="NotFoundError")try{const l=await navigator.clipboard.readText();if(l){const r=rs(l);r.length>0?as(r[0]).then(o=>{da(o.image||et(o.image_data))},o=>{fs(o)}):ot("The information on the Clipboard can't be inserted into Paint.")}else ot("The information on the Clipboard can't be inserted into Paint.")}catch(l){ot(localize("Error getting the Clipboard Data!"),l)}else ot(localize("Error getting the Clipboard Data!"),n)}}function Bs(){Yr({name:localize("Invert Colors"),icon:Ot("p_invert.png")},(e,n,l,r)=>{Eo(n,r)})}function js(){Gt(),Gn(),wt({name:localize("Clear Image"),icon:Ot("p_blank.png")},()=>{window.globAppstate.saved=!1,ln(),window.globAppstate.transparency?window.globAppstate.main_ctx.clearRect(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height):(window.globAppstate.main_ctx.fillStyle=window.globAppstate.selected_colors.background,window.globAppstate.main_ctx.fillRect(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height))})}let an=()=>{};function zs(){an();const e=document.createElement("div");e.classList.add("bitmap-view","inset-deep"),document.body.appendChild(e),Be(e).css({display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"9999",background:"var(--Background)"}),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen();let n,l=!1,r=setInterval(()=>{document.fullscreenElement===e||document.webkitFullscreenElement===e?l=!0:l&&an()},100);an=()=>{document.removeEventListener("fullscreenchange",o),document.removeEventListener("webkitfullscreenchange",o),document.removeEventListener("keydown",a),document.removeEventListener("mousedown",f),setTimeout(()=>{document.removeEventListener("contextmenu",d)},100),URL.revokeObjectURL(n),clearInterval(r),(document.fullscreenElement===e||document.webkitFullscreenElement===e)&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),e.remove(),an=()=>{}},document.addEventListener("fullscreenchange",o,{once:!0}),document.addEventListener("webkitfullscreenchange",o,{once:!0}),document.addEventListener("keydown",a),document.addEventListener("mousedown",f),document.addEventListener("contextmenu",d);function o(){document.fullscreenElement!==e&&document.webkitFullscreenElement!==e&&an()}let s=!1;function a(u){if(s=s||u.repeat&&(u.key==="f"||u.key==="F"),!u.repeat){if(s&&(u.key==="f"||u.key==="F")){s=!1;return}u.preventDefault(),an()}}function f(u){an()}function d(u){u.preventDefault(),an()}window.globAppstate.main_canvas.toBlob(u=>{n=URL.createObjectURL(u);const w=document.createElement("img");w.src=n,e.appendChild(w)},"image/png")}function Mt(e){for(let n=0;n<sn.length;n++)if(sn[n].id==e)return sn[n]}function Hs(e){}function ci(e,n){if(Gt(),window.globAppstate.selected_tools.length===1&&window.globAppstate.selected_tool.deselect||(window.globAppstate.return_to_tools=[...window.globAppstate.selected_tools]),n){const l=window.globAppstate.selected_tools.indexOf(e);l===-1?(window.globAppstate.selected_tools.push(e),window.globAppstate.selected_tools.sort((r,o)=>sn.indexOf(r)<sn.indexOf(o)?-1:sn.indexOf(r)>sn.indexOf(o)?1:0)):window.globAppstate.selected_tools.splice(l,1),window.globAppstate.selected_tools.length>0?window.globAppstate.selected_tool=window.globAppstate.selected_tools[window.globAppstate.selected_tools.length-1]:(window.globAppstate.selected_tool=window.globAppstate.default_tool,window.globAppstate.selected_tools=[window.globAppstate.selected_tool])}else window.globAppstate.selected_tool=e,window.globAppstate.selected_tools=[e];e.preload&&e.preload()}function ha(e){const n=e.getImageData(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height);for(let l=0,r=n.data.length;l<r;l+=4)if(n.data[l+3]<253)return!0;return!1}function _s(){wt({name:"Make Opaque",icon:Ot("p_make_opaque.png")},()=>{window.globAppstate.main_ctx.save(),window.globAppstate.main_ctx.globalCompositeOperation="destination-atop",window.globAppstate.main_ctx.fillStyle="white",window.globAppstate.main_ctx.fillRect(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height),window.globAppstate.main_ctx.restore()})}function bs(e,n,l={}){const r=Math.max(1,e),o=Math.max(1,n);(window.globAppstate.main_canvas.width!==r||window.globAppstate.main_canvas.height!==o)&&wt({name:l.name||"Resize Canvas",icon:l.icon||Ot("p_stretch_both.png")},()=>{try{console.log("리사이즈");const s=window.globAppstate.main_ctx.getImageData(0,0,r,o);window.globAppstate.main_canvas.width=r,window.globAppstate.main_canvas.height=o,window.globAppstate.main_ctx.disable_image_smoothing(),window.globAppstate.transparency||(window.globAppstate.main_ctx.fillStyle=window.globAppstate.selected_colors.background,window.globAppstate.main_ctx.fillRect(0,0,window.globAppstate.main_canvas.width,window.globAppstate.main_canvas.height));const a=et(s);window.globAppstate.main_ctx.drawImage(a,0,0)}catch(s){s.name==="NS_ERROR_FAILURE"?ot(localize("Insufficient memory to perform operation."),s):ot(localize("An unknown error has occurred."),s);return}window.globApp.$canvas_area.trigger("resize")})}function pa(e,n,l={}){bs(e,n,l),Ko.set({width:window.globAppstate.main_canvas.width.toString(),height:window.globAppstate.main_canvas.height.toString()},r=>{})}function zt(){zt.$window&&zt.$window.close();const e=zt.$window=Wr(localize("Attributes"));e.addClass("attributes-window");const n=e.$main,l={[localize("File last saved:")]:localize("Not Available"),[localize("Size on disk:")]:localize("Not Available"),[localize("Resolution:")]:"72 x 72 dots per inch"},r=Be(ht("table")).appendTo(n);for(const R in l){const L=Be(ht("tr")).appendTo(r);Be(ht("td")).appendTo(L).text(R);const N=Be(ht("td")).appendTo(L).text(l[R]);l[R].indexOf("72")!==-1&&N.css("direction","ltr")}const o={px:1,in:72,cm:28.3465};let s=zt.unit=zt.unit||"px",a=window.globAppstate.main_canvas.width,f=window.globAppstate.main_canvas.height;const d=Be(ht("label")).appendTo(n).html(Ht(localize("&Width:"))),u=Be(ht("label")).appendTo(n).html(Ht(localize("&Height:"))),w=Be(ht("input")).attr({type:"number",min:1,"aria-keyshortcuts":"Alt+W W W"}).addClass("no-spinner inset-deep").appendTo(d),_=Be(ht("input")).attr({type:"number",min:1,"aria-keyshortcuts":"Alt+H H H"}).addClass("no-spinner inset-deep").appendTo(u);n.find("input").css({width:"40px"}).on("change keyup keydown keypress pointerdown pointermove paste drop",()=>{a=Number(w.val())*o[s],f=Number(_.val())*o[s]});const A=Be(ht("fieldset")).appendTo(n).append(`
		<legend>${localize("Units")}</legend>
		<div class="fieldset-body">
			<div class="radio-field"><input type="radio" name="units" id="unit-in" value="in" aria-keyshortcuts="Alt+I I"><label for="unit-in">${Ht(localize("&Inches"))}</label></div>
			<div class="radio-field"><input type="radio" name="units" id="unit-cm" value="cm" aria-keyshortcuts="Alt+M M"><label for="unit-cm">${Ht(localize("C&m"))}</label></div>
			<div class="radio-field"><input type="radio" name="units" id="unit-px" value="px" aria-keyshortcuts="Alt+P P"><label for="unit-px">${Ht(localize("&Pixels"))}</label></div>
		</div>
	`);A.find(`[value=${s}]`).attr({checked:!0}),A.on("change",()=>{const R=String(A.find(":checked").val());w.val(a/o[R]),_.val(f/o[R]),s=R}).triggerHandler("change");const b=Be(ht("fieldset")).appendTo(n).append(`
		<legend>${localize("Colors")}</legend>
		<div class="fieldset-body">
			<div class="radio-field"><input type="radio" name="colors" id="attribute-monochrome" value="monochrome" aria-keyshortcuts="Alt+B B"><label for="attribute-monochrome">${Ht(localize("&Black and white"))}</label></div>
			<div class="radio-field"><input type="radio" name="colors" id="attribute-polychrome" value="polychrome" aria-keyshortcuts="Alt+L L"><label for="attribute-polychrome">${Ht(localize("Co&lors"))}</label></div>
		</div>
	`);b.find(`[value=${monochrome?"monochrome":"polychrome"}]`).attr({checked:!0});const C=Be(ht("fieldset")).appendTo(n).append(`
		<legend>${localize("Transparency")}</legend>
		<div class="fieldset-body">
			<div class="radio-field"><input type="radio" name="transparency" id="attribute-transparent" value="transparent"><label for="attribute-transparent">${localize("Transparent")}</label></div>
			<div class="radio-field"><input type="radio" name="transparency" id="attribute-opaque" value="opaque"><label for="attribute-opaque">${localize("Opaque")}</label></div>
		</div>
	`);C.find(`[value=${window.globAppstate.transparency?"transparent":"opaque"}]`).attr({checked:!0}),e.$Button(localize("OK"),()=>{const R=C.find(":checked").val();b.find(":checked").val();const L=String(A.find(":checked").val());zt.unit=L,window.globAppstate.transparency=R=="transparent",R=="transparent"&&(window.globAppstate.selected_colors.background="transparent");const N=o[L],j=Number(w.val())*N,P=Number(_.val())*N;pa(~~j,~~P),!window.globAppstate.transparency&&ha(window.globAppstate.main_ctx)&&_s(),zt.$window.close()},{type:"submit"}),e.$Button(localize("Cancel"),()=>{zt.$window.close()}),e.$Button(Be.parseHTML(Ht(localize("&Default")))[0],()=>{a=window.globAppstate.default_canvas_width,f=window.globAppstate.default_canvas_height,w.val(a/o[s]),_.val(f/o[s])}).attr("aria-keyshortcuts","Alt+D D"),vs(e),w.select(),zt.$window.center()}zt.$window=null;zt.unit="px";function Gs(){const e=Wr(localize("Flip and Rotate"));e.addClass("flip-and-rotate"),Be(ht("fieldset")).appendTo(e.$main).append(`
		<legend>${localize("Flip or rotate")}</legend>
	// 	<div class="radio-wrapper">
	// 		<input
	// 			type="radio"
	// 			name="flip-or-rotate"
	// 			id="flip-horizontal"
	// 			value="flip-horizontal"
	// 			aria-keyshortcuts="Alt+F"
	// 			checked
	// 		/><label for="flip-horizontal">${Ht(localize("&Flip horizontal"))}</label>
	// 	</div>
	// 	<div class="radio-wrapper">
	// 		<input
	// 			type="radio"
	// 			name="flip-or-rotate"
	// 			id="flip-vertical"
	// 			value="flip-vertical"
	// 			aria-keyshortcuts="Alt+V"
	// 		/><label for="flip-vertical">${Ht(localize("Flip &vertical"))}</label>
	// 	</div>
	// 	<div class="radio-wrapper">
	// 		<input
	// 			type="radio"
	// 			name="flip-or-rotate"
	// 			id="rotate-by-angle"
	// 			value="rotate-by-angle"
	// 			aria-keyshortcuts="Alt+R"
	// 		/><label for="rotate-by-angle">${Ht(localize("&Rotate by angle"))}</label>
	// 	</div>
	// `)}function vs(e){e.on("keydown",n=>{const l=e.find("[aria-keyshortcuts]");for(let r of l){const o=Be(r).attr("aria-keyshortcuts").split(" ");for(const s of o)if(!!s.match(/Alt\+/i)===n.altKey&&!!s.match(/Ctrl\+/i)===n.ctrlKey&&!!s.match(/Meta\+/i)===n.metaKey&&!!s.match(/Shift\+/i)===n.shiftKey&&s.split("+").pop().toUpperCase()===n.key.toUpperCase()){n.preventDefault(),n.stopPropagation(),r.disabled&&(r=r.closest(".radio-wrapper")),r.click(),r.focus();return}}}),e.on("focusin focusout",n=>{if(Be(n.target).is('textarea, input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="image"]):not([type="file"]):not([type="color"]):not([type="range"])'))for(const l of e.find("[aria-keyshortcuts]"))l._original_aria_keyshortcuts=l._original_aria_keyshortcuts??l.getAttribute("aria-keyshortcuts"),l.setAttribute("aria-keyshortcuts",l.getAttribute("aria-keyshortcuts").split(" ").filter(r=>r.match(/(Alt|Ctrl|Meta)\+/i)).join(" "));else for(const l of e.find("[aria-keyshortcuts]"))l._original_aria_keyshortcuts&&l.setAttribute("aria-keyshortcuts",l._original_aria_keyshortcuts)})}function Qi(e,n,l){const r=e.getContext("2d"),o=n.match(/^image\/(?:x-)?bmp\s*(?:-(\d+)bpp)?/);if(o){const s=encodeBMP(r.getImageData(0,0,e.width,e.height),parseInt(o[1]||"24",10)),a=new Blob([s]);Fn(a,()=>{l(a)})}else if(n==="image/png"){const s=r.getImageData(0,0,e.width,e.height),a=me.encode([s.data.buffer],s.width,s.height),f=new Blob([a]);Fn(f,()=>{l(f)})}else if(n==="image/tiff"){const s=r.getImageData(0,0,e.width,e.height),a={t305:["jspaint (UTIF.js)"]},f=UTIF.encodeImage(s.data.buffer,s.width,s.height,a),d=new Blob([f]);Fn(d,()=>{l(d)})}else e.toBlob(s=>{Fn(s,()=>{l(s)},[137,80,78,71,13,10,26,10],n==="image/png")},n)}function gi(e,n){let l,r,o=!1;e.arrayBuffer().then(s=>{const a={png:[137,80,78,71,13,10,26,10],bmp:[66,77],jpeg:[255,216,255],gif:[71,73,70,56],webp:[87,69,66,80],tiff_be:[77,77,0,42],tiff_le:[73,73,42,0],ico:[0,0,1,0],cur:[0,0,2,0],icns:[105,99,110,115]},f=new Uint8Array(s);let d;for(const[j,P]of Object.entries(a))P.every((h,p)=>h===f[p])&&(d=j);if(d||String.fromCharCode(...f.slice(0,1024)).includes("%PDF")&&(d="pdf"),d==="bmp"){const{colorTable:j,bitsPerPixel:P,imageData:S}=decodeBMP(s);l=P===24?"image/bmp":`image/bmp;bpp=${P}`,j.length>=2&&(r=j.map(h=>`rgb(${h.r}, ${h.g}, ${h.b})`),o=!1),n(null,{file_format:l,monochrome:o,palette:r,image_data:S,source_blob:e})}else if(d==="png"){const j=me.decode(s),P=me.toRGBA8(j)[0],{width:S,height:h,tabs:p,ctype:i}=j;if(p.PLTE&&p.PLTE.length>=3*2&&i===3){r=new Array(p.PLTE.length/3);for(let U=0;U<r.length;U++)p.tRNS&&p.tRNS.length>=U+1?r[U]=`rgba(${p.PLTE[U*3+0]}, ${p.PLTE[U*3+1]}, ${p.PLTE[U*3+2]}, ${p.tRNS[U]/255})`:r[U]=`rgb(${p.PLTE[U*3+0]}, ${p.PLTE[U*3+1]}, ${p.PLTE[U*3+2]})`;o=!1}l="image/png";const x=new ImageData(new Uint8ClampedArray(P),S,h);n(null,{file_format:l,monochrome:o,palette:r,image_data:x,source_blob:e})}else if(d==="tiff_be"||d==="tiff_le"){var u=UTIF.decode(s),w=u,_=0,A=w[0];u[0].subIFD&&(w=w.concat(u[0].subIFD));for(var b=0;b<w.length;b++){var C=w[b];if(!(C.t258==null||C.t258.length<3)){var R=C.t256*C.t257;R>_&&(_=R,A=C)}}UTIF.decodeImage(s,A,u);var L=UTIF.toRGBA8(A),N=new ImageData(new Uint8ClampedArray(L.buffer),A.width,A.height);l="image/tiff",n(null,{file_format:l,monochrome:o,palette:r,image_data:N,source_blob:e})}else if(d!=="pdf"){o=!1,l={png:"image/png",webp:"image/webp",jpeg:"image/jpeg",gif:"image/gif",tiff_be:"image/tiff",tiff_le:"image/tiff",ico:"image/x-icon",cur:"image/x-win-bitmap",icns:"image/icns"}[d]||e.type;const j=URL.createObjectURL(e),P=new Image,S=()=>{URL.revokeObjectURL(j),e.text().then(h=>{const p=new Error("failed to decode blob as an image");p.code=h.match(/^\s*<!doctype\s+html/i)?"html-not-image":"decoding-failure",n(p)},h=>{const p=new Error("failed to decode blob as image or text");p.code="decoding-failure",n(p)})};P.onload=()=>{if(URL.revokeObjectURL(j),!P.complete||typeof P.naturalWidth>"u"||P.naturalWidth===0){S();return}n(null,{file_format:l,monochrome:o,palette:r,image:P,source_blob:e})},P.onerror=S,P.src=j}},s=>{n(s)})}function ga(e){gi(e,(n,l)=>{if(n){ot("The file has been saved, however... "+localize("Paint cannot read this file."),n);return}ca(l);const r=In.find(({mimeType:o})=>o===l.file_format);wt({name:`${localize("Save As")} ${r?r.name:l.file_format}`,icon:Ot("p_save.png"),assume_saved:!0},()=>{window.globAppstate.main_ctx.copy(l.image||l.image_data)})})}function qs(){window.globAppstate.selection&&window.globAppstate.selection.canvas&&systemHooks.showSaveFileDialog({dialogTitle:localize("Save As"),defaultFileName:"selection.png",defaultFileFormatID:"image/png",formats:In,getBlob:e=>new Promise(n=>{Qi(window.globAppstate.selection.canvas,e,l=>{n(l)})})})}function Fn(e,n,l,r=!0){e.size>0?l?e.arrayBuffer().then(o=>{const s=new Uint8Array(o);l.every((f,d)=>f===s[d])===r?n():mn({message:window.is_electron_app?"Writing images in this file format is not supported.":"Your browser does not support writing images in this file format.",iconID:"error"})},o=>{ot(localize("An unknown error has occurred."),o)}):n():ot(localize("Failed to save document."))}export{Ke as $,zt as A,js as B,hi as C,zs as D,Us as E,ms as F,$s as G,gs as H,Fs as I,qs as J,Ms as K,ks as L,Ns as M,zr as N,us as O,Ls as P,co as Q,pa as R,ts as S,$o as T,Rs as U,es as V,ss as W,Ps as X,Gt as Y,Gn as Z,Bo as _,Ji as a,Oo as a0,jo as a1,zo as a2,ta as a3,Ho as a4,qo as a5,Go as a6,na as a7,Dt as a8,Gs as a9,Bs as aa,Ss as ab,Et as ac,da as ad,fa as ae,Xi as af,sa as ag,ps as ah,Hs as ai,Cs as aj,ot as b,ci as c,xs as d,hs as e,as as f,Mt as g,ln as h,et as i,Ts as j,wt as k,Ko as l,si as m,Ot as n,os as o,oa as p,Vi as q,Os as r,mn as s,sn as t,Ds as u,rs as v,Is as w,fs as x,Wo as y,la as z};
